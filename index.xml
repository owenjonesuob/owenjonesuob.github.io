<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Products of Procrastination</title>
<link>https://owenjonesuob.github.io/</link>
<atom:link href="https://owenjonesuob.github.io/index.xml" rel="self" type="application/rss+xml"/>
<description>I&#39;m a data scientist/engineer living in Cardiff, United Kingdom. This is a collection of projects I have spent time on while I was supposed to be doing other things.</description>
<generator>quarto-1.6.40</generator>
<lastBuildDate>Sat, 27 Apr 2024 00:00:00 GMT</lastBuildDate>
<item>
  <title>Use deploy keys to access private repos within GitHub Actions</title>
  <link>https://owenjonesuob.github.io/posts/2024-04-27-use-deploy-keys-to-access-private-repos-within-github-actions/</link>
  <description><![CDATA[ 





<section id="motivation" class="level2">
<h2 class="anchored" data-anchor-id="motivation">Motivation</h2>
<p>Suppose you have a GitHub Actions <a href="https://docs.github.com/en/actions/using-workflows/about-workflows">workflow</a> called <code>your-workflow</code>, within a repository called <code>your-repo</code>.</p>
<p>Then suppose that for some reason (see Why would I ever need to do this?), within that workflow, you need to get hold of <em>another</em> repo - let’s call it <code>your-extra-repo</code>.</p>
<p>That’s easy enough if <code>your-extra-repo</code> is a public repo: you can “just” use the GitHub-provided <a href="https://github.com/actions/checkout"><code>actions/checkout</code></a> action multiple times within your workflow.</p>
<p>But what if it’s <em>not</em> a public repo?</p>
<p>There are a few possible approaches<sup>1</sup> - I’m going to explain my preferred one here.</p>
</section>
<section id="deploy-keys" class="level2">
<h2 class="anchored" data-anchor-id="deploy-keys">Deploy keys</h2>
<p>A <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/managing-deploy-keys#deploy-keys">deploy key</a> is an SSH key that you can attach to a single GitHub repository, and which provides access to just that repository.</p>
<p>We can use a deploy key as the core part of our solution. It’s an ideal choice here because it allows us to create a very specific access route:</p>
<ul>
<li>From the GitHub Actions runner which executes <code>your-workflow</code></li>
<li>To the non-public <code>your-extra-repo</code></li>
<li>With read-only permissions (you <em>can</em> add write permissions, but we shouldn’t for this particular purpose)</li>
</ul>
<p>Here’s how I usually set things up:</p>
<ol type="1">
<li><p>Create a new SSH keypair - it doesn’t matter what method you use to create it. I’d suggest using the following command in a terminal (a Linux terminal, or the RStudio Terminal, or Windows PowerShell…):</p>
<pre class="console"><code>ssh-keygen -t ed25519 -f deploy</code></pre>
<p>If you’re prompted, don’t set a passphrase. This will create two files in your current working called <code>deploy.pub</code> and <code>deploy</code>, containing the public and private parts respectively of a new SSH key.</p></li>
<li><p>In GitHub, navigate to <code>your-extra-repo</code>. In the <code>Settings</code> tab, find <code>Security &gt; Deploy keys</code>. Create a new deploy key:</p>
<ul>
<li><code>Title</code> - up to you, but I tend to call it something like <code>your-repo-your-workflow</code><sup>2</sup></li>
<li><code>Key</code> - this must be the <strong>public</strong> part of the SSH key you just created (you can open <code>deploy.pub</code> and copy the entire contents)</li>
</ul></li>
<li><p>Now navigate to the GitHub page for <code>your-repo</code>. In the <code>Settings</code> tab, find <code>Security &gt; Secrets and variables &gt; Actions</code>. Add a repository secret:</p>
<ul>
<li><code>Name</code> - again up to you, but I tend to use the pattern <code>YOUR_EXTRA_REPO_DEPLOY_KEY</code></li>
<li><code>Value</code> - this must be the <strong>private</strong> part of the SSH key you just created (you can open <code>deploy</code> and copy the entire contents)</li>
</ul></li>
<li><p>Delete both parts of the key from wherever you created it (e.g.&nbsp;delete <code>deploy.pub</code> and <code>deploy</code>) - we don’t need these any more!</p></li>
</ol>
<p>You can follow these same steps to make more than one private repo accessible from <code>your-workflow</code> - if you do, you should create &amp; use a different deploy key for each one.</p>
</section>
<section id="why-would-i-ever-need-to-do-this" class="level2">
<h2 class="anchored" data-anchor-id="why-would-i-ever-need-to-do-this">Why would I ever need to do this?</h2>
<p>So far, I’ve come across two different cases where this trick can be handy!</p>
<section id="case-1-git-submodules" class="level3">
<h3 class="anchored" data-anchor-id="case-1-git-submodules">Case 1: git submodules</h3>
<p>Suppose <code>your-repo</code> contains a git submodule which lives in a private repo <code>your-extra-repo</code>, and that you need to get to something provided by that submodule within <code>your-workflow</code>.</p>
<p>(For a concrete example of this, see my previous post about <a href="../../posts/2024-04-16-modular-r-code-for-analytical-projects-with-box/index.html">modular R code with {box}</a>.)</p>
<p>The GitHub-provided <a href="https://github.com/actions/checkout"><code>actions/checkout</code></a> action is typically used to check out the current repo within a GitHub Actions workflow. And at first glance, the solution looks simple.</p>
<p>The <code>actions/checkout</code> action takes some optional parameters:</p>
<ul>
<li><code>submodules</code> - whether to check out submodules (default <code>false</code>)</li>
</ul>
<p>So can we just specify <code>submodules: true</code>?</p>
<p>Unfortunately not, because the submodule we want is in a private repo; we’ll need to provide some way of verifying that we’re allowed to access it.</p>
<p>Ah-ha! we say, look, here’s another handy optional parameter:</p>
<ul>
<li><code>ssh-key</code> - if provided, it is used to fetch the specified repository (instead of fetching via HTTPS with the <code>github.token</code> generated for the workflow run)</li>
</ul>
<p>So can we just pass our shiny new deploy key to this parameter via a GitHub secret?</p>
<p>Again, we quickly hit a problem: it seems that if you provide <code>ssh-key</code>, it is used for <em>all</em> git operations within the checkout action. So if we pass in a deploy key, we end up trying to use that deploy key to clone <code>your-repo</code> too, leading to failure (remember the whole point of a deploy key is that it allows access to one single repo, <code>your-extra-repo</code> in this case).</p>
<p>So ideally, we’d like to do a “normal” checkout for <code>your-repo</code>, but a special SSH checkout for <code>your-extra-repo</code>…</p>
<p>The trick isn’t too complicated - in fact, it’s adapted from a scenario anticipated by the <code>actions/checkout</code> repo’s <a href="https://github.com/actions/checkout/blob/main/README.md#Checkout-multiple-repos-private">README file</a>:</p>
<ol type="1">
<li>Use an <code>actions/checkout</code> step to check out <code>your-repo</code> as usual</li>
<li>Use <em>another</em> <code>actions/checkout</code> step to check out the <code>your-extra-repo</code> submodule, taking advantage of some more optional parameters:
<ul>
<li><code>repository</code> - which repository to check out (default is the repo which the workflow belongs to, but we’ll ask for <code>your-extra-repo</code> instead)</li>
<li><code>path</code> - the location to check out to within <code>your-repo</code> (the default is <code>.</code>, but a submodule typically lives within a subdirectory, i.e.&nbsp;you probably don’t want to check out <code>your-extra-repo</code> right on top of <code>your-repo</code>)</li>
<li><code>ssh-key</code> - we’ve met this already! We’ll use it here to pass through the private half of the deploy key we set up previously</li>
</ul></li>
</ol>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">some-job-name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span></span>
<span id="cb2-4"></span>
<span id="cb2-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-6"></span>
<span id="cb2-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Checkout this repo</span></span>
<span id="cb2-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v4</span></span>
<span id="cb2-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">submodules</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">false</span></span>
<span id="cb2-11"></span>
<span id="cb2-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Checkout your-extra-repo submodule</span></span>
<span id="cb2-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v4</span></span>
<span id="cb2-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb2-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repository</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> your-user-or-org/your-extra-repo</span></span>
<span id="cb2-16"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ssh-key</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ${{ secrets.YOUR_EXTRA_REPO_DEPLOY_KEY }}</span></span>
<span id="cb2-17"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">path</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ./path/to/submodule</span></span>
<span id="cb2-18"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">          </span></span>
<span id="cb2-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">      # More steps...</span></span></code></pre></div>
<p>Note: the explicit <code>submodules: false</code> isn’t required since <code>false</code> is the default, but I think it suggests to the casual reader that there’s <em>something</em> funky and submodule-related going on…)</p>
</section>
<section id="case-2-pre-commit-hooks" class="level3">
<h3 class="anchored" data-anchor-id="case-2-pre-commit-hooks">Case 2: pre-commit hooks</h3>
<p>We use <a href="https://pre-commit.com/">pre-commit</a> in several of our team’s repos. For these repos, we also set up a GitHub Actions workflow to run pre-commit whenever a pull request is opened or updated. I won’t go into too much detail here, as that’s probably worthy of its own post sometime!</p>
<p>As well as using some hooks from public repos, we have a handful of custom “team hooks” in an internal<sup>3</sup> repo within our GitHub organisation.</p>
<p>The problem is that under the hood, pre-commit uses git to get hold of the various hook-supplying repos. So once again, we need some way of using a “regular” checkout for public repos, and then a “non-regular” checkout for our internal repo.</p>
<p>This time, the trick is in two parts:</p>
<ol type="1">
<li><p>In <code>your-repo</code>, in the <code>.pre-commit-config.yaml</code> file, use HTTPS-format repo URLs for public repos, and an SSH-format URL for the internal repo:</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repos</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repo</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> https://github.com/pre-commit/pre-commit-hooks</span></span>
<span id="cb3-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rev</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> v4.5.0</span></span>
<span id="cb3-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hooks</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-5"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> trailing-whitespace</span></span>
<span id="cb3-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> end-of-file-fixer</span></span>
<span id="cb3-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repo</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> https://github.com/lorenzwalthert/precommit</span></span>
<span id="cb3-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rev</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> v0.4.1</span></span>
<span id="cb3-9"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hooks</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> parsable-R</span></span>
<span id="cb3-11"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">repo</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> git@github.com:your-user-or-org/your-extra-repo</span></span>
<span id="cb3-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rev</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> v0.0.1</span></span>
<span id="cb3-13"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">hooks</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb3-14"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> your-first-hook</span></span>
<span id="cb3-15"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">id</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> your-second-hook</span></span></code></pre></div></li>
<li><p>In your GitHub Actions workflow, copy the private half of the deploy key from the relevant GitHub secret into a keyfile, and then tell pre-commit to use that SSH key for all SSH operations executed by git:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">jobs</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb4-2"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">  </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb4-3"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">runs-on</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> ubuntu-latest</span></span>
<span id="cb4-4"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">steps</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb4-5"></span>
<span id="cb4-6"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/checkout@v4</span></span>
<span id="cb4-7"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">      </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">with</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span></span>
<span id="cb4-8"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">        </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fetch-depth</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb4-9"></span>
<span id="cb4-10"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">uses</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> actions/setup-python@v5</span></span>
<span id="cb4-11"></span>
<span id="cb4-12"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Install dependencies</span></span>
<span id="cb4-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">      run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb4-14">        python -m pip install --upgrade pip pre-commit</span>
<span id="cb4-15"></span>
<span id="cb4-16">        # Set up SSH access for some-private-repo</span>
<span id="cb4-17">        mkdir -p ~/.ssh/</span>
<span id="cb4-18">        echo "${{ secrets.SOME_PRIVATE_REPO_DEPLOY_KEY }}" &gt; ~/.ssh/deploy-key</span>
<span id="cb4-19">        chmod 600 ~/.ssh/deploy-key</span>
<span id="cb4-20">        ssh-keyscan -H github.com &gt;&gt; ~/.ssh/known_hosts</span>
<span id="cb4-21"></span>
<span id="cb4-22"><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">    </span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">-</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> </span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">name</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">:</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;"> Run pre-commit</span></span>
<span id="cb4-23"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">      run</span><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">: </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">|</span></span>
<span id="cb4-24">        GIT_SSH_COMMAND='ssh -i ~/.ssh/deploy-key -o IdentitiesOnly=yes' \</span>
<span id="cb4-25">          pre-commit run \</span>
<span id="cb4-26">          --from-ref ${{ github.event.pull_request.base.sha }} \</span>
<span id="cb4-27">          --to-ref ${{ github.event.pull_request.head.sha }}</span></code></pre></div></li>
</ol>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>At the time of writing, this mammoth GitHub issue contains an ongoing discussion: <a href="https://github.com/actions/checkout/issues/287" class="uri">https://github.com/actions/checkout/issues/287</a>↩︎</p></li>
<li id="fn2"><p>This naming pattern helps to make it clear, if you are ever tidying up your deploy keys, which key was used where.↩︎</p></li>
<li id="fn3"><p>You can interchange “private” and “internal” throughout this post - the key thing is that both are “non-public”.↩︎</p></li>
</ol>
</section></div> ]]></description>
  <guid>https://owenjonesuob.github.io/posts/2024-04-27-use-deploy-keys-to-access-private-repos-within-github-actions/</guid>
  <pubDate>Sat, 27 Apr 2024 00:00:00 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2024-04-27-use-deploy-keys-to-access-private-repos-within-github-actions/key.webp" medium="image" type="image/webp"/>
</item>
<item>
  <title>Modular R code for analytical projects with {box}</title>
  <link>https://owenjonesuob.github.io/posts/2024-04-16-modular-r-code-for-analytical-projects-with-box/</link>
  <description><![CDATA[ 





<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>I work with a team of data scientists and statistical modellers, and we do pretty much everything in R.</p>
<p>We work on all sorts of projects; I wanted to share a really useful pattern that we’ve developed to help us write better code across all of those projects, and a little bit of the reasoning behind it!</p>
</section>
<section id="modular-r-code" class="level2">
<h2 class="anchored" data-anchor-id="modular-r-code">Modular R code</h2>
<p>Plenty of code we write ends up being useful in multiple places. So ideally, we want to make sure our code is:</p>
<ul>
<li>easy to <strong>reproduce</strong> - in particular, it should be clear when code depends on other code</li>
<li>easy to <strong>maintain</strong> - if we need to change how something works, we want to make changes in as few places as possible</li>
<li>easy to <strong>find</strong> - if we know a certain piece of functionality exists already, we shouldn’t have to search too hard to find it</li>
</ul>
<p>Together, these concepts form the basis of <strong>modular</strong> code: that is, keeping related functionality grouped together, and having a sensible way of declaring dependencies in your code.</p>
<p>One solution to this problem would be to turn any “modularisable” code within a project into an R package. And that is absolutely a good approach, and absolutely doable, but it does have a couple of drawbacks:</p>
<ul>
<li>It requires a bit of additional knowledge, namely how to construct R packages - which actually isn’t too tricky, this is barely a drawback</li>
<li>The package needs to be reinstalled after any updates - again, not arduous, but slight additional friction</li>
<li>We would need to choose a package name - this is <em>hard</em></li>
</ul>
<p>I’m not joking. Choosing a package name can be really difficult - which actually is often a symptom of the potential package not having a well-defined scope. I think this is especially true of analytical projects, where there are often multiple “scopes” involved (e.g.&nbsp;importing data, processing, producing outputs…) - and, from bitter experience, where these scopes can change or expand quite dramatically as the project progresses.</p>
<p>So ideally we want all the benefits of modular code, without the restrictions implied by having to fit our code into a formal package.</p>
<p>Luckily, there’s a package for that…</p>
</section>
<section id="what-is-box" class="level2">
<h2 class="anchored" data-anchor-id="what-is-box">What is {box}?</h2>
<p>It’s an R package providing a framework which makes it easier to write modular code. The <code>box::use()</code> function is used to declare when one piece of code is dependent on another - kind of like <code>source()</code>, but without dumping everything into the global environment.</p>
<p>If you haven’t come across {box} before, I’d really strongly encourage you to pause here and go take a quick look at the <a href="https://klmr.me/box/">package website</a> to see how it works. It’s awesome.</p>
<p>On its own, it is already immensely useful within the context of a single project. But let me share a couple of additional ideas that revolutionised how we write modular code <em>across multiple projects</em>.</p>
</section>
<section id="defining-module-types" class="level2">
<h2 class="anchored" data-anchor-id="defining-module-types">Defining module types</h2>
<p>As we began using {box} more and more to structure our code, we realised that we tended to end up three different “types” of module, distinguished by where they were being used…</p>
<section id="general-modules---box" class="level4">
<h4 class="anchored" data-anchor-id="general-modules---box">General modules - [box/*]</h4>
<p>These contain functionality which is useful across multiple projects. For example, we often need to work with our AWS Redshift data warehouse - so we have a general module called [box/redshift], which contains utility functions that make it easier to connect to &amp; work with the data warehouse. We develop these modules in their own repo, and include them within other projects via a git submodule - I promise that’s not as scary as it sounds, bear with me!</p>
</section>
<section id="project-modules---prj" class="level4">
<h4 class="anchored" data-anchor-id="project-modules---prj">Project modules - [prj/*]</h4>
<p>These are used within a single project, and are unique to that project’s context. For example, a [prj/data] module might contain functions to fetch project-specific data from various places, and then a [prj/plots] module might contain functions to create certain project-specific graphs using that data. If anything ends up being more broadly useful, it might be “promoted” into a general module.</p>
</section>
<section id="local-modules---." class="level4">
<h4 class="anchored" data-anchor-id="local-modules---.">Local modules - [./*]</h4>
<p>These are specific to the context of a particular set of files. They can be useful for keeping interdependent code neatly organised within a directory: code can be split into multiple files, with a “declaration of dependence” specified at the top of each file (via <code>box::use()</code>) which ensures it’s easy to keep track of what depends on what. These can be handy while actively developing new code, but it’s often worth upgrading local modules to project modules if possible.</p>
</section>
</section>
<section id="automatically-setting-the-box-search-path-for-a-project" class="level2">
<h2 class="anchored" data-anchor-id="automatically-setting-the-box-search-path-for-a-project">Automatically setting the {box} search path for a project</h2>
<p>{box} finds modules by following a “search path”, which we can set in one of the following ways:</p>
<ul>
<li><code>options("box.path")</code> - a vector of paths where modules can be found; like <code>.libPaths()</code> for R packages</li>
<li><code>R_BOX_PATH</code> environment variable - a single string; like <code>$PATH</code> for system commands</li>
</ul>
<p>(There’s more info about this in the <a href="https://klmr.me/box/reference/use.html?q=path#search-path">package docs</a>.)</p>
<p>Let’s assume that we’re working on a project which lives in its own folder. In our case, each of our team’s projects lives in its own git repo, and we work with those via <a href="https://support.posit.co/hc/en-us/articles/200526207-Using-RStudio-Projects">RStudio projects</a>.</p>
<p>Then we can use the project’s <a href="https://support.posit.co/hc/en-us/articles/360047157094-Managing-R-with-Rprofile-Renviron-Rprofile-site-Renviron-site-rsession-conf-and-repos-conf"><code>.Rprofile</code> file</a> to set the {box} search path when we start an R session in that directory (e.g.&nbsp;by opening the associated RStudio project).</p>
</section>
<section id="bringing-it-all-together" class="level2">
<h2 class="anchored" data-anchor-id="bringing-it-all-together">Bringing it all together</h2>
<p>So with all of that in mind, here’s the general approach we follow for setting up a new project which will use {box} modules:</p>
<ol type="1">
<li><p>In the project repo where you would like to use modules, create a subdirectory to store them, e.g.&nbsp;<code>src/R/</code>:</p>
<pre><code> $ # From the project's root directory
 $ mkdir -p src/R/</code></pre></li>
<li><p>Add your “general modules” repo as a git submodule, in a <code>box/</code> directory within that new subdirectory:</p>
<pre><code> $ git submodule add [general modules repo's URL] src/R/box</code></pre></li>
<li><p>Create a <code>prj/</code> directory alongside the <code>box/</code> directory, to store project modules:</p>
<pre><code> $ mkdir src/R/prj/</code></pre></li>
<li><p>Update the project’s <code>.Rprofile</code> file to set the <code>box.path</code> R option, and (optionally) to ensure that the general-modules submodule is updated to the appropriate point in its history when your project is opened:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">local</span>({</span>
<span id="cb4-2">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Local box path</span></span>
<span id="cb4-3">  box_path <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">file.path</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">getwd</span>(), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"src"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"R"</span>)</span>
<span id="cb4-4"></span>
<span id="cb4-5">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Update existing box path (e.g. a path set by Rprofile.site)</span></span>
<span id="cb4-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">options</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"box.path"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(box_path, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">getOption</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"box.path"</span>)))</span>
<span id="cb4-7"></span>
<span id="cb4-8">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Make sure box submodule is pulled in at correct ref</span></span>
<span id="cb4-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">system2</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"git"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"submodule"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"update"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--init"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--recursive"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--"</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">file.path</span>(box_path, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"box"</span>)))</span>
<span id="cb4-10">})</span></code></pre></div></li>
<li><p>If at any point you want to update the submodule to include the latest changes from the general repo, you’ll need to run the following from within your project repo (amend the submodule path if necessary):</p>
<pre><code>$ git submodule update --remote --recursive -- src/R/box</code></pre>
<p>This will update the reference which Git uses to fetch the submodule contents. You’ll need to commit the updated reference to your project repo (i.e.&nbsp;add and commit your <code>src/R/box</code> “directory”, which is actually just a small file containing that reference!).</p></li>
</ol>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Please do borrow, adapt, and improve on these ideas - if you try using this same pattern, or if you come up with any additions/alternatives to it, I’d really love to hear about it!</p>
<p>And if you enjoyed this, I promise I’ve got plenty more {box} content that I could find time to write about…</p>


</section>

 ]]></description>
  <guid>https://owenjonesuob.github.io/posts/2024-04-16-modular-r-code-for-analytical-projects-with-box/</guid>
  <pubDate>Tue, 16 Apr 2024 00:00:00 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2024-04-16-modular-r-code-for-analytical-projects-with-box/box_logo.png" medium="image" type="image/png" height="166" width="144"/>
</item>
<item>
  <title>New blog, who dis?</title>
  <link>https://owenjonesuob.github.io/posts/2024-04-12-new-blog-who-dis/</link>
  <description><![CDATA[ 





<p>Hey folks, it’s been a while!</p>
<p>I did the thing from the meme and, having logged on intending to write a short blog post, ended up moving my entire blog to a new platform.</p>
<p>I have zero regrets about this - the previous handcrafted site was fun to build in the first place (many years ago now…); but I couldn’t face re-learning how to build &amp; deploy with Jekyll <em>againnnn</em> on yet another laptop. So instead, here’s a shiny new <a href="https://quarto.org/">Quarto</a>-built site, tada!!</p>
<p>Particular thanks go to <a href="https://robjhyndman.com/hyndsight/disqus2giscus.html">Rob J Hyndman</a> and <a href="https://masalmon.eu/2019/10/02/disqus/">Maëlle Salmon</a> for their super handy posts about migrating comments from Disqus.</p>
<p>There are probably some rough edges that I’ve missed - dead links, dodgy formatting… please point me towards anything particularly ugly and I’ll get it patched up.</p>
<p>And I promise that more actual gloriously content-filled blog posts <em>will</em> actually happen now. Stay tuned!</p>



 ]]></description>
  <guid>https://owenjonesuob.github.io/posts/2024-04-12-new-blog-who-dis/</guid>
  <pubDate>Fri, 12 Apr 2024 00:00:00 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2024-04-12-new-blog-who-dis/surprised_pikachu.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Multiple Names for Datasets in R Packages</title>
  <link>https://owenjonesuob.github.io/posts/2021-01-30-multiple-names-for-datasets-in-r-packages/</link>
  <description><![CDATA[ 





<blockquote class="blockquote">
<p>“I am known by many names, but you may call me… Tim.” - <strong>Graham Chapman</strong></p>
</blockquote>
<hr>
<p>Last year<sup>1</sup> the <a href="https://github.com/MangoTheCat/mangoTraining">{mangoTraining}</a> package got a fair bit of much-needed TLC, and we discovered a problem which at first glance didn’t seem too tricky to solve, but which ended up leading down a very interesting rabbit hole.</p>
<p>The package is primarily a “data package”, i.e.&nbsp;a package which exists purely to provide datasets to users, and contains nearly 30 datasets of various sizes which are used in Mango’s training courses and referred to in books such as “R in 24 Hours”.</p>
<p>We tend to teach the latest best practices, so our training courses are updated on a regular basis.<sup>2</sup> Unfortunately once a physical book has been released into the wild, it’s not so easy to update it in the same way; so whenever we make changes to our material, we have to be careful not to break backwards compatibility!</p>
<p>This is how we stumbled upon the “multiple names for datasets in R packages” problem. Suppose we have a dataset in {mangoTraining} which was historically called <code>demoData</code>, but we now favour snake_case rather than lowerCamelCase in our recent material: how can we <em>also</em> use the name <code>demo_data</code> to refer to the dataset, so that we can use the new name in our new material without breaking compatibility with existing material?</p>
<p>And since we generally want to keep packages as small as possible<sup>3</sup>: can we do this without including multiple copies of the same dataset in the package?</p>
<p>This allows us to set out three requirements which cover what we’re trying to achieve:</p>
<ol type="1">
<li>The package must contain only a single copy of the full dataset</li>
<li>The dataset must be accessible using at least two different names</li>
<li>Each name must work correctly with <code>data()</code>, i.e.&nbsp;<code>data("x", package = "pkg")</code> must load an object called <code>x</code> into the session</li>
</ol>
<section id="adding-more-data-files" class="level2">
<h2 class="anchored" data-anchor-id="adding-more-data-files">Adding more data files</h2>
<p>I’m going to start by creating a new package, and then and immediately adding a dataset which I would like to include - which is incredibly simple these days, thanks to the marvellous <a href="https://github.com/r-lib/usethis">{usethis} package</a>!</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"> usethis<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">create_tidy_package</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"datapkg"</span>)</span>
<span id="cb1-2"> </span>
<span id="cb1-3"> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ... and then once the new session has opened:</span></span>
<span id="cb1-4"> diamonds <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"diamonds"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">package =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ggplot2"</span>)</span>
<span id="cb1-5"> usethis<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">use_data</span>(diamonds)</span></code></pre></div>
<p>Following this, we can see that our dataset has been saved into the <code>data/</code> directory as a <code>.rda</code> file<sup>4</sup>, meaning our users can load this dataset into their session using <code>data("diamonds", package = "datapkg")</code>.</p>
<p>The name of the file has been created, quite sensibly, from the name of the R object we saved into it. Renaming the file isn’t a good idea, because the object it contains will still have the old name! For example, if we manually renamed <code>data/diamonds.rda</code> to <code>data/diamantes.rda</code> and rebuilt/reinstalled our package, then if we ran</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"diamantes"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">package =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"datapkg"</span>)</span></code></pre></div>
<p>we <em>would</em> get our data loaded into our session; BUT it would still be in an object called <code>diamonds</code>! This is because <code>.rda</code> files store an entire R environment, possibly containing multiple objects: when we load that environment into our session, all the objects are just dumped into the session, exactly as they were when they were saved.<sup>5</sup></p>
<p>So if we want a different name for our dataset, we actually need to rename the object itself before saving it:</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">diamantes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> diamonds</span>
<span id="cb3-2">usethis<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">use_data</span>(diamantes)</span></code></pre></div>
<p>This is all useful context, but we haven’t actually satisfied our first requirement yet! Our users <em>can</em> now get either <code>diamonds</code> or <code>diamantes</code> from our package; but that’s because the package contains the same dataset twice, in two separate <code>.rda</code> files (<code>diamonds.rda</code> and <code>diamantes.rda</code>). What we would ideally like to do is to have multiple names pointing towards the same underlying dataset, so that we only have to have one copy of that dataset in our package but it can be called in multiple ways.</p>
</section>
<section id="multiple-names-for-functions" class="level2">
<h2 class="anchored" data-anchor-id="multiple-names-for-functions">Multiple names for functions</h2>
<p>It’s really easy to do something along those lines with functions, because we can store a function in a variable and then just reassign that variable to our heart’s content.<sup>6</sup></p>
<p>To prove the point:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">f <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(x, y) x<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>y</span>
<span id="cb4-2">g <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> f</span>
<span id="cb4-3">g</span></code></pre></div>
<pre class="rconsole"><code>function(x, y) x+y</code></pre>
<p>This can be really useful when you want to implement a piece of functionality in just one place, but then to allow the user to access the same functionality via more than one name. Here’s an example from {tibble}: the “type check” function for tibble objects is named <code>is_tibble()</code>, in line with tidyverse naming conventions; but the authors also provide an alias, <code>is.tibble()</code>, which matches base R naming conventions (<code>is.numeric()</code>, <code>is.data.frame()</code> etc) in anticipation of users trying that pattern first.</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">is.tibble <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">function</span>(x) {</span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">deprecate_warn</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"2.0.0"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"is.tibble()"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"is_tibble()"</span>)</span>
<span id="cb6-3"></span>
<span id="cb6-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is_tibble</span>(x)</span>
<span id="cb6-5">}</span></code></pre></div>
<p>You can see this in the context of the source code <a href="https://github.com/tidyverse/tibble/blob/dd29fb76b6b0335a08658c14483fe3cbb81cf7d7/R/tibble.R#L196">here</a>. If a user calls <code>is.tibble()</code>, the responsibility is passed straight on to <code>is_tibble()</code> after a nudge towards the “preferred” tidyverse syntax.</p>
</section>
<section id="multiple-names-for-datasets" class="level2">
<h2 class="anchored" data-anchor-id="multiple-names-for-datasets">Multiple names for datasets?</h2>
<p>Let’s review again the key points we would like to achieve:</p>
<ol type="1">
<li>The package must contain only a single copy of the full dataset</li>
<li>The dataset must be accessible using at least two different names</li>
<li>Each name must work correctly with <code>data()</code>, i.e.&nbsp;<code>data("x", package = "pkg")</code> must load an object called <code>x</code> into the session</li>
</ol>
<p>That third point is quite important for the usability of the package. In fact, if we spend some time thinking about the third point here, we actually get a big push in the right direction!</p>
<p>From the Details section of the documentation for <code>data()</code>:</p>
<blockquote class="blockquote">
<p>Currently, four formats of data files are supported:</p>
<ol type="1">
<li><p>files ending ‘.R’ or ‘.r’ are <code>source()</code>d in, with the R working directory changed temporarily to the directory containing the respective file. (<code>data</code> ensures that the <strong>utils</strong> package is attached, in case it had been run <em>via</em> <code>utils::data.</code>)</p></li>
<li><p>files ending ‘.RData’ or ‘.rda’ are <code>load()</code>ed. …</p></li>
</ol>
</blockquote>
<p>We’re familiar with the second format, <code>.rda</code>, but maybe we didn’t know about the first! So it looks like we might be able to create a <code>.R</code> file which somehow loads the dataset which we have already saved elsewhere…</p>
<p>Let’s make a file called <code>data/diamantes.R</code>, which - as we’ve just learned! - will be run using <code>source()</code> if our user calls <code>data("diamantes", package = "datapkg")</code>.</p>
<p>Now all we have to do is figure out how to “copy” our <code>diamonds</code> dataset into an object called <code>diamantes</code>.</p>
<p>Let’s naively try a similar approach to the one we’ve seen used for functions. I’ll add the following line to <code>data/diamantes.R</code>:</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">diamantes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> diamonds</span></code></pre></div>
<p>But attempting to build the package quickly results in a nasty error…</p>
<pre class="rconsole"><code>==&gt; Rcmd.exe INSTALL --no-multiarch --with-keep.source datapkg

* installing to library 'C:/.../R/win-library/4.0'
* installing *source* package 'datapkg' ...
** using staged installation
** R
** data
*** moving datasets to lazyload DB
** byte-compile and prepare package for lazy loading
Error in eval(exprs[i], envir) : object 'diamonds' not found
Error: unable to load R code in package 'datapkg'
Execution halted
ERROR: lazy loading failed for package 'datapkg'
* removing 'C:/.../R/win-library/4.0/datapkg'
* restoring previous 'C:/.../R/win-library/4.0/datapkg'

Exited with status 1.</code></pre>
<p>Note the <code>object 'diamonds' not found</code>!</p>
<p>This is because datasets aren’t like other R objects: as <a href="https://r-pkgs.org/data.html#documenting-data">r-pkgs</a> puts it,</p>
<blockquote class="blockquote">
<p>Objects in data/ are always effectively exported (<strong>they use a slightly different mechanism than NAMESPACE but the details are not important</strong>).</p>
</blockquote>
<p>That “slightly different mechanism” is our problem - we can’t simply refer to datasets as internal objects within our package! So we’ll have to try a different approach…</p>
</section>
<section id="lets-read-that-again" class="level2">
<h2 class="anchored" data-anchor-id="lets-read-that-again">Let’s read that again</h2>
<p>Remember what the documentation for <code>data()</code> said? (We only looked at it a minute ago!)</p>
<p>We’ve started to take advantage of</p>
<blockquote class="blockquote">
<p>1. files ending ‘.R’ or ‘.r’ are <code>source()</code>d in, with the R working directory changed temporarily to the directory containing the respective file</p>
</blockquote>
<p>already - and now</p>
<blockquote class="blockquote">
<p>2. files ending ‘.RData’ or ‘.rda’ are <code>load()</code>ed</p>
</blockquote>
<p>is also going to be helpful, for getting hold of our already-saved data!</p>
<p>Let’s edit <code>data/diamantes.R</code> so that it contains just the following line:</p>
<div class="sourceCode" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">load</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"diamonds.rda"</span>)</span></code></pre></div>
<p>Note that we are using a relative path to <code>diamonds.rda</code> because, as informed by the docs, our working directory is now the directory where <code>data/diamantes.R</code> lives, i.e.&nbsp;<code>data/</code>!</p>
<p>Now our package <em>does</em> build and install, but we do get an ominous warning in the output…</p>
<pre class="rconsole"><code>[...]
** data
*** moving datasets to lazyload DB
Warning: object 'diamonds' is created by more than one data call
** byte-compile and prepare package for lazy loading
[...]</code></pre>
<p>… which makes sense. When we call <code>data("diamantes", package = "datapkg")</code>, we simply end up calling the same thing as <code>data("diamonds", package = "datapkg")</code>, so we end up with an object called <code>diamonds</code> in our session rather than <code>diamantes</code>. We’re closer, but we’re not there yet!</p>
<p>Maybe we can rearrange <code>data/diamantes.R</code> slightly to rename things for us…</p>
<div class="sourceCode" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">load</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"diamonds.rda"</span>)</span>
<span id="cb11-2">diamantes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> diamonds</span></code></pre></div>
<p>This seems very close. We get the same warning about <code>diamonds</code> when we rebuild the package, but now when we call <code>data("diamantes", package = "datapkg")</code> we <em>do</em> get an object called <code>diamantes</code>… we just <em>also</em> get one called <code>diamonds</code>! This is because when we source <code>data/diamantes.R</code>, we end up with two objects in the environment at the end of the script (<code>diamonds</code> and <code>diamantes</code>), both of which are then pulled into our R session.</p>
<p>So we can add one more line to fix this problem:</p>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">load</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"diamonds.rda"</span>)</span>
<span id="cb12-2">diamantes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> diamonds</span>
<span id="cb12-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rm</span>(diamonds)</span></code></pre></div>
<p>And now we have achieved our goal! No more warning message when we build, and both <code>diamonds</code> and <code>diamantes</code> work in the way we wanted.</p>
</section>
<section id="now-do-it-in-one-line" class="level2">
<h2 class="anchored" data-anchor-id="now-do-it-in-one-line">Now do it in one line</h2>
<p>Three lines was too many for you?? Okay - we can replace the current contents of <code>data/diamantes.R</code> with:</p>
<div class="sourceCode" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">diamantes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">local</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">get</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">load</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"diamonds.rda"</span>)))</span></code></pre></div>
<p>Working from the inside out:</p>
<ul>
<li><code>load("diamonds.rda")</code> loads <code>diamonds</code> into our environment, and returns a vector of names of all loaded objects, i.e.&nbsp;<code>c("diamonds")</code></li>
<li><code>get()</code> retrieves the object with a name of <code>"diamonds"</code> from the <em>current</em> environment, since we didn’t provide a different environment via the <code>pos</code> argument - i.e.&nbsp;we now have the actual data frame which the <code>diamonds</code> variable name refers to</li>
<li><code>local()</code> means all of that happened in its own little throwaway environment - so we end up with the data frame object which was returned from <code>get()</code>, and everything else is just thrown away, including the <code>diamonds</code> object which had been created by <code>load()</code></li>
<li>And finally, we assign that data frame into an object called <code>diamantes</code>, which is the only object we created in our main environment and therefore the only object which will be created when we call <code>data("diamantes", package = "datapkg")</code></li>
</ul>
</section>
<section id="documentation" class="level2">
<h2 class="anchored" data-anchor-id="documentation">Documentation</h2>
<p>Of course, it’s important to document our datasets - again we can refer to the relevant chapter of the ever-so-useful <a href="https://r-pkgs.org/data.html">r-pkgs</a> for guidance! The documentation should live in <code>R/data.R</code>: we only have to write one set of documentation, and then we can use the <code>@rdname</code> Roxygen tag to include the other names!</p>
<div class="sourceCode" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#' Prices of 50,000 round cut diamonds.</span></span>
<span id="cb14-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#'</span></span>
<span id="cb14-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#' A dataset containing the prices and other attributes of almost 54,000</span></span>
<span id="cb14-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#' diamonds.</span></span>
<span id="cb14-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#'</span></span>
<span id="cb14-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#' @format A data frame with 53940 rows and 10 variables:</span></span>
<span id="cb14-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#' \describe{</span></span>
<span id="cb14-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#'   \item{price}{price, in US dollars}</span></span>
<span id="cb14-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#'   \item{carat}{weight of the diamond, in carats}</span></span>
<span id="cb14-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#'   ...</span></span>
<span id="cb14-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#' }</span></span>
<span id="cb14-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#' @source \url{http://www.diamondse.info/}</span></span>
<span id="cb14-13"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"diamonds"</span></span>
<span id="cb14-14"></span>
<span id="cb14-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#' @rdname diamonds</span></span>
<span id="cb14-16"><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"diamantes"</span></span></code></pre></div>
</section>
<section id="epilogue" class="level2">
<h2 class="anchored" data-anchor-id="epilogue">Epilogue</h2>
<p>So far I’ve noticed <strong>two</strong> important things to bear in mind when using this approach:</p>
<ul>
<li>We don’t have to stop at two names - if we want to, we can keep making new <code>data/*.R</code> files which point back to the same <code>.rda</code> file! HOWEVER, we shouldn’t have two <em>files</em> with names which differ only in capitalisation, e.g.&nbsp;<code>diamantes.R</code> and <code>DiaMantes.R</code> - this is not possible on Windows, and not a great idea on other platforms! (In this particular case, we could have <code>diamantes.rda</code> with <code>diamonds.R</code> and <code>DiaMantes.R</code> instead)</li>
<li>If you build your package using the <code>--resave-data</code> flag, any <code>data/*.R</code> files will be sourced and resaved as <code>.rda</code> files as part of the build process, rendering all your hard work useless!<sup>7</sup></li>
</ul>
<p>I’d be keen to hear whether anyone else has success with this method too, or if there are better ways to achieve the same thing! We seemed to make it through the CRAN submission process for {mangoTraining} with no problems at all; but I’m curious as to how reproducible this is. In particular I would love to know whether the CRAN builds use <code>--resave-data</code> or not, and whether that would scupper this method for packages where resaving takes us over the package size limit!</p>
<hr>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Yes, it’s taken me nearly a year to write up this post. Please forgive me, I’ve been very busy surviving.↩︎</p></li>
<li id="fn2"><p>Keeping content up to date can be quite a lot of work in itself! So in fact it was only quite recently that we committed 100% to following <a href="https://style.tidyverse.org/">the tidyverse style guide</a> wherever possible.↩︎</p></li>
<li id="fn3"><p>While keeping packages small is a good idea anyway (especially if you’re using version control!), an extra motivating factor here is the 5MB upload limit for CRAN packages as detailed on the <a href="https://cran.r-project.org/web/packages/policies.html">CRAN policies page</a>. You can imagine a situation where we want to use 2 different names for a 3MB dataset!↩︎</p></li>
<li id="fn4"><p>As we would expect from {usethis}, this completely aligns with the rules and conventions on saving datasets within R packages, set out in <a href="https://r-pkgs.org/data.html">r-pkgs</a> and elsewhere.↩︎</p></li>
<li id="fn5"><p>It took me a REALLY long time to get my head around this at first - has anyone else had an experience like trying to run <code>diamantes &lt;- data("diamonds")</code>, and then getting really frustrated when <code>diamantes</code> is not the data frame you were expecting? I found that so unintuitive. Actually nowadays when I need to save a single R object, I tend to use <code>.rds</code> rather than <code>.rda</code> for exactly that reason. However, <code>.rda</code> is the convention for R packages, so we’ll stick with it… grrrr…↩︎</p></li>
<li id="fn6"><p>This is because functions in R are “first-class objects”, i.e.&nbsp;you can give them a name, save them in variables, pass them into other functions as parameters… I took this for granted until recently, when I found out that you <em>can’t</em> do this so easily in many languages - for example, Java!↩︎</p></li>
<li id="fn7"><p>And possibly resulting in two identically-named files, if you had e.g.&nbsp;<code>hello.rda</code> and <code>HeLLO.R</code>.↩︎</p></li>
</ol>
</section></div> ]]></description>
  <category>r</category>
  <category>package</category>
  <category>data</category>
  <guid>https://owenjonesuob.github.io/posts/2021-01-30-multiple-names-for-datasets-in-r-packages/</guid>
  <pubDate>Sat, 30 Jan 2021 15:00:00 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2021-01-30-multiple-names-for-datasets-in-r-packages/spiderman.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Debugging: Installing NVIDIA Drivers on Fedora</title>
  <link>https://owenjonesuob.github.io/posts/2019-06-13-nvidia-drivers-on-fedora/</link>
  <description><![CDATA[ 





<p><strong>TL;DR:</strong> I had mega issues with getting NVIDIA graphics to work on Fedora. This is a play-by-play of my debugging process, and ultimately the solution turned out to be rather simple.</p>
<hr>
<section id="context" class="level2">
<h2 class="anchored" data-anchor-id="context">Context</h2>
<p>Sometime last year my company decided to upgrade its IT assets, and consequently sold off a bunch of old laptops to interested employees.</p>
<p>I had been toying with the idea of getting a spare laptop anyway in order to play around with a Linux-based operating system, so this was the perfect opportunity. I managed to nab myself a chunky old Dell Latitude and, much to the frustration of my friend in IT who had spent the afternoon setting up a fresh Windows installation for me, asked him to borrow a USB stick and then immediately wiped the hard drive so that I could install Fedora.</p>
<p>Immediately, however, karma struck. I was attempting to use Fedora Media Writer to install the OS onto the laptop; but every time I successfully booted to the installation GUI, the laptop would freeze completely and I’d have to turn it off via the power button.</p>
<p>Eventually I succeeded by means of the installer’s “basic graphics mode”. However, after rebooting, it became clear that this had come with a catch: my screen was now stuck at a low resolution. Of course, I wanted to take advantage of all 1080 of my available p’s, so set about looking for the issue.</p>
<p>Bear in mind that this was more or less my first experience with a Linux OS. I knew how to do simple command line things, but I didn’t really know how Linux was set up, or how to change boot parameters, or what on earth a GRUB was, or any of those other fun low-level system things. So after a LOT of searching and reading, I eventually discovered the <code>/etc/default/grub</code> file and the <code>nomodeset</code> boot parameter. “Hah, problem solved!” I exclaimed, exterminating <code>nomodeset</code> from wherever it appeared. I rebooted the laptop: it froze immediately.</p>
<p>By this time I’d had enough for one day, so I shut the lid and forgot about it.</p>
<hr>
</section>
<section id="diagnosis-and-solution" class="level2">
<h2 class="anchored" data-anchor-id="diagnosis-and-solution">Diagnosis and solution</h2>
<p>Fast-forward an ENTIRE YEAR and finally, I had the time and inclination to take another look at the problem. For good measure, I decided to start with a fresh installation of the latest version the OS, Fedora 30.</p>
<p>Once again I had to run the installer in “basic graphics” mode, and so I was faced with lower-than-ideal screen resolution.</p>
<p>I started by upgrading the OS with a <code>sudo dnf update</code>, which took a while, as expected.</p>
<p>Then I spent several days trying ALL SORTS of fixes and tweaks and changes that I found on the internet. The laptop contains a NVIDIA graphics card, and apparently there are a <em>whooooole</em> load of issues with using Fedora and GNOME display manager (Fedora’s default graphical system) on NVIDIA hardware. I added repositories and installed drivers. I changed boot parameters. I modified configuration files. I added things to blacklists, and removed things from blacklists, and installed different display managers, and regenerated initramfs, and banged on the desk while laughing hysterically, and all sorts of other weird and wonderful things; but all to no avail.</p>
<p>On the plus side, I was learning a <em>lot</em> about Linux. I learned about virtual terminals when I accidentally disabled GDM and ended up with a bootscreen which perpetually flashed “Starting GNOME display manager”. I discovered the GRUB boot menu, and runlevels when I got fed up with trying to type my password letter by letter whenever the bootscreen flashed up for half a second at a time.</p>
<p>Eventually I ended up wiping and reinstalling the OS one more time, and then sat down with a cup of tea in front of a runlevel-3 command line, determined to get to the bottom of the issue once and for all, with logic and patience.</p>
<p>First things first: make sure the NVIDIA graphics are actually being used, right? So I checked the list of loaded modules for anything containing “nvidia”:</p>
<pre><code>lsmod | grep nvidia</code></pre>
<p>Oh. Nothing came back from that.</p>
<p>Ah yes, I thought. Duh. I’ll need to install the NVIDIA drivers.</p>
<p>There seem to be a couple of choices for where to get those drivers, but the repository which seemed to come up most often was RPM Fusion. So first we add the repo, then we install the driver according to the instructions on their website (https://rpmfusion.org/Howto/NVIDIA):</p>
<pre><code>sudo dnf install https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm

sudo dnf install xorg-x11-drv-nvidia akmod-nvidia</code></pre>
<p>Cool. Reboot and try again.</p>
<pre><code>lsmod | grep nvidia</code></pre>
<p>Nothing, nada, zilch. I double-checked that the NVIDIA driver had installed:</p>
<pre><code>modinfo nvidia</code></pre>
<p>That gave me a bunch of info, so the NVIDIA driver was definitely available… so if not NVIDIA, what <em>was</em> being used for graphics?</p>
<p>I remembered reading something about the fallback graphics system, which would be used if the desired system failed to load properly. Suspecting that this might be the case, I made sure:</p>
<pre><code>lsmod | grep nouveau</code></pre>
<p>This time I got several lines of output! So the problem wasn’t that the NVIDIA graphics module was misbehaving, but rather that it wasn’t loading at all.</p>
<p>This was progress! Cue a lot more playing around with boot parameters etc…</p>
<p>Eventually I realised that I could just force the system to load the NVIDIA module right there and then, using the <code>modprobe</code> command:</p>
<pre><code>modprobe nvidia
## modprobe: ERROR: could not insert 'nvidia': no such device</code></pre>
<p>Wait. No no no wait, what?! But <code>modinfo</code> said that oh you I just aaaaaaaaaaaaaaaaaaAAAAAAAAAAAAAAAAAAAA (┛✧Д✧)┛彡┻━┻</p>
<p>One quick cuppa later, gathered and composed, I tried again and asked for a little bit more information:</p>
<pre><code>modprobe nvidia -v</code></pre>
<p>I had also recently come across <code>dmesg</code> for displaying kernel messages, so thought I’d try that out too…</p>
<pre><code>dmesg | less</code></pre>
<p>Ah. Some wild NVIDIAs appeared pretty near the bottom of that output… let’s have a closer look…</p>
<pre><code>## NVRM: The NVIDIA NVS4200M GPU installed in this system is
## NVRM:  supported through the NVIDIA 390.xx Legacy drivers. Please
## NVRM:  visit http://www.nvidia.com/object/unix.html for more
## NVRM:  information.  The 430.14 NVIDIA driver will ignore
## NVRM:  this GPU.  Continuing probe...
## NVRM: No NVIDIA graphics adapter found!</code></pre>
<p>Oh oh oh oh oh oh oh oh oh oh oh oh oh OH.</p>
<p>So if I just…</p>
<pre><code>sudo dnf remove xorg-x11-drv-nvidia</code></pre>
<p>… and then…</p>
<pre><code>dnf list --repo rpmfusion-nonfree | grep nvidia | grep 390</code></pre>
<p>… and then…</p>
<pre><code>sudo dnf install xorg-x11-drv-nvidia-390xx</code></pre>
<p>One reboot later, and EVERYTHING WAS FINE. Everything. No freezing. No digging around in boot config files. And it’s been fine ever since. It’s like nothing ever happened.</p>
<hr>
</section>
<section id="review" class="level2">
<h2 class="anchored" data-anchor-id="review">Review</h2>
<p>Really this was all just rather frustrating at the time. I will freely admit that on more than one occasion during this saga I loudly exclaimed “I hate computers” to the little stuffed toy cat that sits on my desk. I say that quite often, as friends and colleagues will testify, and I stand by it. I really do hate them with a burning passion.</p>
<p>However, if there’s one thing I hate more than computers, it’s giving up on something once I’ve gotten my teeth into it. Even in the depths of despair, I could recognise that I was at least learning a lot of potentially useful information; and ultimately, that was enough to keep me going until I eventually hit that <code>dmesg</code> breakthrough.</p>
<p>I suppose it was a valuable experience, maybe, perhaps, in some ways. Maybe. Anyway, I figured it was worth writing about in case anyone is having similar issues, or in case anyone wanted to read a heartwarming story about courage in the face of adversity or something.</p>


</section>

 ]]></description>
  <category>linux</category>
  <category>fedora</category>
  <category>nvidia</category>
  <category>debugging</category>
  <guid>https://owenjonesuob.github.io/posts/2019-06-13-nvidia-drivers-on-fedora/</guid>
  <pubDate>Thu, 13 Jun 2019 11:00:00 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2019-06-13-nvidia-drivers-on-fedora/fedora_nvidia.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>AFK, back in 2 months</title>
  <link>https://owenjonesuob.github.io/posts/2018-09-29-afk-back-in-2-months/</link>
  <description><![CDATA[ 





<p>A year before I sat down here and started writing this sentence, I was about three months into a year-long work placement at <a href="https://mango-solutions.co.uk">Mango</a>. I loved what I was doing, I loved the people I was doing it with, and I was generally having a great time.</p>
<p>But at some point last spring, people started to ask me when I was leaving. I couldn’t tell whether it was because they knew that at some point I’d have to go back to university to complete my course, or because they’d had enough of me already and wanted me to go away. Either way, whenever I mentioned that I was thinking about taking advantage of what will probably be the last long summer holiday of my life, everyone told me the same thing: I’d be a fool not to.</p>
<p>Therefore after months of meticulous planning, early one mid-July morning myself and a friend - summoning as much 18th-century spirit as possible - set off to complete a Grand Tour of the continent.</p>
<p>Over the course of 55 days, we visited 22 countries, we covered over 6000 miles of European highway, and due to the fact that I was very busy being on holiday, I wrote precisely 0 lines of code.</p>
<p>So I’m not writing about some cool project I’ve done, or some amazing new tech I’ve been researching, or really anything at all to do with code or a computer. Sorry. I suppose this piece should really be called “some things I learned which definitely have completely nothing at all to do with my job”.</p>
<section id="some-things-i-learned-which-definitely-have-completely-nothing-at-all-to-do-with-my-job" class="level2">
<h2 class="anchored" data-anchor-id="some-things-i-learned-which-definitely-have-completely-nothing-at-all-to-do-with-my-job">Some things I learned which definitely have completely nothing at all to do with my job</h2>
<section id="head-for-high-ground" class="level3">
<h3 class="anchored" data-anchor-id="head-for-high-ground">1. Head for high ground</h3>
<p>This is probably what you learn on day one in Army Commander School.</p>
<p>You’re in charge. The furious battle is raging on all sides. Suddenly, you realise that you are in serious danger of being completely overwhelmed. This is a good time to employ a tactic commonly referred to as “running away”.</p>
<p>But if this is a battle you want (or need!) to win, it’s probably not a good idea to run away forever. Your opponent isn’t going to hang around for a while wondering where you’ve gone, and then just decide “actually, yeah, fair enough, we lost, never mind”.</p>
<p>Instead, you should run away to somewhere nearby, but as high up as possible. This gives you a chance to widen your view: you can see where you’ve been, where you want to go, what’s going on right now, and how those three things relate to each other. After assessing the situation from this elevated position, it is much easier to see what needs to be done and to refocus your efforts accordingly.</p>
<p>If you want to be a top-level Army Commander one day, you can learn more from this. On your next conquest (or, in my case, unfamiliar city) find that high ground and go on a quick reconnaissance mission as early as possible: identify your goals, think about the best way to get to them, and scan the horizon for any threats (or scary grey clouds) which might be on their way towards you.</p>
<p><img src="https://owenjonesuob.github.io/posts/2018-09-29-afk-back-in-2-months/high_ground.png" class="img-fluid"> <em>Once you have the high ground, it’s over</em></p>
</section>
<section id="record-what-youve-done" class="level3">
<h3 class="anchored" data-anchor-id="record-what-youve-done">2. Record what you’ve done</h3>
<p>On the whole, we humans are pretty smart. We’re good at figuring out how to do stuff, and once we’ve figured out what to do, we’re good at actually <em>doing</em> it.</p>
<p>Having said that, the same is true of other primates. And crows. And dolphins. And beavers. And so on, and so on.</p>
<p>The reason why we are <em>smarter</em> is that we have an awesome thing called “language”. Language lets us share our ideas and our experiences with other humans, so that they don’t have to come up with the same ideas or go through the same experiences in order to have the same knowledge.</p>
<p>Even better: at some point a few thousand years ago, someone figured out how to convert language into something physical. As a result, those of us who are alive right now have access to virtually all the knowledge developed by all of humankind since that point.</p>
<p>SO WHY YOU NO USE IT? Write down everything! Write down what you’ve done, and how you’ve done it, and <em>why</em> you’ve done it, and why you’ve done it like <em>that</em>, and everything that went wrong before you got it right, and everything you think it could lead to.</p>
<p>Do it for yourself, in anticipation of the moment when in six months’ time you realise you’ve forgotten where you were or who you were with or what the name of that street was.</p>
<p>Do it for other people, so that they don’t have to drive round eastern Prague four times trying to find the car park which was marked in the wrong place on the map.</p>
<p>Do it for the people who will stumble across your hastily scrawled notes years from now and, with a sudden flash of inspiration, will use them as the foundation to build myriad new and wonderful things.</p>
<p><img src="https://owenjonesuob.github.io/posts/2018-09-29-afk-back-in-2-months/log.png" class="img-fluid"> <em>My memory is terrible, but I wrote down all the embarrassing stories so that they’ll never be forgotten</em></p>
</section>
<section id="respect-experience" class="level3">
<h3 class="anchored" data-anchor-id="respect-experience">3. Respect experience</h3>
<p>Asking questions is a really really good thing to do. It’s one of the best ways to learn about things and you should never be afraid to ask about something you don’t understand.</p>
<p>However, it’s important to remember one thing: “always ask” is not the same as “always ask right now”.</p>
<p>If someone with more experience than you tells you to do something, and if you know that there is almost certainly a good reason, then even if you don’t know what that reason is… you should probably do the thing.</p>
<p>Wait until the pressure has eased a bit before demanding an explanation. You <em>should</em> still ask for one, but perhaps when everyone’s a little bit less stressed.</p>
</section>
<section id="call-a-spade-a-spade" class="level3">
<h3 class="anchored" data-anchor-id="call-a-spade-a-spade">4. Call a spade a spade</h3>
<p>Names can be controversial.</p>
<p>Pavement or sidewalk? Biscuit or cookie? Dinner or tea or supper? Bun or bap or roll? GIF or GIF?</p>
<p>But there are some names that virtually everyone agrees on. In particular, this tends to happen if it is <em>important</em> that everyone agrees on the name.</p>
<p>For example, “police” is an important concept: it represents protection, order, assistance, and a bunch of other useful words. Pretty much all European languages have almost exactly the same spelling and pronunciation for “police” as English does.</p>
<p><img src="https://owenjonesuob.github.io/posts/2018-09-29-afk-back-in-2-months/police.png" class="img-fluid"> <em>How to say “police” in the 18 different European languages which we came across during our trip</em></p>
<p>This means that if you speak any one of these languages, you can travel to any place where they speak any one of the others; and even if you’re in an unfamiliar environment where your understanding is limited, you aren’t completely on your own. If you need help, you can yell “POLICE!”, and someone in a uniform will probably come running.</p>
<p>Unless you’re in Hungary, because Hungarian is very strange.</p>
<p>… actually, someone will come running even in Hungary, because virtually everyone speaks English as a second language. They have to, because very few people choose to learn Hungarian as a second language - it’s only really spoken in Hungary, and as previously mentioned, it really is <em>very</em> strange. Nevertheless, it is the first language of around 13 million people, so there’s a reasonable chance that at some point you’ll need to find a friendly Hungarian to do some translation for you.</p>
<p>I suppose there are two points to take from this little section. Firstly, if you call things by more or less the same name as everyone else does, then this will usually help to improve shared understanding and will aid communication. Secondly, people who can speak multiple languages - and especially less widely-spoken languages - are super super valuable!</p>
</section>
<section id="call-a-spade-a-spade-but-that-doesnt-mean-you-should-assumedemand-that-everyone-else-is-going-to-call-every-single-item-in-their-toolshed-by-exactly-the-same-names-as-you-call-all-the-things-which-you-have-in-your-toolshed" class="level3">
<h3 class="anchored" data-anchor-id="call-a-spade-a-spade-but-that-doesnt-mean-you-should-assumedemand-that-everyone-else-is-going-to-call-every-single-item-in-their-toolshed-by-exactly-the-same-names-as-you-call-all-the-things-which-you-have-in-your-toolshed">5. Call a spade a spade, but that doesn’t mean you should assume/demand that everyone else is going to call every single item in their toolshed by exactly the same names as you call all the things which you have in YOUR toolshed</h3>
<p>Just to add an important caveat to the previous section: sure, it’s helpful if someone speaks the same language as you, and even more exciting if you realise they speak it with the same accent. But once you’ve traded your initial stories, that gets boring quite quickly.</p>
<p>Plus, you’re definitely going to struggle to make new friends if you go around loudly insisting that everyone speaks to you in your language, and getting angry or patronising people if they get something “wrong”. Socialise, compromise, learn.</p>
</section>
<section id="new-is-often-exciting-but-exciting-doesnt-have-to-be-new" class="level3">
<h3 class="anchored" data-anchor-id="new-is-often-exciting-but-exciting-doesnt-have-to-be-new">6. New is often exciting, but exciting doesn’t have to be new</h3>
<p>Humans have been around for a while now, which means we’ve already gone to most places. If you want to go somewhere no-one else has been before then your options are already fairly limited. If you add the complication of getting there in the first place, and the fairly high probability that you won’t find anything particularly interesting there anyway, then it begins to look like a bit of a daunting prospect.</p>
<p>However.</p>
<p>You don’t have to go somewhere no-one else has been before. You can go to the same places and do the same things that someone else has already done, and as long as you’re enjoying yourself, it really doesn’t matter that someone has been there and done it before. There’s always a slightly different route to the next place, or a slightly different angle to view something from, or something to take inspiration from when you’re planning your next adventure.</p>
<p>Maybe one day in the future, you’ll decide that you want a bigger challenge. Then you can dust off your old maps and start thinking about making that expedition out into the middle of nowhere. But there are plenty of other wonderful places to go and things to do first - and honestly, some of those places really are well worth a visit.</p>
<p><img src="https://owenjonesuob.github.io/posts/2018-09-29-afk-back-in-2-months/mermaid.png" class="img-fluid"> <em>If you see an awesome thing that someone else has already done, don’t be afraid to recreate it yourself (or to take photos of your friend recreating it)</em></p>
</section>
<section id="get-out-there-and-do-stuff" class="level3">
<h3 class="anchored" data-anchor-id="get-out-there-and-do-stuff">7. Get out there and do stuff</h3>
<p>There is so much out there.</p>
<p>No really, there is SO MUCH out there.</p>
<p>Go to places. Meet people. Talk to those people, then find more people. Read stuff, write stuff, look at things, show your friends, share opinions, debate stuff, be creative, demand feedback, ask questions, learn things, challenge yourself, pass on your passion, and while you’re busy doing all that never let anyone take away the thing that makes you <em>you</em>.</p>
<p>Go right now and carry on being awesome.</p>
<p><img src="https://owenjonesuob.github.io/posts/2018-09-29-afk-back-in-2-months/thumbs_up.png" class="img-fluid"></p>


</section>
</section>

 ]]></description>
  <category>data science</category>
  <guid>https://owenjonesuob.github.io/posts/2018-09-29-afk-back-in-2-months/</guid>
  <pubDate>Sat, 29 Sep 2018 18:00:00 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2018-09-29-afk-back-in-2-months/feet.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Using RStudio on a Google Cloud Dataproc cluster</title>
  <link>https://owenjonesuob.github.io/posts/2018-05-16-rstudio-on-google-cloud-dataproc/</link>
  <description><![CDATA[ 





<p>A few months ago, I was working on a really cool project with Google.</p>
<p>Without going into too much detail, we were extracting structured information from unstructured text and image data, and then using that new structured information to build a recommender system and some other fun ML stuff.</p>
<p>Anyway, a fairly major aspect of this project was the availability of <a href="https://cloud.google.com">Google Cloud Platform</a> resources. Given that I was expecting to do a lot of heavy image processing, I thought it would be useful to get a Dataproc cluster set up for a bit of extra <em>oomph</em>.</p>
<p>Dataproc uses Spark to manage the underlying cluster, and by default the cluster machines are set up with Python (and PySpark). However, I had already done a bunch of work in R on my own computer, and I was hoping to get going quickly on the cloud cluster without having to translate everything into Python first. Therefore I resolutely decided to get RStudio and sparklyr up and running on my shiny new Dataproc cluster.</p>
<p>Unfortunately… it seemed like nobody had actually done this before!</p>
<p>After a lot of digging, bodging and cussing, I did eventually succeed - and before I was able to feel too bad about spending so long on it (longer than it would have taken to rewrite my work in Python!), our colleague at Google said something along the lines of:</p>
<blockquote class="blockquote">
<p>“Hey, this is pretty cool. Do you think we could write this up properly?”</p>
</blockquote>
<p>Sure, why not! I put together some brief comments and dodgy screenshots; shortly afterwards the project finished, and I promptly forgot any of this had ever happened.</p>
<p>Then a couple of days ago I received an email. The wonderful people at Google have worked their magic and turned my just-functional setup process into a full Cloud Solutions writeup! I am indebted to them for doing so, and you can read it here:</p>
<blockquote class="blockquote">
<p><a href="https://cloud.google.com/solutions/running-rstudio-server-on-a-cloud-dataproc-cluster">Running Rstudio Server on a Cloud Dataproc Cluster</a></p>
</blockquote>



 ]]></description>
  <category>r</category>
  <category>rstudio</category>
  <category>cluster</category>
  <category>google</category>
  <category>cloud</category>
  <category>dataproc</category>
  <category>sparklyr</category>
  <guid>https://owenjonesuob.github.io/posts/2018-05-16-rstudio-on-google-cloud-dataproc/</guid>
  <pubDate>Wed, 16 May 2018 12:00:00 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2018-05-16-rstudio-on-google-cloud-dataproc/dataproc.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Love Machine: Automating the romantic songwriting process</title>
  <link>https://owenjonesuob.github.io/posts/2018-02-14-love-machine/</link>
  <description><![CDATA[ 





<p><strong>Note:</strong> I originally wrote this post for the Mango Solutions blog, and they have kindly allowed me to repost it here alongside the rest of my work. You can find the original post <a href="https://www.mango-solutions.com/blog/love-machine-automating-the-romantic-songwriting-process">here</a>!</p>
<hr>
<blockquote class="blockquote">
<p><em>Songwriting is a very mysterious process. It feels like creating something from nothing. It’s something I don’t feel like I really control.</em></p>
<p><em><strong>– Tracy Chapman</strong></em></p>
</blockquote>
<hr>
<p>It is February. The shortest, coldest, wettest, miserablest month of the British year.</p>
<p>Only two things happen in Britain during February. For a single evening, the people refrain from dipping all their food in batter and deep-frying it, and instead save some time by pouring the batter straight into a frying pan and eating it by itself; and for an entire day, the exchange of modest indications of affection between consenting adults is permitted, although the government advises against significant deviation from the actions specified in the state-issued Approved Romantic Gestures Handbook.</p>
<p>In Section 8.4 (Guidelines for Pre-Marital Communication) the following suggestion is made:</p>
<blockquote class="blockquote">
<p><em>“Written expressions of emotion should be avoided where possible. Should it become absolutely necessary to express emotion in a written format, it should be limited to a ‘popular’ form of romantic lyricism. Examples of such ‘popular’ forms include ‘love poem’ and ‘love song’.</em></p>
</blockquote>
<p>Thankfully, for those who have not achieved at least a master’s degree in a related field, writing a poem or song is a virtually impossible task. And following the sustained and highly successful effort to persuade the British youth that a career in the arts is a fast-track to unemployment, the number of applications to study non-STEM subjects at British universities has been falling consistently since the turn of the decade. This ensures that only the very best and most talented songwriters, producing the most creatively ingenuous work, are able to achieve widespread recognition, and therefore the British public are only exposed to high-quality creative influences.</p>
<p>But to us scientists, the lack of method is disturbing. This “creativity” must have a rational explanation. There must be some pattern.</p>
<p>This is unquestionably a problem which can be solved by machine learning, so let’s take the most obvious approach we can: we’ll train a recurrent neural network to generate song lyrics character by character.</p>
<hr>
<blockquote class="blockquote">
<p><em>You write down a paragraph or two describing several different subjects creating a kind of story ingredients-list, I suppose, and then cut the sentences into four or five-word sections; mix ’em up and reconnect them. You can get some pretty interesting idea combinations like this. You can use them as is or, if you have a craven need to not lose control, bounce off these ideas and write whole new sections.</em></p>
<p><em><strong>– David Bowie</strong></em></p>
</blockquote>
<hr>
<p>To build our neural network I’m going to be using the Keras machine learning interface (which we’re very excited about here at Mango right now - keep an eye out for workshops in the near future!). I’ve largely followed the steps in <a href="https://keras.rstudio.com/articles/examples/lstm_text_generation.html">this example</a> from the Keras for R website, and I’m going to stick to a high-level description of what’s going on, but if you’re the sort of person who would rather dive head-first into the code, don’t feel like you have to hang around here - go ahead and have a play! And if you want to read more about RNNs, <a href="http://karpathy.github.io/2015/05/21/rnn-effectiveness/">this excellent post</a> by Andrej Kaparthy is at least as entertaining and significantly more informative than the one you’re currently reading.</p>
<p>We start by scraping as many love song lyrics as possible from the web - these will form our training material. Here’s the sort of thing we’re talking about:</p>
<p><img src="https://owenjonesuob.github.io/posts/2018-02-14-love-machine/lyr0.png" class="img-fluid"></p>
<p>Well… that’s how they look to us. Actually, after a bit of preprocessing, the computer sees something more like this:</p>
<p><img src="https://owenjonesuob.github.io/posts/2018-02-14-love-machine/lyr1.png" class="img-fluid"></p>
<p>All line breaks are represented by the pair of characters “\n”, and so all the lyrics from all the songs are squashed down into one big long string.</p>
<p>Then we use this string to train the network. We show the network a section of the string, and tell it what comes next.</p>
<p><img src="https://owenjonesuob.github.io/posts/2018-02-14-love-machine/lyr2.png" class="img-fluid"></p>
<p>So the network gradually learns which characters tend to follow a given fixed-length “sentence”. The more of these what-comes-next examples it sees, the better it gets at correctly guessing what should follow any sentence we feed in.</p>
<p>At this point, our network is like a loyal student of a great artist, dutifully copying every brushstroke in minuscule detail and receiving a slap on the wrist and a barked correction every time it slips up. Via this process it appears to have done two things.</p>
<p>Firstly, it seems to have developed an understanding of the “rules” of writing a song. These rules are complex and multi-levelled; the network first had to learn the rules of English spelling and grammar, before it could start to make decisions about when to move to a new line or which rhyming pattern to use.</p>
<p>(Of course, it hasn’t actually “developed an understanding” of these rules. It has no idea what a “word” is, or a “new line”. It just knows that every few characters it should guess <code>" "</code>, and then sometimes it should put in a <code>"\"</code>, and whenever it puts in a <code>"\"</code> then it’s got to follow that up with a <code>"n"</code> and then immediately a capital letter. Easy peasy.)</p>
<p>Secondly, and in exactly the same way, the network will have picked up some of the style of the work it is copying. If we were training it on the songs one specific artist, it would have learned to imitate the style of that particular artist - but we’ve gone one better than that and trained it on all the love songs we could find. So effectively, it’s learned how <em>everyone else</em> writes love songs.</p>
<p>But no-one gets famous by writing songs which have already been written. What we need now is some creativity, some passion, a little bit of <em>je ne sais quoi</em>.</p>
<p>Let’s stop telling our network what comes next. Let’s give it the freedom to write whatever it likes.</p>
<hr>
<blockquote class="blockquote">
<p><em>I don’t think you can ever do your best. Doing your best is a process of trying to do your best.</em></p>
<p><em><strong>– Townes van Zandt</strong></em></p>
</blockquote>
<hr>
<p>It’s interesting to look at the songwriting attempts of the network in the very early stages of training. At first, it is guessing more or less at random what character should come next, so we end up with semi-structured gobbledegook:</p>
<pre><code>fameliawmalYaws. Boflyi, methabeethirts yt
play3mppioty2=ytrnfuunuiYs blllstis
Byyovcecrowth andtpazo's youltpuduc,s Ijd"a]bemob8b&gt;fiume,;Co
Bliovlkfrenuyione (ju'te,'ve ru t Kis
go arLUUs,k'CaufkfR )s'xCvectdvoldes

4So
Avanrvous Ist'dyMe Dolriri</code></pre>
<p>But notice that even in that example, which was taken from a very early training stage, the network has already nailed the “\n” newline combo and has even started to pick up on other consistent structural patterns like closing a “(” with a “)”. Actually, the jumbled nonsense becomes coherent English (or English-esque) ramblings quite quickly.</p>
<p>There is one interesting parameter to adjust when we ask the model to produce some output: the “diversity” parameter, which determines how adventurous the network should be in its choice of character. The higher we set this parameter, the more the network will favour slightly-less-probable characters over the most obvious choice at each point.</p>
<p>If we set the diversity parameter too low, we often degenerate into uncontrolled bursts of la-ing:</p>
<pre><code>la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la
la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la
la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la la
(... lots more "la"s)</code></pre>
<p>But set it too high and the network decides dictionary English is too limiting.</p>
<pre><code>Oh, this younan every, drock on
Scridh's tty'
Is go only ealled
You could have like the one don'm I dope
Love me
And woment while you all that
Was it statiinc. I living you must?
We dirls anythor</code></pre>
<p>It’s difficult to find the write balance between syllabic repetition and progressive vocabulary, and there’s a surprisingly fine line between the two - this will probably prove to be a fruitful area for further academic research.</p>
<p>I think that identifying the optimal diversity parameter is probably the key to good songwriting.</p>
<hr>
<blockquote class="blockquote">
<p><em>Songwriting is like editing. You write down all this stuff - all this bad, stupid stuff - and then you have to get rid of everything except the very best.</em></p>
<p><em><strong>– Juliana Hatfield</strong></em></p>
</blockquote>
<hr>
<p>Here are some particularly “beautiful” passages taken from the great amount of (largely poor) material the model produced. I haven’t done any editing other than to isolate a few consecutive lines at a time and in the last few examples, to start the network off with certain sentences. Wishing you a Happy Valentine’s Day!</p>
<hr>
<pre class="rconsole"><code>
I want to do the trute
I want to do and I don't want it to love you
I want to work around
And the world we can stay the sun
And the sky is a wind a time
I won't never need a love


And I Mister the sunshine that I was to be with you
I need you
I want to wanna learn a river
And I want you to stand in the sun
I need you and I want you and I can stay away


I wonder the stars the stars the smile
And I wonder the ones of my life
I was the litter more
And I was the sun
She too moment we can tell my life
I can't be when I wanted to leave it all
I wonder the light and the stars the sun
And I can still let me love me
I can still let me love me
I want to fall a lover your love
I want to fall in love
I want to see your eyes


I must find a believer to say
But where ain't all about you
I must have to make to meet to leare
I must have to think of you
I would never knows, don't make to love you
That she cry
And I could always find your sunchin' starter
What's enough the hold my way you can stall
A darly love my heart I don't know
And I must have to mean to me
I'm so time now
</code></pre>
<hr>
<pre class="rconsole"><code>
I know your eyes in the morning sun
I feel the name of love
Love is a picked the sun
All my life I can make me wanna be with you
I just give up in your head
And I can stay that you want a life
I've stay the more than I do


How long will I love you
As long as there is that songs
All the things that you want to find you
I could say me true
I want to fall in love with you
I want my life
And you're so sweet
When I see you wanted to that for you
I can see you and thing, baby
I wanna be alone


Oh yeah I tell you somethin'
I think you'll understand
When I say that somethin'
I thought the dartion hyand
I want me way to hear
All the things what you do


Wise men say
Only fools rush in
But I can hear your love
And I don't wanna be alone


If I should stay
I would only be in your head
I wanna know that I hope I see the sun
I want a best there for me too
I just see that I can have beautiful
So hold me to you
</code></pre>



 ]]></description>
  <category>neural network</category>
  <category>r</category>
  <category>keras</category>
  <category>valentines</category>
  <guid>https://owenjonesuob.github.io/posts/2018-02-14-love-machine/</guid>
  <pubDate>Wed, 14 Feb 2018 12:00:00 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2018-02-14-love-machine/microphone.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Scale up your interest: key steps for getting into data science</title>
  <link>https://owenjonesuob.github.io/posts/2018-01-04-scale-up-your-interest/</link>
  <description><![CDATA[ 





<p><strong>Note:</strong> I originally wrote this post for the Mango Solutions blog, and they have kindly allowed me to repost it here alongside the rest of my work. You can find the original post <a href="https://www.mango-solutions.com/blog/scale-up-your-interest-key-steps-for-getting-into-data-science">here</a>!</p>
<hr>
<section id="prelude" class="level3">
<h3 class="anchored" data-anchor-id="prelude">Prelude</h3>
<p>Maybe you’re looking for a change of scene. Maybe you’re looking for your first job. Maybe you’re stuck in conversation with a relative who you haven’t spoken to since last Christmas and who has astonishingly strong opinions on whether cells ought to be merged or not in Excel spreadsheets.</p>
<p>The fact of the matter is that you have just encountered the term “data science” for the first time, and it sounds like it might be interesting but you don’t have a clue what it is. Something to do with computers? Should you bring a lab coat, or a VR headset? Or both? What is a data and how does one science it?</p>
<p>Fear not. I am here to offer subjective, questionable and most importantly <em>FREE</em> advice from the perspective of someone who was in that very position not such a long time ago. Read on at your peril.</p>
<p><img src="https://owenjonesuob.github.io/posts/2018-01-04-scale-up-your-interest/start.png" class="img-fluid"></p>
</section>
<section id="i.-adagio-hear-about-data-science" class="level3">
<h3 class="anchored" data-anchor-id="i.-adagio-hear-about-data-science">I. <em>Adagio</em>: Hear about data science</h3>
<p>This is the hard bit. It’s surprisingly difficult to stumble upon data science unless someone tells you about it.</p>
<p>But the good news is that you’re reading this, so you’ve already done it. Possibly a while ago, or possibly just now; either way, put a big tick next to Step 1. Congratulations!</p>
<p>(By the way, you’ll remember the person who told you about data science. When you grow in confidence yourself, be someone else’s “person who told me about data science”. It’s a great thing to share. But all in good time…)</p>
<p><img src="https://owenjonesuob.github.io/posts/2018-01-04-scale-up-your-interest/adagio.png" class="img-fluid"></p>
</section>
<section id="ii.-andante-find-out-more" class="level3">
<h3 class="anchored" data-anchor-id="ii.-andante-find-out-more">II. <em>Andante</em>: Find out more</h3>
<p>But what actually <em>is</em> data science?</p>
<p>To be honest, it’s a fairly loosely-defined term. There are plenty of articles out there that try to give an overview, but most descend into extended discussions about the <a href="https://www.google.co.uk/search?num=20&amp;q=data+science+unicorns">existence of unicorns</a> or resort to arranging countless combinations of potentially relevant acronyms in <a href="https://www.kdnuggets.com/2016/10/battle-data-science-venn-diagrams.html">hideous indecipherable Venn diagrams</a>.</p>
<p>You’re much better off finding examples of people “doing” data science. Find some blogs (<a href="http://varianceexplained.org/">here</a> <a href="http://www.sumsar.net/">are</a> <a href="http://blog.otoro.net/">a</a> <a href="https://medium.com/@kierisi">few</a> <a href="https://juliasilge.com/blog/">awesome</a> <a href="https://hilarymason.com/blog/">ones</a> <a href="http://www.randalolson.com/blog/">to</a> <a href="http://blog.kaggle.com/">get</a> <a href="https://www.mango-solutions.com/blog/">you</a> <a href="https://github.com/rushter/data-science-blogs">started</a>) and read about what people are up to in the real world.</p>
<p>Don’t be afraid to narrow down and focus on a specific topic that interests you - there’s so much variety out there that you’re bound to find something that inspires you to keep reading and learning. But equally, explore as many new areas as you can, because the more context you can get about the sector the better your understanding will be and you’ll start to see how different subjects and different roles relate to each other.</p>
<p>Believe it or not, one of the best tools for keeping up to date with the latest developments in the field is <a href="https://twitter.com/">Twitter</a>. If you follow all your blog-writing heroes, not only will you be informed whenever they publish a new article but you’ll also get an <a href="https://twitter.com/SwindleApe/status/938025492103524352">invaluable glimpse</a> into their <a href="https://speakerdeck.com/jennybc/workflow-you-should-have-one?slide=5">day-to-day jobs</a> and <a href="https://twitter.com/kierisi/status/940265482162143234">working habits</a>, as well as all the cool industry-related stuff they share. Even if you never tweet anything yourself you’ll be exposed to much more than you’d be able to find on your own. If you want to get involved there’s no need to be original - you could just use it to share content you’ve found interesting yourself.</p>
<p>If you’re super keen, you might even want to get yourself some data science books tackling a particular topic. Keep an eye out for free online/ebook versions too!</p>
<p><img src="https://owenjonesuob.github.io/posts/2018-01-04-scale-up-your-interest/andante.png" class="img-fluid"></p>
</section>
<section id="iii.-allegretto-get-hands-on" class="level3">
<h3 class="anchored" data-anchor-id="iii.-allegretto-get-hands-on">III. <em>Allegretto</em>: Get hands-on</h3>
<p>Observing is great, but it will only get you so far.</p>
<p>Imagine that you’ve just heard about an amazing new thing called “piano”. It sounds great. No, it sounds INCREDIBLE. It’s the sort of thing you really want to be good at.</p>
<p>So you get online and read more about it. Descriptions, analyses, painstaking breakdowns of manual anatomy and contrapuntal textures. You watch videos of people playing pianos, talking about pianos, <a href="https://youtu.be/F92FQdnLlSc?t=35s">setting pianos on fire and hurling them across dark fields</a>. You download reams of free sheet music and maybe even buy a book of pieces you really want to learn.</p>
<p>But at some point… you need to play a piano.</p>
<p>The good news is that with data science, you don’t need to buy a piano, or find somewhere to keep it, or worry about bothering your family/friends/neighbours/pets with your late-night composing sessions.</p>
<p>Online interactive coding tutorials are a great place to start if you want to learn a new programming language. Sites like <a href="https://noamross.github.io/datacamp-sexual-assault/">DataCamp</a> and <a href="https://www.codecademy.com/">Codecademy</a> offer a number of free courses to get yourself started with data science languages like R and Python. If you are feeling brave enough, take the plunge and run things on your own machine! (I’d strongly recommend using R with <a href="https://www.rstudio.com/products/rstudio/">RStudio</a> and using <a href="https://www.anaconda.com/what-is-anaconda/">Anaconda</a> for Python.) Language-specific “native-format” resources such as <a href="">SWIRL</a> for R or <a href="https://github.com/jupyter/jupyter/wiki/A-gallery-of-interesting-Jupyter-Notebooks">this set of Jupyter notebooks</a> for Python are a great way to learn more advanced skills. Take advantage of the exercises in any books you have - don’t just skip them all!</p>
<p>Data science is more than just coding though - it’s all about taking a problem, understanding it, solving it and then communicating those ideas to other people. So Part 1 of my Number One Two-Part Top Tip for you today is:</p>
<blockquote class="blockquote">
<p>1. Pick a project and write about it</p>
</blockquote>
<p>How does one “pick a project”? Well, find something that interests you. For me it was neural networks (and later, car parks…) but it could be literally anything, so long as you’re going to be able to find some data to work with. Maybe have a look at some of the <a href="https://www.kaggle.com/competitions">competitions hosted on Kaggle</a> or see if there’s <a href="https://www.bathhacked.org/">a group in your area which publishes open data</a>.</p>
<p>Then once you’ve picked something, go for it! Try out that cool package you saw someone else using. Figure out <em>why</em> there are so many missing values in that dataset. Take risks, explore, try new things and push yourself out of your comfort zone. And don’t be afraid to take inspiration from something that someone else has already done: regardless of whether you follow the same process or reach the same outcome, your take on it is going to be different to theirs.</p>
<p>By <em>writing</em> about that project - which is often easier than deciding on one in the first place - you’re developing your skills as a communicator by presenting your work in a coherent manner, rather than as a patchwork of dodgy scripts interspersed with the occasional hasty comment. And even if you don’t want to make your writing public, you’ll be amazed how often you go back and read something you wrote before because it’s come up again in something else you’re working on and you’ve forgotten how to do it.</p>
<p>I’d really encourage you to get your work out there though. Which brings us smoothly to…</p>
<p><img src="https://owenjonesuob.github.io/posts/2018-01-04-scale-up-your-interest/allegretto.png" class="img-fluid"></p>
</section>
<section id="iv.-allegro-maestoso-get-yourself-out-there" class="level3">
<h3 class="anchored" data-anchor-id="iv.-allegro-maestoso-get-yourself-out-there">IV. <em>Allegro maestoso</em>: Get yourself out there</h3>
<p>If you never play the piano for anyone else, no-one’s ever going to find out how good you are! So Part 2 of my Number One Two-Part Top Tip is:</p>
<blockquote class="blockquote">
<p>2. Start a blog</p>
</blockquote>
<p>It’s pretty easy to get going with <a href="https://wordpress.com/">Wordpress</a> or similar, and it takes your writing to the next level because now you’re writing for an audience. It may not be a very big audience, but if someone, somewhere finds your writing interesting or useful then surely it’s worth it. And if you know you’re potentially writing for someone other than yourself then you <em>need</em> to explain everything properly, which means you need to <em>understand</em> everything properly. I often learn more when I’m writing up a project than when I’m playing around with the code in the first place.</p>
<p>Also, a blog is a <em>really</em> good thing to have on your CV and to talk about at interviews, because it gives you some physical (well, virtual) evidence which you can point at as you say “look at this thing wot I’ve done”.</p>
<p>(Don’t actually say those exact words. Remember that you’re a Good Communicator.)</p>
<p>If you’re feeling brave you can even put that Twitter account to good use and start shouting about all the amazing things you’re doing. You’ll build up a loyal following amazingly quickly. Yes, half of them will probably be bots, but half of them will be real people who enjoy reading your work and who can give you valuable feedback.</p>
<p>Speaking of real people…</p>
<blockquote class="blockquote">
<p>3. Get involved in the community</p>
</blockquote>
<p>Yes, that was indeed Part 3 of my Number One Two-Part Top Tip, but it’s so important that it needs to be in there.</p>
<p>The online data science community is one of the best out there. The R community in particular is super friendly and supportive (check out forums like <a href="https://community.rstudio.com/">RStudio Community</a>, community groups like <a href="https://medium.com/@kierisi/r4ds-the-next-iteration-d51e0a1b0b82">R4DS</a>, and the <a href="https://twitter.com/hashtag/rstats?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Ehashtag">#rstats</a> tag on Twitter). Get involved in conversations, learn from people already working in the sector, share your own knowledge and <em>make friends</em>.</p>
<p>Want to go one better than online?</p>
<p>Get a <a href="https://www.meetup.com/">Meetup</a> account, sign up to some local groups and go out to some events. It might be difficult to force yourself to go for the first time, but pluck up the courage and do it. Believe me when I say there’s no substitute for meeting up and chatting to people. Many good friends are people I met for the first time at meetups. And of course, it’s the perfect opportunity to network - I met 5 or 6 of my current colleagues through <a href="https://www.meetup.com/Bath-Machine-Learning-Meetup/">BathML</a> before I even knew about Mango!</p>
<p>(If you’re in or near Bristol or London, <a href="https://www.meetup.com/Bristol-Data-Scientists/">Bristol Data Scientists</a> and <a href="https://www.meetup.com/LondonR/">LondonR</a> are both hosted by Mango and new members are always welcome!)</p>
<p><img src="https://owenjonesuob.github.io/posts/2018-01-04-scale-up-your-interest/allegro.png" class="img-fluid"></p>
</section>
<section id="postlude" class="level3">
<h3 class="anchored" data-anchor-id="postlude">Postlude</h3>
<p>Of course, everything I’ve just said is coming from my point of view and is entirely based on my own experiences.</p>
<p>For example, I’ve talked about coding quite a lot because I personally code quite a lot; and I code quite a lot because I enjoy it. That might not be the case for you. That’s fine. In fact it’s more than “fine”; the huge diversity in people’s backgrounds and interests is what makes data science such a fantastic field to be working in right now.</p>
<p>Maybe you’re interested in data visualisation. Maybe you’re into webscraping. Or stats. Or <a href="https://en.wikipedia.org/wiki/Financial_technology">fintech</a>, or <a href="https://en.wikipedia.org/wiki/Natural_language_processing">NLP</a>, or <a href="https://en.wikipedia.org/wiki/Artificial_intelligence">AI</a>, or <a href="https://en.wikipedia.org/wiki/Business_intelligence">BI</a>, or <a href="https://en.wikipedia.org/wiki/Continuous_integration">CI</a>. Maybe <em>you</em> are the relative at Christmas dinner who won’t stop banging on about why you should NEVER, under ANY circumstances, merge cells in an Excel spreadsheet (UNLESS it is PURELY for purposes of presentation).</p>
<p>Oh, why not:</p>
<blockquote class="blockquote">
<p>4. Find the parts of data science that you enjoy and arrange them so that they work for you.</p>
</blockquote>
<p><img src="https://owenjonesuob.github.io/posts/2018-01-04-scale-up-your-interest/final.png" class="img-fluid"></p>


</section>

 ]]></description>
  <category>data science</category>
  <category>r</category>
  <category>python</category>
  <category>intro</category>
  <category>piano</category>
  <guid>https://owenjonesuob.github.io/posts/2018-01-04-scale-up-your-interest/</guid>
  <pubDate>Thu, 04 Jan 2018 12:00:00 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2018-01-04-scale-up-your-interest/sheet_music.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>H2O.ai: Going for a paddle</title>
  <link>https://owenjonesuob.github.io/posts/2017-08-23-h2o-ai-going-for-a-paddle/</link>
  <description><![CDATA[ 





<p>
</p><p><strong>Note:</strong> I originally wrote this post for the Mango Solutions blog, and they have kindly allowed me to repost it here alongside the rest of my work! You can find the original post <a href="https://www.mango-solutions.com/blog/h2o-ai-going-for-a-paddle">here</a>.</p>
<hr>
<section id="a-quick-disclaimer" class="level2">
<h2 class="anchored" data-anchor-id="a-quick-disclaimer">
A quick disclaimer
</h2>
<p>
This post isn’t called <em>H2O.ai: Going for the 100m freestyle world record</em>. I’m not trying to win a Kaggle competition. I’m not carrying out detailed, highly-controlled benchmarking tests. I’m not, in fact, claiming to be doing anything particularly useful at all. This is just me, just playing around with some code, just for the fun of it.
</p>
<p><img src="https://owenjonesuob.github.io/posts/2017-08-23-h2o-ai-going-for-a-paddle/paddle.jpg"></p>
</section>
 ]]></description>
  <category>data</category>
  <category>data science</category>
  <category>H2O</category>
  <category>H2O.ai</category>
  <category>h2o</category>
  <category>MNIST</category>
  <category>sparklyr</category>
  <category>package</category>
  <category>R</category>
  <guid>https://owenjonesuob.github.io/posts/2017-08-23-h2o-ai-going-for-a-paddle/</guid>
  <pubDate>Wed, 23 Aug 2017 11:00:00 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2017-08-23-h2o-ai-going-for-a-paddle/paddle.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Adding a Git Bash alias</title>
  <link>https://owenjonesuob.github.io/posts/2017-08-22-adding-a-git-bash-alias/</link>
  <description><![CDATA[ 





<p>I thought I’d share another little time-saving trick I discovered earlier.</p>
<p>When I’m writing code I tend to use Git Bash to run commands, mostly because it (obviously!) works nicely with git and partly because… well, I think it looks nice. It’s so colourful! This is a valid reason for liking something, right?</p>
<p>Anyway, when you run a command in a terminal such as Git Bash, the first word is always an instruction to the terminal. The terminal decides:</p>
<ul>
<li>“Ah, I can do this!” (For <strong>shell commands</strong> such as <code>cd</code>, <code>mkdir</code> and <code>echo</code>); or</li>
<li>“Nominate [program].” (For anything else)</li>
</ul>
<p><img src="https://owenjonesuob.github.io/posts/2017-08-22-adding-a-git-bash-alias/commands.png" class="img-fluid"></p>
<p>Now, my go-to code/plaintext editor is <a href="https://notepad-plus-plus.org/">Notepad++</a>. (It’s great - I’d highly encourage you to have a look!)</p>
<p>Typing <code>notepad [filename]</code> opens the file in Notepad. But typing <code>notepad++ [filename]</code> doesn’t work. Very upsetting.</p>
<p><img src="https://owenjonesuob.github.io/posts/2017-08-22-adding-a-git-bash-alias/notfound.gif" class="img-fluid"></p>
<p>There is, however, a simple way to make this work - or, indeed, to add any little shortcut you like. These shortcuts are called <strong>aliases</strong>.</p>
<p>You define aliases in the <code>.bashrc</code> file, which contains settings that are loaded for Git Bash whenever you open it. This file lives in your home directory (in my case, my user folder <code>ojones/</code>) which can be quickly represented by a <code>~</code> in any commands.</p>
<p>If you’ve never edited your <code>.bashrc</code> file before, you might not have one. So first we can quickly create one in our home directory:</p>
<pre><code>touch ~/.bashrc</code></pre>
<p>Then open it with the editor of your choice (for example, vim):</p>
<pre><code>vim ~/.bashrc</code></pre>
<p>Now we’re going to add an alias for Notepad++ by adding the following line to the <code>.bashrc</code> file:</p>
<pre><code>alias npp="/c/Program\ Files\ \(x86\)/Notepad++/notepad++.exe"</code></pre>
<p>The string is just the unix-style filepath to where Notepad++ is installed on my computer(notice that we’ve had to escape spaces and parentheses with backslashes). So we’ve just told Git Bash that if it sees the command <code>npp</code> (for “notepad-plus-plus”) it should go to that filepath, which results in it launching Notepad++ for me. Hooray!</p>
<p>But you don’t have to stop there. You can set aliases for anything you like.</p>
<pre><code>alias npp="/c/Program\ Files\ \(x86\)/Notepad++/notepad++.exe";

alias gc="git commit -m \"Lazy commit\"";

alias doggo="printf $'
            ____,\'\`-, \n
      _,--\'   ,/::.: \n
   ,-\'       ,/::,\' \`---.___        ___,_ \n
   |       ,:\'::/        :\'"\`:"\`--./ ,-^.:--. \n
   |:     ,:\':,\'         \'         \`.   :\`   \`-. \n
    \:.,:::/:/ -:.                   \`  | \`     \`-. \n
     \:::,\'//__.:  ,:  ,  ,  :.\`-.   :. |  :       :. \n
      \,\',\':/O)^. :\'  :  :   \'__\` \`  :::\`.       .:\' ) \n
      |,\'  |\__,: :      :  \'/O)\`.   :::\`:       \' ,\' \n
           |\`--\'\'            \__,\' , ::::(       ,\' \n
           \`    ,            \`--\' ,: :::,\'\   ,-\' \n
            | ,:         ,    ,::\'  ,:::   |,\' \n
            |,:        .(          ,:::|   \` \n
            ::\'_   _   ::         ,::/:| \n
           ,\',\' \`-\' \   \`.      ,:::/,:| \n
          | : _  _   |   \'     ,::,\' ::: \n
          | \ O\`\'O  ,\',   ,    :,\'   ::: \n
           \ \`-\'\`--\',:\' ,\' , ,,\'      :: \n
            \`\`:.:.__   \',-\',\'        ::\' \n
               \`--.__, ,::.         ::\' \n
                   |:  ::::.       ::\' \n
                   |:  ::::::    ,::'"</code></pre>
<p>(Having said that, if you want to create aliases specifically for git commands then you might want to use git’s own alias system rather than defining general aliases in <code>.bashrc</code>. There’s a good explanation of how to do that <a href="http://haacked.com/archive/2014/07/28/github-flow-aliases/">here</a>.)</p>



 ]]></description>
  <category>git</category>
  <category>git bash</category>
  <category>alias</category>
  <guid>https://owenjonesuob.github.io/posts/2017-08-22-adding-a-git-bash-alias/</guid>
  <pubDate>Tue, 22 Aug 2017 12:00:00 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2017-08-22-adding-a-git-bash-alias/alias.PNG" medium="image"/>
</item>
<item>
  <title>Markov and Churchill: an exploration of predictive text</title>
  <link>https://owenjonesuob.github.io/posts/2017-07-23-markov-and-churchill-an-exploration-of-predictive-text/</link>
  <description><![CDATA[ 





<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Let me introduce the “predictive text game”. Play along with me if you like!</p>
<p>Open up a new message on your phone, type in a random word to get started (I’m choosing “the”), and then just keep hitting the top “suggested word” that appears above your keyboard. Here’s my result:</p>
<blockquote class="blockquote">
<p>The following user says thank you for your time and consideration and I will be in the evening of the time to get the same as the first time I am not sure if you have any questions or concerns please visit the lockouts page and the other day and I will ve in the evening of the time to…</p>
</blockquote>
<p>I think it’s pretty cool that your phone can make a good guess at what you’re going to write next. I mean, my phone’s <em>magnum opus</em> is pretty boring and repetitive - hopefully you’ll get something a bit more interesting! But I’m just impressed that it can do this at all.</p>
</section>
<section id="memoryless" class="level2">
<h2 class="anchored" data-anchor-id="memoryless">Memoryless</h2>
<p>Imagine you wake up in a massive field, and all you have with you is a single coin. You have no idea how you got there (the last thing you remember is your mate ordering an obscene number of Jägerbombs) but you don’t care because it seems to be the perfect place for you to demonstrate what a <strong>random walk</strong> is.</p>
<p>You stand up, wait a moment for the pain behind your eyes to subside, take a step forwards and toss the coin. Tails. You turn right, take a step forwards, and toss the coin again. Heads, You turn left, take a step forwards, and toss the coin again…</p>
<p><img src="https://owenjonesuob.github.io/posts/2017-07-23-markov-and-churchill-an-exploration-of-predictive-text/randomwalk.jpg" class="img-fluid"></p>
<p>This is an example of a <strong>memoryless stochastic process</strong> - a stochastic process because your coin-toss results form a series of observations of a random variable, and memoryless because each toss is independent of all the tosses that came before it. “Memoryless stochastic process” is a bit of a mouthful though, so we call them <strong>Markov chains</strong> (after the mathematician Andrey Markov, who studied them in detail in the early 20th Century).</p>
</section>
<section id="markov-chains" class="level2">
<h2 class="anchored" data-anchor-id="markov-chains">Markov chains</h2>
<p>Formally, if it is given that a Markov system is currently in a certain state, then the next state of the system is independent of all previous states. We sometimes talk about “past” and “future” states, because often the series of random variables forming the Markov chain are indexed by timesteps - for example, if you took one step each second while going for your random walk, you would naturally index the first coin toss as “1”, the second as “2”, and so on. You’d also need to be seriously good at coin-tossing.</p>
</section>
<section id="predictive-text" class="level2">
<h2 class="anchored" data-anchor-id="predictive-text">Predictive text</h2>
<p>So, how do Markov chains fit in with predictive text?</p>
<p>Well, in the simplest possible case, we set up the system by making a big dictionary which links every word to all the words which might come after it.</p>
<p><img src="https://owenjonesuob.github.io/posts/2017-07-23-markov-and-churchill-an-exploration-of-predictive-text/letsky.jpg" class="img-fluid"></p>
<p>The current “state” of the system is the last word that was typed. We get to the next state by picking one of the associated words at random.</p>
<p><img src="https://owenjonesuob.github.io/posts/2017-07-23-markov-and-churchill-an-exploration-of-predictive-text/youarethey.jpg" class="img-fluid"></p>
<p>Actually, because words usually <em>do</em> depend on the words that have come before them, predictive text uses the previous <img src="https://latex.codecogs.com/png.latex?n"> words (usually 2ish) as the current state.</p>
</section>
<section id="lets-do-some-code-already" class="level2">
<h2 class="anchored" data-anchor-id="lets-do-some-code-already">Let’s do some code already</h2>
<p>Okay okay. We’re going to use Python to build a “MarkovGenerator” class: a MarkovGenerator object will take a bunch of text as input and set up the whole predictive-text-style Markov system we’ve just been talking about.</p>
<p>First we need to build our “cache” of states and potential next-states. To do that, first we’ll grab all the groups of <img src="https://latex.codecogs.com/png.latex?n"> consecutive words in our text. The first <img src="https://latex.codecogs.com/png.latex?n-1"> of these words are the “key”, and the last word is the “value”. For example, let’s take the sentence:</p>
<pre><code>Rain down rain down come on rain down on me
 </code></pre>
<p>Choosing <img src="https://latex.codecogs.com/png.latex?n=3">, this would give us</p>
<pre><code>rain down rain
down rain down
rain down come
down come on
come on rain
on rain down
rain down on
down on me</code></pre>
<p>So taking the first 2 words as a key, and the third word as a possible value, we get</p>
<pre><code>rain down  =&gt;  rain, come, on
down rain  =&gt;  down
down come  =&gt;  on
come on    =&gt;  rain
on rain    =&gt;  down
down on    =&gt;  me</code></pre>
<p>This is what <code>tuples()</code> and <code>build_cache()</code> will do in the class we’re building.</p>
<p>Then once we have our MarkovGenerator object, we’ll want to use it to generate some text:</p>
<pre><code>Start with:   on rain  =&gt;  down                             (only possible choice)
                      rain down  =&gt;  come                   (chosen at random from [rain, come, on])
                                down come  =&gt; on            (only possible choice)
                                         come on  =&gt;  rain  (only possible choice)
                   
Result:       on rain down come on rain</code></pre>
<p>So, let’s make the class.</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># We're going to need to make some random choices later</span></span>
<span id="cb5-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> random</span>
<span id="cb5-3"></span>
<span id="cb5-4"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">class</span> MarkovGenerator(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">object</span>):</span>
<span id="cb5-5">    </span>
<span id="cb5-6">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># When we create a "MarkovGenerator" object, these things happen:</span></span>
<span id="cb5-7">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">__init__</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, text, tuple_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>):</span>
<span id="cb5-8">        </span>
<span id="cb5-9">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Take the input string, and get individual words by splitting it up</span></span>
<span id="cb5-10">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.text <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> text</span>
<span id="cb5-11">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.words <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.text.split()</span>
<span id="cb5-12">        </span>
<span id="cb5-13">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># How many words are taken for the current state? (3 by default)</span></span>
<span id="cb5-14">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.tuple_size <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> tuple_size</span>
<span id="cb5-15">        </span>
<span id="cb5-16">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create an empty dictionary, then fill it using build_cache (see below)</span></span>
<span id="cb5-17">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.cache <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> {}</span>
<span id="cb5-18">        <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.build_cache()</span>
<span id="cb5-19">        </span>
<span id="cb5-20">        </span>
<span id="cb5-21">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Get all collections of n words</span></span>
<span id="cb5-22">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> tuples(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>):</span>
<span id="cb5-23">        </span>
<span id="cb5-24">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> i <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.tuple_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.words)):</span>
<span id="cb5-25">            </span>
<span id="cb5-26">            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># https://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do-in-python</span></span>
<span id="cb5-27">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">yield</span> (<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.words[i<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.tuple_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>k] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> k <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.tuple_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>))</span>
<span id="cb5-28">            </span>
<span id="cb5-29">            </span>
<span id="cb5-30">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Build the cache dictionary        </span></span>
<span id="cb5-31">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> build_cache(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>):</span>
<span id="cb5-32"></span>
<span id="cb5-33">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> tup <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.tuples():</span>
<span id="cb5-34">            </span>
<span id="cb5-35">            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># The first n-1 words, as a Python tuple, are the key</span></span>
<span id="cb5-36">            tup <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>(tup)</span>
<span id="cb5-37">            key <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">tuple</span>(w <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> w <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> tup[:<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb5-38">            </span>
<span id="cb5-39">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">if</span> key <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.cache:</span>
<span id="cb5-40">                </span>
<span id="cb5-41">                <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># If the key's already there, add the last word of</span></span>
<span id="cb5-42">                <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># the tuple to the key's list of values</span></span>
<span id="cb5-43">                <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.cache[key].append(tup[<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb5-44">                </span>
<span id="cb5-45">            <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">else</span>:</span>
<span id="cb5-46">                <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Otherwise add a new entry to the cache</span></span>
<span id="cb5-47">                <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.cache[key] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [tup[<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]]</span>
<span id="cb5-48">                </span>
<span id="cb5-49">                </span>
<span id="cb5-50">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate an output text string            </span></span>
<span id="cb5-51">    <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> generate_text(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>, length):</span>
<span id="cb5-52">        </span>
<span id="cb5-53">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Choose a random set of n-1 consecutive words to start</span></span>
<span id="cb5-54">        seed <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> random.randint(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">len</span>(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.words)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.tuple_size)</span>
<span id="cb5-55">        current <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.words[seed<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>k] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> k <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.tuple_size)]</span>
<span id="cb5-56">        </span>
<span id="cb5-57">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set up a list for our generated words</span></span>
<span id="cb5-58">        gen_words <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb5-59">        </span>
<span id="cb5-60">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># length is how many words we want in the output</span></span>
<span id="cb5-61">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> i <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(length):</span>
<span id="cb5-62">            </span>
<span id="cb5-63">            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Pop the first word off the current tuple, and store it</span></span>
<span id="cb5-64">            gen_words.append(current.pop(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>))</span>
<span id="cb5-65">            </span>
<span id="cb5-66">            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Use the rest of the tuple as the key to choose the next</span></span>
<span id="cb5-67">            <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># word (randomly!), and stick that word onto the end of the tuple</span></span>
<span id="cb5-68">            current.append(random.choice(<span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">self</span>.cache[<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">tuple</span>(current)]))</span>
<span id="cb5-69">        </span>
<span id="cb5-70">        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Stick all the generated words together and return!</span></span>
<span id="cb5-71">        <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">return</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>.join(gen_words)</span></code></pre></div>
</section>
<section id="the-greatest-briton" class="level2">
<h2 class="anchored" data-anchor-id="the-greatest-briton">The Greatest Briton</h2>
<p>We’ve got our generator, but before it can generate anything we need to give it something to read!</p>
<p>How about some material from the greatest Brit in history, as voted for by the Great British public in a <a href="https://en.wikipedia.org/wiki/100_Greatest_Britons">BBC television poll</a> in 2002?</p>
<p><img src="https://owenjonesuob.github.io/posts/2017-07-23-markov-and-churchill-an-exploration-of-predictive-text/dog.jpg" class="img-fluid"></p>
<p>Hmm.</p>
<pre><code>Start with:   oh yes  =&gt;  oh                         (only possible choice)
                      yes oh  =&gt;  yes                (only possible choice)
                               oh yes  =&gt;  oh ...    (only possible choice)

Result:       oh yes oh yes oh yes oh yes oh yes ...</code></pre>
<p>No.&nbsp;Let’s not do that. Let’s stick to the original plan.</p>
<p><img src="https://owenjonesuob.github.io/posts/2017-07-23-markov-and-churchill-an-exploration-of-predictive-text/churchill.jpg" class="img-fluid"></p>
</section>
<section id="soup-and-cigars" class="level2">
<h2 class="anchored" data-anchor-id="soup-and-cigars">Soup and cigars</h2>
<p>Churchill’s parliamentary speeches are available online on the website of <a href="http://www.churchill-society-london.org.uk/">The Churchill Society</a>. I’m going to use the <code>beautifulsoup4</code> Python module to do some web scraping.</p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> bs4 <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> BeautifulSoup</span>
<span id="cb7-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> requests</span></code></pre></div>
<p>In order to get the speeches we’ll need to figure out the layout of each page, so let’s just look at one speech for now.</p>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1">locusts <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"http://www.churchill-society-london.org.uk/Locusts.html"</span></span>
<span id="cb8-2">response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> requests.get(locusts)</span>
<span id="cb8-3">soup <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> BeautifulSoup(response.content, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"html.parser"</span>)</span>
<span id="cb8-4"></span>
<span id="cb8-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Let's have a look...</span></span>
<span id="cb8-6">soup</span></code></pre></div>
<pre class="text"><code>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;The Churchill Society London. Churchill's Speeches.&lt;/title&gt;
&lt;x-sas-window bottom="768" left="57" right="868" top="138"&gt;
&lt;meta content="text/html; 
charset=utf-8" http-equiv="Content-Type"/&gt;
&lt;/x-sas-window&gt;&lt;/head&gt;

[... loads more, I've truncated!]

&lt;h4&gt;&lt;center&gt;&lt;font face="Times" size="-1"&gt;12 November 1936&lt;/font&gt;
&lt;/center&gt;&lt;/h4&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;font face="Times"&gt;I have, with some friends, put an
Amendment on the Paper. It is the same as the Amendment which I
submitted two years ago, and I have put it in exactly the same terms
because I thought it would be a good thing to remind the House of
what has happened in these two years. Our Amendment in November 1934
was the culmination of a long series of efforts by private Members

[... more...]

&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;center&gt; &lt;/center&gt;&lt;/p&gt;
&lt;p&gt;&lt;center&gt; &lt;/center&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>We’ll use HTML tags to narrow down our selection as much as possible. The content we want is contained within <code>&lt;blockquote&gt;</code> tags, and each paragraph is wrapped in <code>&lt;font&gt;</code> tags.</p>
<div class="sourceCode" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Get the text from between each pair of &lt;font&gt; tags within the &lt;blockquote&gt; tags</span></span>
<span id="cb10-2">speech_raw <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [passage.get_text() <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> passage <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> soup.blockquote.find_all(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font"</span>)]</span>
<span id="cb10-3"></span>
<span id="cb10-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Join all the paragraphs together into one long string</span></span>
<span id="cb10-5">speech_raw <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>.join(speech_raw)</span>
<span id="cb10-6"></span>
<span id="cb10-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># "Chop off" the irrelevant info at the bottom</span></span>
<span id="cb10-8">speech_raw <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> speech_raw.split(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"..................."</span>)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]</span>
<span id="cb10-9"></span>
<span id="cb10-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Have a look</span></span>
<span id="cb10-11">speech_raw[:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>]</span></code></pre></div>
<pre><code>'I have, with some friends, put an\nAmendment on the Paper. It is the same as the Amendment which I\nsubmitted two years ago, and I have put it in exactly the same terms\nbecause I thought it would be a g'</code></pre>
<p>This is looking good, except we have some randomly scattered newline characters (<code>\n</code>) mixed in with the great man’s words. We’ll use a regular expression to tidy them up.</p>
<div class="sourceCode" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> re</span>
<span id="cb12-2"></span>
<span id="cb12-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Compile the regex: maybe some whitespace, then \n, then maybe more whitespace</span></span>
<span id="cb12-4">newline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> re.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">compile</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"\s*</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n\s*"</span>)</span>
<span id="cb12-5"></span>
<span id="cb12-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Sub each instance of the regex for a single space</span></span>
<span id="cb12-7">speech <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> newline.sub(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>, speech_raw)</span>
<span id="cb12-8"></span>
<span id="cb12-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Have a look</span></span>
<span id="cb12-10">speech[:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>]</span></code></pre></div>
<pre><code>'I have, with some friends, put an Amendment on the Paper. It is the same as the Amendment which I submitted two years ago, and I have put it in exactly the same terms because I thought it would be a g'</code></pre>
<p>Marvellous.</p>
<p>Now we turn our attention to the site’s index page, and the links to the individual speech pages.</p>
<p><img src="https://owenjonesuob.github.io/posts/2017-07-23-markov-and-churchill-an-exploration-of-predictive-text/spchindx.jpg" class="img-fluid"></p>
<p>The speech pages are all accessed by these “OPENSml.Jpeg” image buttons. So we need to get all the link (<code>&lt;a&gt;</code>) elements that contain one of these buttons, and then take the <code>href</code> attribute from each of these link elements.</p>
<div class="sourceCode" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1">speech_index <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"http://www.churchill-society-london.org.uk/SpchIndx.html"</span></span>
<span id="cb14-2">response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> requests.get(speech_index)</span>
<span id="cb14-3">soup <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> BeautifulSoup(response.content, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"html.parser"</span>)</span>
<span id="cb14-4"></span>
<span id="cb14-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Find the "OPENSml" images; get their parents (the links); get the href attribute</span></span>
<span id="cb14-6">speech_urls <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [url.parent[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"href"</span>] <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> url <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> soup.find_all(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"img"</span>, src<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"OPENSml.Jpeg"</span>)]</span>
<span id="cb14-7">speech_urls</span></code></pre></div>
<pre><code>['Webmap.html',
 'Locusts.html',
 'Austria.html',
 'Munich.html',
 'RusnEnig.html',
 'Joybells.html',
 'BdTlTrsS.html',
 'BeYeMofV.html',
 'Dunkirk.html',
 'UnknWarr.html',
 'FnstHour.html',
 'thefew.html',
 'ToCzechP.html',
 'LaFrance.html',
 'DthChbln.html',
 'GutTools.html',
 'LngHrdWr.html',
 'CptsSoul.html',
 'NEVER.html',
 'Congress.html',
 'HoCJan42.html',
 'EndoBegn.html',
 'InvaFrnc.html',
 'DthRovlt.html',
 '13May45.html',
 'EndofWar.html',
 'YrVictry.html',
 'Revw1945.html',
 'Fulton.html',
 'astonish.html',
 'WSCHague.html',
 'HonAmrcn.html',
 'Honour.html']</code></pre>
<p>Now we want to go to each of these pages (except the first one, which is a link to the site map) and get the speech, just like we did for the “Locusts” speech a minute ago.</p>
<div class="sourceCode" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1">speech_list <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb16-2"></span>
<span id="cb16-3"><span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> url <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> speech_urls[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>:]:</span>
<span id="cb16-4">    </span>
<span id="cb16-5">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Append the local url to the site's base url</span></span>
<span id="cb16-6">    full_url <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"http://www.churchill-society-london.org.uk/</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%s</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%</span> url</span>
<span id="cb16-7">    </span>
<span id="cb16-8">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Get the page</span></span>
<span id="cb16-9">    response <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> requests.get(full_url)</span>
<span id="cb16-10">    soup <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> BeautifulSoup(response.content, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"html.parser"</span>)</span>
<span id="cb16-11">    </span>
<span id="cb16-12">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add the speech to the list</span></span>
<span id="cb16-13">    speech_raw <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [passage.get_text() <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">for</span> passage <span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">in</span> soup.blockquote.find_all(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"font"</span>)]</span>
<span id="cb16-14">    speech_raw <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>.join(speech_raw).split(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"..................."</span>)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]</span>
<span id="cb16-15">    </span>
<span id="cb16-16">    newline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> re.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">compile</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"\s*</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\\</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">n\s*"</span>)</span>
<span id="cb16-17">    speech <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> newline.sub(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" "</span>, speech_raw)</span>
<span id="cb16-18">    </span>
<span id="cb16-19">    speech_list.append(speech)</span></code></pre></div>
<p>Finally, let’s stick all these speeches together into one massive long Churchillian superspeech.</p>
<div class="sourceCode" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1">speeches_str <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">""</span>.join(speech_list)</span>
<span id="cb17-2">speeches_str</span></code></pre></div>
<pre><code>'I have, with some friends, put an Amendment on the Paper. It is the same as the Amendment which I submitted two years ago, and I have put it in exactly the same terms because I thought it would be a good thing to remind the House of what has happened in these two years. Our Amendment in November 1934 was the culmination of a long series of efforts by private Members and by the Conservative party in the country to warn His Majesty\'s Government of the dangers to Europe and to this country which were coming upon us through the vast process of German rearmament then already in full swing. The speech which I made on that occasion was much censured as being alarmist by leading Conservative newspapers, and I remember that Mr Lloyd George congratulated the Prime Minister, who was then Lord President, on having so satisfactorily demolished my extravagant fears. What would have been said, I wonder, if I could two years ago have forecast to the House the actual course of events? Suppose we had then been told that Germany would spend for two years £800,000,000 a year upon warlike preparations; that her industries would be organised for war, as the industries of no country have ever been; that by breaking all Treaty engagements she would create a gigantic air force and an army based on universal compulsory service, which by the present time, in 1936, amounts to upwards of thirty-nine divisions of highly equipped troops, including mechanised divisions of almost unmeasured strength and that behind all this there lay millions of armed and trained men, for whom the formations and equipment are rapidly being prepared to form another eighty divisions in addition to those already perfected. Suppose we had then known that by now two years of compulsory military service would be the rule, with a preliminary year of training in labour camps; that the Rhineland would be occupied by powerful forces and fortified with great skill, and that Germany would be building with our approval, signified by treaty, a large submarine fleet. Suppose we had also been able to foresee the degeneration of the foreign situation, our quarrel with Italy, the Italo-German association, the Belgian declaration about neutrality - which, if the worst interpretation of it proves to be true, so greatly affects the security of this country - and the disarray of the smaller Powers of Central Europe. Suppose all that had been forecast - why, no one would have believed in the truth of such a nightmare tale. Yet just two years have gone by and we see it all in broad daylight. Where shall we be this time two years? I hesitate now to predict. Let me say, however, that I will not accept the mood of panic or of despair. There is another side - a side which deserves our study, and can be studied without derogating in any way from the urgency which ought to animate our military preparations. The British Navy is, and will continue to be, incomparably the strongest in Europe. The French Army will certainly be, for a good many months to come, at least equal in numbers and superior in maturity to the German Army. The British and French Air Forces together are a very different proposition from either of those forces considered separately. While no one can prophesy, it seems to me that the Western democracies, provided they are knit closely together, would be tolerably safe for a considerable number of months ahead. No one can say to a month or two, or even a quarter or two, how long this period of comparative equipoise will last. But it seems certain that during the year 1937 the German Army will become more numerous than the French Army, and very much more efficient than it is now. It seems certain that the German Air Force will continue to improve upon the long lead which it already has over us, particularly in respect of long-distance bombing machines. The year 1937 will certainly be marked by a great increase in the adverse factors which only intense efforts on our part can, to effective extent, countervail. The efforts at rearmament which France and Britain are making will not by themselves be sufficient. It will be necessary for the We~tern democracies, even at some extension of their risks, to gather round them all the elements of collective security or of combined defensive strength against aggression - if you prefer, as I do myself, to call it so - which can be assembled on the basis of the Covenant of the League of Nations. Thus I hope we may succeed in again achieving a position of superior force, and then will be the time, not to repeat the folly which we committed when we were all-powerful and supreme, but to invite Germany to make common cause with us in assuaging the griefs of Europe and opening a new door to peace and disarmament. I now turn more directly to the issues of this Debate. Let us examine our own position. No one can refuse his sympathy to the Minister for the Co-ordination of Defence. From time to time my right hon. Friend lets fall phrases or facts which show that he realises, more than anyone else on that bench it seems to me, the danger in which we stand. One such phrase came from his lips the other night. He spoke of "the years that the locust hath eaten". Let us see which are these "years that the locust hath eaten" even if we do not pry too closely in search of the locusts who have eaten these precious years. For this purpose we must look into the past. From the year 1932, certainly from the beginning of 1933, when Herr Hitler came into power, it was general public knowledge in this country that serious rearmament had begun in Germany. There was a change in the situation. Three years ago, at the Conservative Conference at Birmingham, that vigorous and faithful servant of this country, Lord Lloyd, moved the following resolution: That this Conference desires to record its grave anxiety in regard to the inadequacy of the provisions made for Imperial Defence.  That was three years ago, and I see, from The Times report of that occasion, that l said: "During the last four or five years the world had grown gravely darker..... We have steadily disarmed, partly with a sincere desire to give a lead to other countries, and partly through the severe financial pressure of the time. But a change must now be made. We must not continue longer on a course in which we alone are growing weaker while every other nation is growing stronger" The resolution was passed unanimously, with only a rider informing the Chancellor of the Exchequer that all necessary burdens of taxation would be cheerfully borne. There were no locusts there, at any rate. I am very glad to see the Prime Minister [Mr Baldwin] restored to his vigour, and to learn that he has been recuperated by his rest and also, as we hear, rejuvenated. It has been my fortune to have ups and downs in my political relations with him, the downs on the whole predominating perhaps, but at any rate we have always preserved agreeable personal relations, which, so far as I am concerned, are greatly valued. I am sure he would not wish in his conduct of public affairs that there should be any shrinking from putting the real issues of criticism which arise, and would certainly proceed in that sense. My right hon. Friend has had all the power for a good many years, and therefore there rests upon him inevitably the main responsibility for everything that has been done, or not done, and also the responsibility for what is to be done or not done now. So far as the air is concerned, this responsibility was assumed by him in a very direct personal manner even before he became Prime Minister. I must recall the words which he used in the Debate on 8 March 1934, nearly three years ago. In answer to an appeal which I made to him, both publicly and privately, he said: Any Government of this country - a National Government more than any, and this Government - will see to it that in air strength and air power this country shall no longer be in a position inferior to any country within striking distance of our shores.  Well, Sir, I accepted that solemn promise, but some of my friends, like Sir Edward Grigg and Captain Guest, wanted what the Minister for the Co-ordination of Defence, in another state of being, would have called \'further and better particulars\', and they raised a debate after dinner, when the Prime Minister, then Lord President, came down to the House and really showed less than his usual urbanity in chiding those Members for even venturing to doubt the intention of the Government to make good in every respect the pledge which he had so solemnly given in the afternoon. I do not think that responsibility was ever more directly assumed in a more personal manner. The Prime Minister was not successful in discharging that task, and he admitted with manly candour a year later that he had been led into error upon the important question of the relative strength of the British and German air power. No doubt as a whole His Majesty\'s Government were very slow in accepting the unwelcome fact of German rearmament. They still clung to the policy of one-sided disarmament. It was one of those experiments, we are told, which had to be, to use a vulgarism, \'tried out\', just as the experiments of non-military sanctions against Italy had to be tried out. Both experiments have now been tried out, and Ministers are accustomed to plume themselves upon the very clear results of those experiments. They are held to prove conclusively that the policies subjected to the experiments were all wrong, utterly foolish, and should never be used again, and the very same men who were foremost in urging those experiments are now foremost in proclaiming and denouncing the fallacies upon which they were based. They have bought their knowledge, they have bought it dear, they have bought it at our expense, but at any rate let us be duly thankful that they now at last possess it. In July 1935, before the General Election, there was a very strong movement in this House in favour of the appointment of a Minister to concert the action of the three fighting Services. Moreover, at that time the Departments of State were all engaged in drawing up the large schemes of rearmament in all branches which have been laid before us in the White Paper and upon which we are now engaged. One would have thought that that was the time when this new Minister or Co-ordinator was most necessary. He was not, however, in fact appointed until nearly nine months later, in March 1936. No explanation has yet been given to us why these nine months were wasted before the taking of what is now an admittedly necessary measure. The Prime Minister dilated the other night, no doubt very properly, the great advantages which had flowed from the appointment of the Minister for the Co-ordination of Defence. Every argument used to show how useful has been the work which he has done accuses the failure to appoint him nine months earlier, when inestimable benefits would have accrued to us by the saving of this long period. When at last, in March, after all the delays, the Prime Minister eventually made the appointment, the arrangement of duties was so ill-conceived that no man could possibly discharge them with efficiency or even make a speech about them without embarrassment. I have repeatedly pointed out the obvious mistake in organisation of jumbling together - and practically everyone in the House is agreed upon this - the functions of defence with those of a Minister of Supply. The proper organisation, let me repeat, is four Departments - the Navy, the Army, the Air and the Ministry of Supply, with the Minister for the co-ordination of Defence over the four, exercising a general supervision, concerting their actions, and assigning the high priorities of manufacture in relation to some comprehensive strategic conception. The House is familiar with the many requests and arguments which have been made to the Government to create a Ministry of Supply. These arguments have received powerful reinforcement from another angle in the report the Royal Commission on Arms Manufacture. The first work of this new Parliament, and the first work of the Minister for the Co-ordination of Defence if he had known as much about the subject when he was appointed as he does now, would have been to set up a Ministry of Supply which should, step by step, have taken over the whole business of the design and manufacture of all the supplies needed by the Air Force and the Army, and everything needed for the Navy, except warships, heavy ordnance, torpedoes and one or two ancillaries. All the best of the industries of Britain should have been surveyed from a general integral standpoint, and all existing resources utilised so far as was necessary to execute the programme. The Minister for the Co-ordination of Defence has argued as usual against a Ministry of Supply. The arguments which he used were weighty, and even ponderous - it would disturb and delay existing programmes; it would do more harm than good; it would upset the life and industry of the country; it would destroy the export trade and demoralise finance at the moment when it was most needed; it would turn this country into one vast munitions camp. Certainly these are massive arguments, if they are true. One would have thought that they would carry conviction to any man who accepted them. But then my right hon. Friend went on somewhat surprisingly to say, \'The decision is not final\'. It would be reviewed again in a few weeks. What will you know in a few weeks about this matter that you do not know now, that you ought not to have known a year ago, and have not been told any time in the last six months? What is going to happen in the next few weeks which will invalidate all these magnificent arguments by which you have been overwhelmed, and suddenly make it worth your while to paralyse the export trade, to destroy the finances, and to turn the country into a great munitions camp? The First Lord of the Admiralty in his speech the other night went even farther. He said, \'We are always reviewing the position. Everything, he assured us is entirely fluid. I am sure that that is true. Anyone can see what the position is. The Government simply cannot make up their minds, or they cannot get the Prime Minister to make up his mind. So they go on in strange paradox, decided only to be undecided, resolved to be irresolute, adamant for drift, solid for fluidity, all-powerful to be impotent. So we go on preparing more months and years - precious, perhaps vital to the greatness of Britain - for the locusts to eat. They will say to me, \'A Minister of Supply is not necessary, for all is going well.\' I deny it. \'The position is satisfactory.\' It is not true. \'All is proceeding according to plan.\' We know what that means. Let me come to the Territorial Army. In March of this year I stigmatised a sentence in the War Office Memorandum about the Territorial Army, in which it was said the equipment of the Territorials could not be undertaken until that of the Regular Army had been completed. What has been done about all that? It is certain the evils are not yet removed. I agree wholeheartedly with all that was said by Lord Winterton the other day about the Army and the Territorial Force. When I think how these young men who join the Territorials come forward, almost alone in the population, and take on a liability to serve anywhere in any part of the world, not even with a guarantee to serve in their own units; come forward in spite of every conceivable deterrent; come forward - 140,000 of them, although they are still not up to strength - and then find that the Government does not take their effort seriously enough even to equip and arm them properly, I marvel at their patriotism. It is a marvel; it is also a glory, but a glory we have no right to profit by unless we can secure proper and efficient equipment for them. A friend of mine the other day saw a number of persons engaged in peculiar evolutions, genuflections and gestures in the neighbourhood of London. His curiosity was excited. He wondered whether it was some novel form of gymnastics, or a new religion - there are new religions which are very popular in some countries nowadays - or whether they were a party of lunatics out for an airing. On approaching closer he learned that they were a Searchlight Company of London Territorials who were doing their exercises as well as they could without having the searchlights. Yet we are told there is no need for a Ministry of Supply. In the manoeuvres of the Regular Army many of the most important new weapons have to be represented by flags and discs. When we remember how small our land forces are altogether only a few hundred thousand men - it seems incredible that the very flexible industry of Britain, if properly handled, could not supply them with their modest requirements. In Italy, whose industry is so much smaller, whose wealth and credit are a small fraction of this country\'s, a Dictator is able to boast that he has bayonets and equipment for 8,000,000 men. Halve the figure, if you like, and the moral remains equally cogent. The Army lacks almost every weapon which is required for the latest form of modern war. Where are the anti-tank guns, where are the short-distance wireless sets, where the field anti-aircraft guns against low-flying armoured aeroplanes? We want to know how it is that this country, with its enormous motoring and motor-bicycling public, is not able to have strong mechanised divisions, both Regular and Territorial. Surely, when so much of the interest and the taste of our youth is moving in those mechanical channels, and when the horse is receding with the days of chivalry into the past, it ought to be possible to create an army of the size we want fully up to strength and mechanised to the highest degree. Look at the Tank Corps. The tank was a British invention. This idea, which has revolutionised the conditions of modern war, was a British idea forced on the War Office by outsiders. Let me say they would have just as hard work today to force a new idea on it. I speak from what I know. During the War we had almost a monopoly, let alone the leadership, in tank warfare, and for several years afterwards we held the foremost place. To England all eyes were turned. All that has gone now. Nothing has been done in \'the years that the locust hath eaten\' to equip the Tank Corps with new machines. The medium tank which they possess, which in its day was the best in the world, is now looking obsolete. Not only in numbers for there we have never tried to compete with other countries - but in quality these British weapons are now surpassed by those of Germany, Russia, Italy and the United States. All the shell plants and gun plants in the Army, apart from the very small peace-time services, are in an elementary stage. A very long period must intervene before any effectual flow of munitions can be expected, even for the small forces of which we dispose. Still we are told there is no necessity for a Ministry of Supply, no emergency which should induce us to impinge on the normal course of trade. If we go on like this, and I do not see what power can prevent us from going on like this, some day there may be a terrible reckoning, and those who take the responsibility so entirely upon themselves are either of a hardy disposition or they are incapable of foreseeing the possibilities which may arise. Now I come to the greatest matter of all, the air. We received on Tuesday night, from the First Lord of the Admiralty, the assurance that there is no foundation whatever for the statement that we are \'vastly behind hand\' with our Air Force programme. It is clear from his words that we are behind hand. The only question is, what meaning does the First Lord attach to the word \'vastly\'? He also used the expression, about the progress of air expansion, that it was \'not unsatisfactory\'. One does not know what his standard is. His standards change from time to time. In that speech of the 11th of September about the League of Nations there was one standard, and in the Hoare-Laval Pact there was clearly another. In August last some of us went in a deputation to the Prime Minister in order to express the anxieties which we felt about national defence, and to make a number of statements which we preferred not to be forced to make in public. I personally made a statement on the state of the Air Force to the preparation of which I had devoted several weeks and which, I am sorry to say took an hour to read. My right hon. Friend the Prime Minister listened with his customary exemplary patience. I think I told him beforehand that he is a good listener, and perhaps he will retort that he learned to be when I was his colleague. At any rate, he listened with patience, and that is always something. During the three months that have passed since then I have checked those facts again in the light of current events and later acknowledge, and were it not that foreign ears listen to all that is said here, or if we were in secret Session, I would repeat my statement here. And even if only one half were true I am sure the House would consider that a very grave state of emergency existed, and also, I regret to say, a state of things from which a certain suspicion of mismanagement cannot be excluded. I am not going into any of those details. I make it a rule, as far as I possibly can, to say nothing in this House upon matters which am not sure are already known to the General Staffs of foreign countries; but there is one statement of very great importance which the Minister for the Co-ordination of Defence made in his speech on Tuesday. He said: "The process of building up squadrons and forming new training units and skeleton squadrons is familiar to everybody connected with the Air Force. The number of squadrons in present circumstances at home today is eighty, and that figure includes sixteen auxiliary squadrons, but excludes the Fleet Air Arm, and, of course, does not include the squadrons abroad". From that figure, and the reservations by which it was prefaced, it is possible for the House, and also for foreign countries, to deduce pretty accurately the progress of our Air Force expansion. I feel, therefore, at liberty to comment on it. Parliament was promised a total of seventy one new squadrons, making a total of 124 squadrons in the home defence force, by 31 March 1937. This was thought to be the minimum compatible with our safety. At the end of the last financial year our strength was fifty three squadrons, including auxiliary squadrons. Therefore, in the thirty two weeks which have passed since the financial year began we have added twenty eight squadrons - that is to say, less than one new squadron each week. In order to make the progress which Parliament was promised, in order to maintain the programme which was put forward as the minimum, we shall have to add forty three squadrons in the remaining twenty weeks, or over two squadrons a week. The rate at which new squadrons will have to be formed from now till the end of March will have to be nearly three times as fast as hitherto. I do not propose to analyse the composition of the eighty squadrons we now have, but the Minister, in his speech, used a suggestive expression, \'skeleton squadrons\' applying at least to a portion of them but even if every one of the eighty squadrons had an average strength of twelve aeroplanes, each fitted with war equipment, and the reserves upon which my right hon. Friend dwelt, we should only have a total of 960 first-line home-defence aircraft. What is the comparable German strength? I am not going to give an estimate and say that the Germans have not got more than a certain number, but I will take it upon myself to say that they most certainly at this moment have not got less than a certain number. Most certainly they have not got less than 1,500 first-line aeroplanes, comprised in not less than 130 or 140 squadrons, including auxiliary squadrons. It must also be remembered that Germany has not got in its squadrons any machine the design and construction of which is more than three years old. It must also be remembered that Germany has specialised in long-distance bombing aeroplanes and that her preponderance in that respect is far greater than any of these figures would suggest. We were promised most solemnly by the Government that air parity with Germany would be maintained by the home defence forces. At the present time, putting everything at the very best, we are, upon the figures given by the Minister for the Co-ordination of Defence, only about two-thirds as strong as the German Air Force, assuming that I am not very much under stating their present strength. How then does the First Lord of the Admiralty [Sir Samuel Hoare] think it right to say: On the whole, our forecast of the strength of other Air Forces proves to be accurate; on the other hand, our own estimates have also proved to be accurate. I am authorised to say that the position is satisfactory\'. I simply cannot understand it. Perhaps the Prime Minister will explain the position. I should like to remind the House that I have made no revelation affecting this country and that I have introduced no new fact in our air defence which does not arise from the figures given by the Minister and from the official estimates that have been published. What ought we to do? I know of only one way in which this matter can be carried further. The House ought to demand a Parliamentary inquiry. It ought to appoint six, seven or eight independent Members, responsible, experienced, discreet Members, who have some acquaintance with these matters and are representative of all parties, to interview Ministers and to find out what are, in fact, the answers to a series of questions; then to make a brief report to the House, whether of reassurance or of suggestion for remedying the shortcomings. That, I think, is what any Parliament worthy of the name would do in these circumstances. Parliaments of the past days in which the greatness of our country was abuilding would never have hesitated. They would have felt they could not discharge their duty to their constituents if they did not satisfy themselves that the safety of the country was being effectively maintained. The French Parliament, through its committees, has a very wide, deep knowledge of the state of national defence, and I am not aware that their secrets leak out in any exceptional way. There is no reason why our secrets should leak out in any exceptional way. It is because so many members of the French Parliament are associated in one way or another with the progress of the national defence that the French Government were induced to supply, six years ago, upward of £60,000,000 sterling to construct the Maginot Line of fortifications, when our Government was assuring them that wars were over and that France must not lag behind Britain in her disarmament. Even now I hope that Members of the House of Commons will rise above considerations of party discipline, and will insist upon knowing where we stand in a matter which affects our liberties and our lives. I should have thought that the Government, and above all the Prime Minister, whose load is so heavy, would have welcomed such a suggestion. Owing to past neglect, in the face of the plainest warnings, we have now entered upon a period of danger greater than has befallen Britain since the U-boat campaign was crushed; perhaps, indeed, it is a more grievous period than that, because at that time at least we were possessed of the means of securing ourselves and of defeating that campaign. Now we have no such assurance. The era of procrastination, of half-measures, of soothing and baffling expedients, of delays, is coming to its close. In its place we are entering a period of consequences. We have entered a period in which for more than a year, or a year and a half, the considerable preparations which are now on foot in Britain will not, as the Minister clearly showed, yield results which can be effective in actual fighting strength; while during this very period Germany may well reach the culminating point of her gigantic military preparations, and be forced by financial and economic stringency to contemplate a sharp decline, or perhaps some other exit from her difficulties. It is this lamentable conjunction of events which seems to present the danger of Europe in its most disquieting form. We cannot avoid this period; we are in it now. Surely, if we can abridge it by even a few months, if we can shorten this period when the German Army will begin to be so much larger than the French Army, and before the British Air Force has come to play its complementary part, we may be the architects who build the peace of the world on sure foundations. Two things, I confess, have staggered me, after a long Parliamentary experience, in these Debates. The first has been the dangers that have so swiftly come upon us in a few years, and have been transforming our position and the whole outlook of the world. Secondly, I have been staggered by the failure of the House of Commons to react effectively against those dangers. That, I am bound to say, I never expected. I never would have believed that we should have been allowed to go on getting into this plight, month by month and year by year, and that even the Government\'s own confessions of error would have produced no concentration of Parliamentary opinion and force capable of lifting our efforts to the level of emergency. I say that unless the House resolves to find out the truth for itself it will have committed an act of abdication of duty without parallel in its long history. \xa0 I listened with great pleasure to the speech of the Hon Member for Sparkbrook I found myself ready to respond to the appeal which he made that we should pool our opinions and efface differences as far as possible. Above all, I agree with him in his statement that the policy to declared, within a reasonably short time, by this country must be clear and precise, so that it can be understood, for good or ill, countries and all parties. Everyone remembers the controversy, which has dragged on for many years, about whether we could have stopped the Great War in 1914 if Sir Edward Grey had made plain declarations a week beforehand. I myself am of opinion that he did all that it was possible for him to do in the circumstances, and I doubt very much whether the event would have been averted even if he had made such a declaration. But still there is a weight of historic judgment piling up that in all these matters of international strife and danger it is most necessary that nations should declare plainly where they stand, and of all the nations which should so declare itself our country, with her insular characteristics still partially remaining to her, has an obligation to give a perfectly plain statement of what she will or will not do in certain contingencies when those contingencies approach the threshold of reality. Long delay would be harmful. Why should we assume that time is on our side? I know of nothing to convince me that if the evil forces now at work are suffered to feed upon their successes and upon their victims our task will be easier when finally we are all united. Not only do we need a clear declaration of the Government\'s policy, but we require to set to work to rally the whole country behind that declared policy, in order that there may not be shifts and changes, as well as that there may not be any doubt or hesitation. It will certainly be no easier for us to face the problems with which we are confronted a year hence than it is today. Indeed, we might easily delay resistance to a point where continued resistance and true collective security would become impossible. \xa0 The gravity of the event of the 11th of March cannot be exaggerated. Europe is confronted with a program of aggression, nicely calculated and timed, unfolding stage by stage, and there is only one choice open, not only to us, but to other countries who are unfortunately concerned-either to submit, like Austria, or else to take effective measures while time remains to ward off the danger and, if it cannot be warded off, to cope with it. Resistance will be hard, yet I am persuaded - and the Prime Minister\'s speech confirms me - that it is to this conclusion of resistance to overweening encroachment that His Majesty\'s Government will come, and the House of Commons will certainly sustain them in playing a great part in the effort to preserve the peace of Europe, and, if it cannot be preserved, to preserve the freedom of the nations of Europe. If we were to delay, if we were to go on waiting upon events for a considerable period, how much should we throw away of resources which are now available for our security and for the maintenance of peace? How many friends would be alienated, how many potential allies should we see go, one by one, down the grisly gulf, how many times would bluff succeed, until behind bluff ever-gathering forces had accumulated reality? Where shall we be two years hence, for instance, when the German Army will certainly be much larger than the French Army, and when all the small nations will have fled from Geneva to pay homage to the ever-waxing power of the Nazi system, and to make the best terms they can for themselves? \xa0 We cannot leave the Austrian question where it is. We await the further statement of the Government, but it is quite clear that we cannot accept as a final solution of the problem of Central Europe the event which occurred on March 11. The public mind has been concentrated upon the moral and sentimental aspects of the Nazi conquest of Austria-a small country brutally struck down, its Government scattered to the winds, the oppression of the Nazi party doctrine imposed upon a Catholic population and upon the working-classes of Austria and of Vienna, the hard ill-usage of persecution which indeed will ensue-which is probably in progress at the moment-of those who, this time last week, were exercising their undoubted political rights, discharging their duties faithfully to their own country. All this we see very clearly, but there are some things which I have not seen brought out in the public Press and which do not seem to be present in the public mind, and they are practical consideration of the utmost significance. \xa0 Vienna is the centre of all the communications of all the countries which formed the old Austro-Hungarian Empire, and of all the countries lying to the southeast of Europe. A long stretch of the Danube is now in German hands. This mastery of Vienna to Nazi Germany military and economic control of the whole of the communication of south-eastern Europe, by road, by river, and by rail. What is the effect of it what is called the balance of power, such as it is, and upon what is called the a word about this group of Powers called the Little Entente. Taken singly, the three countries of the Little Entente may be called Powers of the rank, but they are very vigorous States, and united they are a Great Power. They have hitherto been, and are still, united by the closest military agreement. Together they make the complement of a Great Power and of the military machinery of a Great Power. Rumania has the oil; Yugoslavia has the minerals and raw materials. Both have large armies; both are mainly supplied with munitions from Czechoslovakia. To English ears, the name of Czechoslovakia sounds outlandish. No doubt they are small democratic State, no doubt they have an army only two or three times as large as ours, no doubt they have a munitions supply only three times as great as that of Italy, but still they are a virile people; they have their treaty rights, they have a line of fortresses, and they have a strongly manifested will to live freely. \xa0 Czechoslovakia is at this moment isolated, both in the economic and in the military sense. Her trade outlet through Hamburg, which is based upon the Peace Treaty, can, of course, be closed at any moment. Now her communications by rail and river to the south, and after the south to the southeast, are liable to be severed at any moment. Her trade may be subjected to tolls of an absolutely strangling character. \xa0 Here is a country which was once the greatest manufacturing area in the old Austro-Hungarian Empire. It is now cut off, or may be cut off at once unless, out of these discussions which must follow, arrangements are made securing the communications of Czechoslovakia. You may be cut off at once from the sources of her raw material in Yugoslavia, and from the natural markets which she has established there. The economic life of this small State may be practically destroyed as a result of the act of violence which was perpetrated last Friday night. A wedge has been driven into the heart of what is called the Little Entente, this group of countries which have as much right to live in Europe unmolested as any of us have the right to live unmolested in our native land. \xa0 It would be too complicated to pursue the economic, military, and material reactions, apart from moral sentiments altogether, into the other countries. It would take too long, but the effects of what has happened now upon Rumania, upon Hungary, upon Bulgaria, upon Turkey, must be the subject of the closest possible study, not only by His Majesty\'s Government, but by all who aspire to take part in the public discussion of these matters. By what has happened it is not too much to say that Nazi Germany, in its present mood, if matters are left as they are, is in a position to dominate the whole of South-east Europe. Over an area inhabited perhaps by 200,000,000 of people Nazidom and all that it involves is moving on to absolute control. Therefore, I venture to submit to the House that this Nazi conquest of Austria cannot remain where it is, and that a patient, determined, persevering discussion of it ought to take place and to be pushed forward, first of all, no doubt, through the Chanceries and by the diplomatic channels, but also and ultimately it should be pushed forward in the natural place for such discussions at Geneva-under the League of Nations. We are not in a position to say tonight, "The past is the past." We cannot say, \'the past is the past," without surrendering the future. Therefore, we await further statements from His Majesty\'s Government with the greatest possible interest. \xa0 The serious nature of our affairs is realised and apprehended in all parts of the House. I have often been called an alarmist in the past, yet I affirm tonight that there is still, in my belief, an honourable path to safety and, I hope, to peace. What ought we to do? The Prime Minister today has made a declaration upon the subject of defence. There is to be a new effort of national rearmament and national service. We shall have to lay aside our easy habits and methods. We shall have to concentrate on securing our safety with something like the intensity that has been practised in other countries whose excesses we may desire to restrain. I think the House will be grateful to the Prime Minister for that declaration, and I am certain that he may rely upon all those strong forces in every party throughout the country to second the efforts of the Government to place us in a position where we shall not feel ourselves liable to be blackmailed out of our duties, out of our interests and out of our rights. \xa0 It seems to me quite clear that we cannot possibly confine ourselves only to a renewed effort at rearmament. I know that some of honourable friends on this side of the House will laugh when I offer them this advice. I say, "Laugh, but listen." I affirm that the Government should express in the strongest terms our adherence to the Covenant of the League of Nations and our resolve to procure by international action the reign of law in Europe. I agree entirely with what has been said by the Leaders of the two Opposition parties upon that subject; and I was extremely glad to notice that at the beginning and in the very forefront of his speech the Prime Minister referred to the League of Nations and made that one of the bases of our right to intervene and to be consulted upon affairs in Central Europe. The matter has an importance in this country. There must be a moral basis for British rearmament and British foreign policy. We must have that basis if we are to unite and inspire our people and procure their wholehearted action, and if we are to stir the English-speaking people throughout the world. \xa0 Our affairs have come to such a pass that there is no escape without running risks. On every ground of prudence as well as of duty I urge His Majesty\'s Government to proclaim a renewed, revivified, unflinching adherence to the Covenant of the League of Nations. What is there ridiculous about collective security? The only thing that is ridiculous about it is that we have not got it. Let us see whether we cannot do something to procure a strong element of collective security for ourselves and for others. We have been urged to make common cause in self-defence with the French Republic. What is that but the beginning of collective security? I agree with that. Not so lightly will the two great liberal democracies of the West be challenged, and not so easily, if challenged, will they be subjugated. That is the beginning of collective security. But why stop there? Why be edged and pushed farther down the slope in a disorderly expostulating crowd of embarrassed States. Why not make a stand while there is still a good company of united, very powerful countries that share our dangers and aspirations? Why should we delay until we are confronted with a general landslide of those small countries passing over, because they have no other choice, to the overwhelming power of the Nazi regime? \xa0 If a number of States were assembled around Great Britain and France in a solemn treaty for mutual defence against aggression; if they had their forces marshalled in what you may call a Grand Alliance; if they had their Staff arrangements concerted; if all this rested, as it can honourably rest, upon the Covenant of the League of Nations, in pursuance of all the purposes and ideals of the League of Nations; if that were sustained, as it would be, by the moral sense of the world; and if it were done in the year 1938-and, believe me, it may be the last chance there will be for doing it-then I say that you might even now arrest this approaching war. Then perhaps the curse which overhangs Europe would pass away. Then perhaps the ferocious passions which now grip a great people would turn inwards and not outwards in an internal rather than an external explosion, and mankind would be spared the deadly ordeal towards which we have been sagging and sliding month by month. I have ventured to indicate a positive conception, a practical and realistic conception, and one which I am convinced will unite all the forces of this country without whose help your armies cannot be filled or your munitions made. Before we cast away this hope, this cause and this plan, which I do not at all disguise has an element of risk, let those who wish to reject it ponder well and earnestly upon what will happen to us if, when all else has been thrown to the wolves, we are left to face our fate alone. O n September 29, 1938, Prime Minister Neville Chamberlain flew to Munich, Bavaria, Germany, to meet the German Chancellor, Adolf Hitler. He returned to London on October 1st waving the famous piece of paper which he proudly claimed contained the agreement pledging that Germany and Britain would never go to war again, thus guaranteeing "peace with honour." The public was overjoyed but Churchill, participating in the House of Commons debate on the resolution "that this house approves the policy of His Majesty\'s Government by which was averted in the recent crisis and supports their efforts to secure a lasting peace," charged that the Government had "sustained a total and unmitigated defeat," and that "a disaster of the first magnitude has befallen Great Britain and France." "And do not suppose this is the end," he warned. "This is only the beginning of the reckoning. This is only the first sip, the first foretaste of a bitter cup which will be proffered to us year by year unless by a supreme recovery of moral health and martial vigour, we arise again and take our stand for freedom as in olden time." Having thus fortified myself by the example of others, I will proceed to emulate them. I will, therefore, begin by saying the most unpopular and most unwelcome thing. I will begin by saying what everybody would like to ignore or forget but which I must nevertheless be stated, namely, that we have sustained a total and unmitigated defeat, and that France has suffered even more than we have . . . . We are in the presence of a disaster of the first magnitude which has\xa0 befallen Great Britain and France. Do not let us blind ourselves to that. It must now be accepted that all the countries of Central and Eastern Europe will make the best terms they can with the triumphant Nazi Power. The system of alliances in Central Europe upon which France has relied for her safety has been swept away, and I can see no means by which it can be reconstituted. The road down the Danube Valley to the black Sea, the resources of corn and oil, the road which leads as far as Turkey, has been opened. In fact, if not in form, it seems to me that all those countries of Middle Europe, all those Danubian countries, will, one after another, be drawn into this vast system of power politics - not only power military politics but power economic politics -- radiating from Berlin, and I believe this can be achieved quite smoothly and swiftly and will not necessarily entail the firing of a single shot.... I do not grudge our loyal, brave people, who were ready to do their duty no matter what the cost, who never flinched under the strain of last week. I do not grudge them the natural, spontaneous outburst of joy and relief when they learned that the hard ordeal would no longer be required of them at the moment; but they should know the truth. They should know that there has been gross neglect and deficiency in our defences; they should know that we have sustained a defeat without a war, the consequences of which will travel far with us along our road; they should know that we have passed an awful milestone in our history, when the whole equilibrium of Europe has been deranged, and that the terrible words have for the time being been pronounced against the Western democracies. "Thou are weighed in the balance and found wanting." And do not suppose that this is the end. This is only the beginning of the reckoning.This is only the first sip, the first foretaste of a bitter cup which will be proffered to us year by year unless by a supreme recovery of moral health and martial vigour, we arise again and take our stand for freedom as in the olden time.  I  cannot forecast to you the action of Russia. It is a riddle wrapped in a mystery inside an enigma; but perhaps there is a key. That key is Russian national interest. It cannot be in accordance with the interest of the safety of Russia that Germany should plant itself upon the shores of the Black Sea, or that it should overrun the Balkan States and subjugate the Slavonic peoples of south eastern Europe,\xa0 That would be contrary to the historic life-interests of Russia. Thus, my friends, at some risk of being proved wrong by events, I will proclaim tonight my conviction that the second great fact of the first month of the war is that Hitler, and all that Hitler stands for, have been and are being warned off the east and the southeast of Europe. Here I am in the same post as I was 25 years ago.\xa0 Rough times lie ahead; but how different is the scene from that of October, 1914! Then Russia had been laid low at Tannenberg; then the whole might of the Austro-Hungarian Empire was in the battle against us; then the brave, warlike Turks were about to join our enemies. Then we had to be ready night and day to fight a decisive sea battle\xa0 with a formidable German fleet almost, in many respects, the equal of our own. We faced those adverse conditions then; we have nothing worse to face tonight. We may be sure that the world will roll forward into broader destinies. We may remember the words of old John Bright, after the American Civil War was over, when he said to an audience of English working folk: "At last after the smoke of the battlefield had cleared away, the horrid shape which had cast its shadow over the whole continent had vanished and was gone forever".Everyone wonders what is happening about the war. For several months past the Nazis have been uttering ferocious threats of what they are going to do to the Western Democracies-to the British and French Empires-when once they set about them. But so far it is the small neutral States that are bearing the brunt of German malice and cruelty. Neutral ships are sunk without law or mercy-not only by the blind and wanton mine, but by the coldly considered, deliberately aimed, torpedo. The Dutch, the Belgians, the Danes, the Swedes, and, above all, the Norwegians, have their ships destroyed whenever they can be caught upon the high seas. It is only in the British and French convoys that safety is to be found. There, in those convoys, it is five-hundred-to-one against being sunk. There, controlling forces are at work which are steadily keeping the seas open, steadily keeping the traffic going, and establishing order and freedom of movement amid the waves of anarchy and sea-murder. \xa0 We, the aggrieved and belligerent Powers who are waging war against Germany, have no need to ask for respite. Every week our commerce grows; every month our organisation is improved and reinforced. We feel ourselves more confident day by day of our ability to police the seas and oceans and to keep open and active the salt-water highways by which we have; and along which we shall draw the means of victory. It seems pretty certain that half the U-boats with which Germany began the war have been sunk, and that their new building has fallen far behind what we expected. Our faithful Asdic detector smells them out in the depths of the sea and, with the potent aid of the Royal Air Force, I do not doubt that we shall break their strength and break their purpose. The magnetic mine, and all the other mines with which the narrow waters, the approaches to this Island, are strewn, do not present us with any problem which we deem insoluble. It must be remembered that in the last war we suffered very grievous losses from mines, and that at the climax more than six hundred British vessels were engaged solely upon the task of mine-sweeping. We must remember that. We must always be expecting some bad thing from Germany, but I will venture to say that it is with growing confidence that we await the further developments or variants of their attack. \xa0 Here we are, after nearly five months of all they can do against us on the sea, with the first U-boat campaign for the first time being utterly broken, with the mining menace in good control, with our shipping virtually undiminished, and with all the oceans of the world free from surface raiders. It is true that the Deutschland escaped the clutches of our cruisers by the skin of her teeth, but the Spee still sticks up in the harbour of Montevideo as a grisly monument and as a measure of the fate in store for any Nazi warship which dabbles in piracy on the broad waters. As you know, I have always-after some long and hard experience-spoken with the utmost restraint and caution about the war at sea, and I am quite sure that there are many losses and misfortunes which lie ahead of us there; but in all humility and self-questioning I feel able to declare that at the Admiralty, as, I have no doubt, at the French Ministry of Marine, things are not going so badly after all. Indeed, they have never gone so well in any naval war. We look forward as the months go by to establishing such a degree of safe sailings as will enable the commerce of all the nations whose ships accept our guidance, not only to live but to thrive. This part-this sea affair-at least, of the Nazi attack upon freedom is not going to bar the path of justice or of retribution. \xa0 Very different is the lot of the unfortunate neutrals. Whether on sea or on land, they are the victims upon whom Hitler\'s hate and spite descend. Look at the group of small but ancient and historic States which lie in the North; or look again at that other group of anxious peoples in the Balkans or in the Danube basin behind whom stands the resolute Turk. Every one of them is wondering which will be the next victim on whom the criminal adventurers of Berlin will cast their rending stroke. A German major makes a forced landing in Belgium with plans for the invasion of that country whose neutrality Germany has so recently promised to respect. In Rumania there is deep fear lest by some deal between Moscow and Berlin they may become the next object of aggression. German intrigues are seeking to undermine the newly strengthened solidarity of the southern Slavs. The hardy Swiss arm and man their mountain passes. The Dutch-whose services to European freedom will be remembered long after the smear of Hitler has been wiped from the human path-stand along their dykes, as they did against the tyrants of bygone days. All Scandinavia dwells brooding under Nazi and Bolshevik threats. \xa0 Only Finland-superb, nay, sublime-in the jaws of peril-Finland shows what free men can do. The service rendered by Finland to mankind is magnificent. They have exposed, for all the world to see, the military incapacity of the Red Army and of the Red Air Force. Many illusions about Soviet Russia have been dispelled in these few fierce weeks of fighting in the Arctic Circle. Everyone can see how Communism rots the soul of a nation; how it makes it abject and hungry in peace, and proves it base and abominable in war. We cannot tell what the fate of Finland may be, but no more mournful spectacle could be presented to what is left to civilised mankind than that this splendid Northern race should be at last worn down and reduced to servitude worse than death by the dull brutish force of overwhelming numbers. If the light of freedom which still burns so brightly in the frozen North should be finally quenched, it might well herald a return to the Dark Ages, when every vestige of human progress during two thousand years would be engulfed. \xa0 But what would happen if all these neutral nations I have mentioned - and some others I have not mentioned-were with one spontaneous impulse to do their duty in accordance with the Covenant of the League, and were to stand together with the British and French Empires against aggression and wrong? At present their plight is lamentable; and it will become much worse. They bow humbly and in fear to German threats of violence, comforting themselves meanwhile with the thought that the Allies will win, that Britain and France will strictly observe all the laws and conventions, and that breaches of these laws are only to be expected from the German side. Each one hopes that if he feeds the crocodile enough, the crocodile will eat him last. All of them hope that the storm will pass before their turn comes to be devoured. But I fear-I fear greatly-the storm will not pass. It will rage and it will roar, ever more loudly, ever more widely. It will spread to the South; it will spread to the North. There is no chance of a speedy end except through united action; and if at any time Britain and France, wearying of the struggle, were to make a shameful peace, nothing would remain for the smaller States of Europe, with their shipping and their possessions, but to be divided between the opposite, though similar, barbarisms of Nazidom and Bolshevism. \xa0 The one thing that will be most helpful in determining the action of neutrals is their increasing sense of the power and resolution of the Western Allies. These small States are alarmed by the fact that the German armies are more numerous, and that their Air Force is still more numerous, and also that both are nearer to them than the forces of Great Britain and France. Certainly it is true that we are facing numerical odds; but that is no new thing in our history. Very few wars have been won by mere numbers alone. Quality, will power, geographical advantages, natural and financial resources, the command of the sea, and, above all, a cause which rouses the spontaneous surgings of the human spirit in millions of hearts-these have proved to be the decisive factors in the human story. If it were otherwise, how would the race of men have risen above the apes; how otherwise would they have conquered and extirpated dragons and monsters; how would they have ever evolved the moral theme; how would they have marched forward across the centuries to broad conceptions of compassion, of freedom, and of right? How would they ever have discerned those beacon lights which summon and guide us across the rough dark waters, and presently will guide us across the flaming lines of battle towards better days which lie beyond? \xa0 Numbers do not daunt us. But judged even by the test of numbers we have no reason to doubt that once the latent, and now rapidly growing, power of the British nation and Empire are brought, as they must be, and as they will be, fully into line with the magnificent efforts of the French Republic, then, even in mass and in weight, we shall not be found wanting. When we look behind the brazen fronts of Nazidom - as we have various means of doing-we see many remarkable signs of psychological and physical disintegration. We see the shortages of raw materials which already begin to hamper both the quality and the volume of their war industry. We feel the hesitancy of divided counsels, and the pursuing doubts which assail and undermine those who count on force and force alone. \xa0 In the bitter and increasingly exacting conflict which lies before us we are resolved to keep nothing back, and not to be outstripped by any in service to the common cause. Let the great cities of Warsaw, of Prague, of Vienna banish despair even in the midst of their agony. Their liberation is sure. The day will come when the joybells will ring again throughout Europe, and when victorious nations, masters not only of their foes but of themselves, will plan and build in justice, in tradition, and in freedom a house of many mansions where there will be room for all. On Friday evening last I received His Majesty\'s Commission to form a new administration. It was the evident wish and will of Parliament and the nation that this should be conceived on the broadest possible basis and that it should include all parties, both those that supported the late Government and also the parties of the Opposition. I have completed most important part of this task. A War Cabinet has been formed of five Members, representing, with the Opposition Liberals the unity of the nation.The three party leaders have agreed to serve, either in the War Cabinet or in high executive office. The three Fighting Services have been filled. It was necessary that this should be done in one single day on account of the extreme and rigour of events. A number of other key positions were filled yesterday, and I am submitting a further list to His Majesty tonight. I hope to complete the appointment of the principal Ministers during tomorrow. The appointment of the other Ministers usually takes a little longer, but I trust that when Parliament meets again this part of my task will be completed and that the administration will be complete in all respects. I considered it in the public interest to suggest that the House should be summoned to meet today. Mr Speaker agreed, and took the necessary steps, in accordance with the powers conferred upon him by the Resolution of the House. At the end of the proceedings today , the Adjournment of the House will be proposed until Tuesday, 21st May, with of course, provision for the an earlier meeting if need be. The business to be considered during that week will be notified to members at the earliest opportunity. I now invite the House, by the Resolution which stands in my name, to record its approval of the steps taken and to declare its confidence in the new Government. To form a new Administration of this scale and complexity is a serious undertaking in itself, but it must be remembered that we are at the preliminary stage of one of the greatest battles in history, that we are in action at many points in Norway, and in Holland, that we have to be prepared in the Mediterranean, that the air battle is continuous and that many, preparations have to be made here at home. In this crisis I hope I may be pardoned if I do not address the House at any length today. I hope that any of my friends and colleagues, or former colleagues, who are affected by the political reconstruction, will make all allowance for for lack of ceremony with which it has been necessary to act. I would say to the House, as I said to those who have joined the Government; \'I have nothing to offer but blood toil tears and sweat\'. We have before us an ordeal of the most grievous kind, We have before us many, many long months of struggle and of suffering. You ask, what is our policy? I will say: It is to wage war, by sea, land and air, with all our might and with all the strength that God can give us: to wage war against a monstrous tyranny, never surpassed in the dark, lamentable catalogue of human crime. That is our policy. You ask, What is our aim? I can answer in one word: Victory - victory - at all costs, victory, in spite of all terror, victory, however long and hard the road may be; for without victory, there is no survival. Let that be realised; no survival for the British Empire; no survival for all that the British Empire has stood for, no survival for the urge and impulse of the ages, that mankind will move forward towards its goal. But I take up my task with buoyancy and hope. I feel sure that our cause will not be suffered to fail among men. At this time I feel entitled to claim the aid of all, and I say, \'Come, then, let us go forward together with our united strength.\' I SPEAK TO YOU FOR THE FIRST time as Prime Minister in a solemn hour for the life of our country, of our Empire, of our Allies, and above all the cause of freedom. A tremendous battle is raging in France and Flanders.The Germans, by a remarkable combination of air bombing and heavily armoured attacks have broken through the French defences north of the Maginot Line and strong columns of their armoured vehicles are ravaging the open country, which for the first day or two was without defenders. They have penetrated deeply and spread alarm and confusion in their trick. Behind them there are now appearing infantry in lorries, and behind them, again, the large masses are moving forward. The regroupment of the French armies to make head against, and also to strike at, this intruding wedge has been proceeding for several days, largely assisted by the magnificent efforts of the Royal Air Force. We must not allow ourselves to be intimidated by the presence of these armoured -vehicles in unexpected places behind our lines. If they are behind our Front, the French are also at many points fighting actively behind theirs. Both sides are therefore in an extremely dangerous position. And if the French Army, and our own Army are well handled, as I believe they will be; if the French retain that genius for recovery, and counterattack for which they have so long been famous; and if the British Army shows the dogged endurance and solid fighting power of of which there have been so many examples in the past - then a sudden transformation of the scene might spring into being. It would be foolish, however to disguise the gravity of the hour. It would be still more foolish to lose heart and courage or to suppose that well-trained and well-equipped armies numbering three to four millions of men can be overcome in the space of a few, weeks, or even months, by a scoop, or raid of mechanised vehicles, however formidable. We may look with confidence to the stablisization of the Front in France, and to the general engagement of the masses which will enable the qualities of the the French and British soldiers to to be matched squarely against those of their adversaries. For myself, I have the invincible confidence in the French Army and its leaders. Only a very small part of that Army has yet been heavily engaged; and only a very small part of France has yet been invaded. There is good evidence to show that practically the whole of the specialised mechanised forces of the enemy have already been thrown into the battle; and we know that very heavy losses have been inflicted upon them. No officer or man, no brigade or division,which grapples at close quarters with the enemy, wherever encountered, can fail to make a worthy contribution to the general result. The armies by cast away the idea of resisting behind concrete lines or natural obstacles, and must realise that mastery can only be regained by furious and unrelenting assault. And this spirit must not only animate the High Command, but must inspire every fighting man. In the air - often at serious odds - often at odds hitherto thought overwhelming - we have been clawing down three or four to one of our enemies; and the relative balance of the British and German Air Forces is now considerably more favourable to us than at the beginning of the battle. In cutting down the German bombers, we are fighting our battle as well as that of France. My confidence in our ability to fight it out to the finish with the German Air force has been strengthened by the fierce encounters which have taken place and are taking place. At the same time our heavy bombers are striking nightly at the tap root of German mechanised power, and have already inflicted serious damage upon the oil refineries which the Nazi effort to dominate the world directly depends. We must expect that as soon as stability is reached on the Western Front, the bulk of that hideous apparatus of aggression which gashed Holland into ruin and slavery in a few days, will be turned upon us. I am sure I speak for all when I say we are ready to face it; to endure it; and to retaliate against it - to any extant that the unwritten laws of war permit. There will be, many men, and many women, in this island, who when the ordeal comes upon them, as come it will, will feel comfort, and even pride - that they are sharing the perils of the lads at the front - soldiers, sailors and airmen, God bless them - and are drawing away from them a part at least of the onslaught they have to bear. Is this not the appointed time for all to make the utmost exertions in their power? If the battle is to be won, we must provide our men with ever increasing quantities of weapons and ammunition they need. We must have, and have quickly, more aeroplanes, more tanks, more shells, more guns. There is an imperious need for these munitions. They increase our strength against the powerfully armed enemy. They replace the wastage of obstinate struggle; and the knowledge that wastage will be speedily be replaced enables us to draw more readily upon our reserves and throw them in now that everything counts so much. Our task is not only to win the battle - but to win the War. After this battle in France abates its force, there will come the battle for our island - for all that Britain is, and all that Britain means - that will be the struggle. In that supreme emergency we shall not hesitate to take every step, even the most drastic, to call forth from our people, the last ounce and the last inch of effort they are capable. The interests of property, the hours of labour, are nothing compared with the struggle for life and honour, for right and freedom, to which we have vowed ourselves. I have received from the Chiefs of the French Republic, and in particular from its indomitable Prime Minister, M Reynaud, the most sacred pledges that whatever happens they will fight to the end, be it bitter or be it glorious. Nay, if we fight to the end, it can only be glorious. Having received His Majesty\'s commission, I have formed an administration of men and women of every party and of almost every point of view. We have differed and quarrelled in the past; but now one bond unites us all - to wage war until victory is won, and never to surrender ourselves to servitude and shame, whatever the cost and agony may be. This is one of the most awe-striking periods in the long history of France and Britain. It is also beyond doubt the most sublime. Side by side, unaided except by their kith and kin in the great Dominions and by the wide Empires which rest beneath their shield, the British and French peoples have advanced to rescue not only Europe, but mankind from the foulest and most soul-destroying tyranny which has ever darkened and stained the pages of history. Behind them - behind us - behind the armies and fleets of Britain and France - gather a group of shattered States and bludgeoned races: the Czechs, the Poles, the Norwegians, the Danes, the Dutch, the Belgians - upon all of whom the long night of barbarism will descend, unbroken even by a star of hope, unless we conquer, as conquer we must; as conquer we shall. Today is Trinity Sunday. Centuries ago words were written to be a call and a spur to the faithful servants of Truth and Justice: \'Arm yourselves, and be ye men of valour, and be in readiness for the conflict; for it is better for us to perish in battle than to look upon the outrage of our nation and our altar. As the Will of God is in Heaven, even so let it be.\' The position of the B.E.F had now become critical As a result of a most skilfully conducted retreat and German errors, the bulk of the British Forces reached the Dunkirk bridgehead. The peril facing the British nation was now suddenly and universally perceived. On May 26, "Operation Dynamo "--the evacuation from Dunkirk began. The seas remained absolutely calm. The Royal Air Force--bitterly maligned at the time by the Army--fought vehemently to deny the enemy the total air supremacy which would have wrecked the operation. At the outset, it was hoped that 45,000 men might be evacuated; in the event, over 338,000 Allied troops reached England, including 26,000 French soldiers. On June 4, Churchill reported to the House of Commons, seeking to check the mood of national euphoria and relief at the unexpected deliverance, and to make a clear appeal to the United States. From the moment that the French defences at Sedan and on the Meuse were broken at the end of the second week of May, only a rapid retreat to Amiens and the south could have saved the British and French Armies who had entered Belgium at the appeal of the Belgian King; but this strategic fact was not immediately realised. The French High Command hoped they would be able to close the gap, and the Armies of the north were under their orders. Moreover, a retirement of this kind would have involved almost certainly the destruction of the fine Belgian Army of over 20 divisions and the abandonment of the whole of Belgium. Therefore, when the force and scope of the German penetration were realised and when a new French Generalissimo, General Weygand, assumed command in place of General Gamelin, an effort was made by the French and British Armies in Belgium to keep on holding the right hand of the Belgians and to give their own right hand to a newly created French Army which was to have advanced across the Somme in great strength to grasp it. However, the German eruption swept like a sharp scythe around the right and rear of the Armies of the north. Eight or nine armoured divisions, each of about four hundred armoured vehicles of different kinds, but carefully assorted to be complementary and divisible into small self-contained units, cut off all communications between us and the main French Armies. It severed our own communications for food and ammunition, which ran first to Amiens and afterwards through Abbeville, and it shore its way up the coast to Boulogne and Calais, and almost to Dunkirk. Behind this armoured and mechanised onslaught came a number of German divisions in lorries, and behind them again there plodded comparatively slowly the dull brute mass of the ordinary German Army and German people, always so ready to be led to the trampling down in other lands of liberties and comforts which they have never known in their own. I have said this armoured scythe-stroke almost reached Dunkirk-almost but not quite. Boulogne and Calais were the scenes of desperate fighting. The Guards defended Boulogne for a while and were then withdrawn by orders from this country. The Rifle Brigade, the 60th Rifles, and the Queen Victoria\'s Rifles, with a battalion of British tanks and 1,000 Frenchmen, in all about four thousand strong, defended Calais to the last. The British Brigadier was given an hour to surrender. He spurned the offer, and four days of intense street fighting passed before silence reigned over Calais, which marked the end of a memorable resistance. Only 30 unwounded survivors were brought off by the Navy, and we do not know the fate of their comrades. Their sacrifice, however, was not in vain. At least two armoured divisions, which otherwise would have been turned against the British Expeditionary Force, had to be sent to overcome them. They have added another page to the glories of the light divisions, and the time gained enabled the Graveline water lines to be flooded and to be held by the French troops. Thus it was that the port of Dunkirk was kept open. When it was found impossible for the Armies of the north to reopen their communications to Amiens with the main French Armies, only one choice remained. It seemed, indeed, forlorn. The Belgian, British and French Armies were almost surrounded. Their sole line of retreat was to a single port and to its neighbouring beaches. They were pressed on every side by heavy attacks and far outnumbered in the air. When, a week ago today, I asked the House to fix this afternoon as the occasion for a statement, I feared it would be my hard lot to announce the greatest military disaster in our long history. I thought-and some good judges agreed with me-that perhaps 20,000 or 30,000 men might be re-embarked. But it certainly seemed that the whole of the French First Army and the whole of the British Expeditionary Force north of the Amiens-Abbeville gap would be broken up in the open field or else would have to capitulate for lack of food and ammunition. These were the hard and heavy tidings for which I called upon the House and the nation to prepare themselves a week ago. The whole root and core and brain of the British Army,on which and around which we were to build, and are to build, the great British Armies in the later years of the war, seemed about to perish upon the field or to be led into an ignominious and starving capacity. That was the prospect a week ago. But another blow which might well have proved final was yet to fall upon us. The King of the Belgians had called upon us to come to his aid. Had not this Ruler and his Government severed themselves from the Allies, who rescued their country from extinction in the late war, and had they not sought refuge in what was proved to be a fatal neutrality, the French and British Armies might well at the outset have saved not only Belgium but perhaps even Poland. Yet at the last moment, when Belgium was already invaded, King Leopard called upon us to come to his aid, and even at the last moment we came. He and his brave, efficient Army, nearly half a million strong, guarded our left flank and thus kept open our only line of retreat to the sea. Suddenly, without prior consultation, with the least possible notice, without the advice of his Ministers and upon his own personal act, he sent a plenipotentiary to the German Command, surrendered his Army, and exposed our whole flank and means of retreat. I asked the House a week ago to suspend its judgment because the facts were not clear, but I do not feel that any reason now exists why we should not form our own opinions upon this pitiful episode. The surrender of the Belgian Army compelled the British at the shortest notice to cover a flank to the sea more than 30 miles in length. Otherwise all would have been cut off, and all would have shared the fate to which King Leopold had condemned the finest Army his country had ever formed. So in doing this and in exposing this flank, as anyone who followed the operations on the map will see, contact was lost between the British and two out of the three corps forming the First French Army, who were still farther from the coast than we were, and it seemed impossible that any large number of Allied troops could reach the coast. The enemy attacked on all sides with great strength and fierceness, and their main power, the power of their far more numerous Air Force, was thrown into the battle or else concentrated upon Dunkirk and the beaches. Pressing in upon the narrow exit, both from the east and from the west, the enemy began to fire with cannon upon the beaches by which alone the shipping could approach or depart. They sowed magnetic mines in the channels and seas; they sent repeated waves of hostile aircraft, sometimes more than a hundred strong in one formation, to cast their bombs upon the single pier that remained, and upon the sand dunes upon which the troops had their eyes for shelter. Their U-boats, one of which was sunk, and their motor launches took their toll of the vast traffic which now began. For four or five days an intense struggle reigned. All their armoured divisions-or what Was left of them-together with great masses of infantry and artillery, hurled themselves in vain upon the ever-narrowing, ever-contracting appendix within which the British and French Armies fought. Meanwhile, the Royal Navy, with the willing help of countless merchant seamen, strained every nerve to embark the British and Allied troops; 220 light warships and 650 other vessels were engaged. They had to operate upon the difficult coast, often in adverse weather, under an almost ceaseless hail of bombs and an increasing concentration of artillery fire. Nor were the seas, as I have said, themselves free from mines and torpedoes. It was in conditions such as these that our men carried on, with little or no rest, for days and nights on end, making trip after trip across the dangerous waters, bringing with them always men whom they had rescued. The numbers they have brought back are the measure of their devotion and their courage. The hospital ships, which brought off many thousands of British and French wounded, being so plainly marked were a special target for Nazi bombs; but the men and women on board them never faltered in their duty. Meanwhile, the Royal Air Force, which had already been intervening in the battle, so far as its range would allow, from home bases, now used part of its main metropolitan fighter strength, and struck at the German bombers and at the fighters which in large numbers protected them. This struggle was protracted and fierce. Suddenly the scene has cleared, the crash and thunder has for the moment-but only for the moment-died away. A miracle of deliverance, achieved by valour, by perseverance, by perfect discipline, by faultless service, by resource, by skill, by unconquerable fidelity, is manifest to us all. The enemy was hurled back by the retreating British and French troops. He was so roughly handled that he did not hurry their departure seriously. The Royal Air Force engaged the main strength of the German Air Force, and inflicted upon them losses of at least four to one; and the Navy, using nearly 1,000 ships of all kinds, carried over 335,000 men, French and British, out of the jaws of death and shame, to their native land and to the tasks which lie immediately ahead. We must be very careful not to assign to this deliverance the attributes of a victory. Wars are not won by evacuations. But there was a victory inside this deliverance, which should be noted. It was gained by the Air Force. Many of our soldiers coming back have not seen the Air Force at work; they saw only the bombers which escaped its protective attack. They underrate its achievements. I have heard much talk of this; that is why I go out of my way to say this. I will tell you about it. This was a great trial of strength between the British and German Air Forces. Can you conceive a greater objective for the Germans in the air than to make evacuation from these beaches impossible, and to sink all these ships which were displayed, almost to the extent of thousands? Could there have been an objective of greater military importance and significance for the whole purpose of the war than this? They tried hard, and they were beaten back; they were frustrated in their task. We got the Army away; and they have paid fourfold for any losses which they have inflicted. Very large formations of German aeroplanes-and we know that they are a very brave race-have turned on several occasions from the attack of one-quarter of their number of the Royal Air Force, and have dispersed in different directions. Twelve aeroplanes have been hunted by two. One aeroplane was driven into the water and cast away by the mere charge of a British aeroplane, which had no more ammunition. All of our types-the Hurricane, the Spitfire and the new Defiant-and all our pilots have been vindicated as superior to what they have at present to face. When we consider how much greater would be our advantage in defending the air above this Island against an overseas attack, I must say that I find in these facts a sure basis upon which practical and reassuring thoughts may rest. I will pay my tribute to these young airmen. The great French Army was very largely, for the time being, cast back and disturbed by the onrush of a few thousands of armoured vehicles. May it not also be that the cause of civilisation itself will be defended by the skill and devotion of a few thousand airmen? There never has been, I suppose, in all the world, in all the history of war, such an opportunity for youth. The Knights of the Round Table, the Crusaders, all fall back into the past-not only distant but prosaic; these young men, going forth every morn to guard their native land and all that we stand for, holding in their hands these instruments of colossal and shattering power, of whom it may be said that Every morn brought forth a noble chance And every chance brought forth a noble knight, deserve our gratitude, as do all the brave men who, in so many ways and on so many occasions, are ready, and continue ready to give life and all for their native land. I return to the Army. In the long series of very fierce battles, now on this front, now on that, fighting on three fronts at once, battles fought by two or three divisions against an equal or somewhat larger number of the enemy, and fought fiercely on some of the old grounds that so many of us knew so well-in these battles our losses in men have exceeded 30,000 killed, wounded and missing. I take occasion to express the sympathy of the House to all who have suffered bereavement or who are still anxious. The President of the Board of Trade [Sir Andrew Duncan] is not here today. His son has been killed, and many in the House have felt the pangs of affliction in the sharpest form. But I will say this about the missing: We have had a large number of wounded come home safely to this country, but I would say about the missing that there may be very many reported missing who will come back home, some day, in one way or another. In the confusion of this fight it is inevitable that many have been left in positions where honour required no further resistance from them. Against this loss of over 30,000 men, we can set a far heavier loss certainly inflicted upon the enemy. But our losses in material are enormous. We have perhaps lost one-third of the men we lost in the opening days of the battle of 21st March, 1918, but we have lost nearly as many guns -- nearly one thousand-and all our transport, all the armoured vehicles that were with the Army in the north. This loss will impose a further delay on the expansion of our military strength. That expansion had not been proceeding as far as we had hoped. The best of all we had to give had gone to the British Expeditionary Force, and although they had not the numbers of tanks and some articles of equipment which were desirable, they were a very well and finely equipped Army. They had the first-fruits of all that our industry had to give, and that is gone. And now here is this further delay. How long it will be, how long it will last, depends upon the exertions which we make in this Island. An effort the like of which has never been seen in our records is now being made. Work is proceeding everywhere, night and day, Sundays and week days. Capital and Labour have cast aside their interests, rights, and customs and put them into the common stock. Already the flow of munitions has leaped forward. There is no reason why we should not in a few months overtake the sudden and serious loss that has come upon us, without retarding the development of our general programme. Nevertheless, our thankfulness at the escape of our Army and so many men, whose loved ones have passed through an agonising week, must not blind us to the fact that what has happened in France and Belgium is a colossal military disaster. The French Army has been weakened, the Belgian Army has been lost, a large part of those fortified lines upon which so much faith had been reposed is gone, many valuable mining districts and factories have passed into the enemy\'s possession, the whole of the Channel ports are in his hands, with all the tragic consequences that follow from that, and we must expect another blow to be struck almost immediately at us or at France. We are told that Herr Hitler has a plan for invading the British Isles. This has often been thought of before. When Napoleon lay at Boulogne for a year with his flat-bottomed boats and his Grand Army, he was told by someone. "There are bitter weeds in England." There are certainly a great many more of them since the British Expeditionary Force returned. The whole question of home defence against invasion is, of course, powerfully affected by the fact that we have for the time being in this Island incomparably more powerful military forces than we have ever had at any moment in this war or the last. But this will not continue. We shall not be content with a defensive war. We have our duty to our Ally. We have to reconstitute and build up the British Expeditionary Force once again, under its gallant Commander-in-Chief, Lord Gort. All this is in train; but in the interval we must put our defences in this Island into such a high state of organisation that the fewest possible numbers will be required to give effective security and that the largest possible potential of offensive effort may be realised. On this we are now engaged. It will be very convenient, if it be the desire of the House, to enter upon this subject in a secret Session. Not that the government would necessarily be able to reveal in very great detail military secrets, but we like to have our discussions free, without the restraint imposed by the fact that they will be read the next day by the enemy; and the Government would benefit by views freely expressed in all parts of the House by Members with their knowledge of so many different parts of the country. I understand that some request is to be made upon this subject, which will be readily acceded to by His Majesty\'s Government. We have found it necessary to take measures of increasing stringency, not only against enemy aliens and suspicious characters of other nationalities, but also against British subjects who may become a danger or a nuisance should the war be transported to the United Kingdom. I know there are a great many people affected by the orders which we have made who are the passionate enemies of Nazi Germany. I am very sorry for them, but we cannot, at the present time and under the present stress, draw all the distinctions which we should like to do. If parachute landings were attempted and fierce fighting attendant upon them followed, these unfortunate people would be far better out of the way, for their own sakes as well as for ours. There is, however, another class, for which I feel not the slightest sympathy. Parliament has given us the powers to put down Fifth Column activities with a strong hand, and we shall use those powers subject to the supervision and correction of the House, without the slightest hesitation until we are satisfied, and more than satisfied, that this malignancy in our midst has been effectively stamped out. Turning once again, and this time more generally, to the question of invasion, I would observe that there has never been a period in all these long centuries of which we boast when an absolute guarantee against invasion, still less against serious raids, could have been given to our people. In the days of Napoleon the same wind which would have carried his transports across the Channel might have driven away the blockading fleet. There was always the chance, and it is that chance which has excited and befooled the imaginations of many Continental tyrants. Many are the tales that are told. We are assured that novel methods will be adopted, and when we see the originality of malice, the ingenuity of aggression, which our enemy displays, we may certainly prepare ourselves for every kind of novel stratagem and every kind of brutal and treacherous manoeuvre. I think that no idea is so outlandish that it should not be considered and viewed with a searching, but at the same time, I hope, with a steady eye. We must never forget the solid assurances of sea power and those which belong to air power if it can be locally exercised. I have, myself, full confidence that if all do their duty, if nothing is neglected, and if the best arrangements are made, as they are being made, we shall prove ourselves once again able to defend our Island home, to ride out the storm of war, and to outlive the menace of tyranny, if necessary for years, if necessary alone. At any rate, that is what we are going to try to do. That is the resolve of His Majesty\'s Government-every man of them. That is the will of Parliament and the nation. The British Empire and the French Republic, linked together in their cause and in their need, will defend to the death their native soil, aiding each other like good comrades to the utmost of their strength. Even though large tracts of Europe and many old and famous States have fallen or may fall into the grip of the Gestapo and all the odious apparatus of Nazi rule, we shall not flag or fail. We shall go on to the end, we shall fight in France, we shall fight on the seas and oceans, we shall fight with growing confidence and growing strength in the air, we shall defend our Island, whatever the cost may be, we shall fight on the beaches, we shall fight on the landing grounds, we shall fight in the fields and in the streets, we shall fight in the hills; we shall never surrender, and even if, which I do not for a moment believe, this Island or a large part of it were subjugated and starving, then our Empire beyond the seas, armed and guarded by the British Fleet, would carry on the struggle, until, in God\'s good time, the New World, with all its power and might, steps forth to the rescue and the liberation of the old. During June and early July, the German Air Force was regrouped to open the vital first stage of "Operation Sea Lion" (the invasion of Britain) by destroying the Royal Air Force. The Battle of Britain began on July 10. During the last fortnight the British Navy, in addition to blockading what is left of the German Fleet and chasing the Italian Fleet, has had imposed upon it the sad duty of putting effectually out of action for the duration of the war the capital ships of the French Navy. These, under the Armistice terms, signed in the railway coach at Compiegne, would have been placed within the power of Nazi Germany. The transference of these ships to Hitler would have endangered the security of both Great Britain and the United States. We therefore had no choice but to act as we did, and to act forthwith. Our painful task is now complete. Although the unfinished battleship, the Jean Bart, still rests in a Moroccan harbour and there are a number of French warships at Toulon and in various French ports all over the world, these are not in a condition or of a character to derange our preponderance of naval power. As long, therefore, as they make no attempt to return to ports controlled by Germany or Italy, we shall not molest them in any way. That melancholy phase in our relations with France has, so far as we are concerned, come to an end. Let us think rather of the future. Today is the fourteenth of July, the national festival of France. A year ago in Paris I watched the stately parade down the Champs Elysees of the French Army and the French empire. Who can foresee what the course of other years will bring? Faith is given to us to help and comfort us when we stand in awe before the unfurling scroll of human destiny. And I proclaim my faith that some of us will live to see a fourteenth of July when a liberated France will once again rejoice in her greatness and in her glory, and once again stand forward as the champion of the freedom and the rights of man. When the day dawns, as dawn it will, the soul of France will turn with comprehension and with kindness to those Frenchmen and Frenchwomen, wherever they may be, who in the darkest hour did not despair of the Republic. In the meantime, we shall not waste our breath nor encumber our thought with reproaches. When you have a friend and comrade at whose side you have faced tremendous struggles, and your friend is smitten down by a stunning blow, it may be necessary to make sure that the weapon that has fallen from his hands shall not be added to the resources of your common enemy. But you need not bear malice because of your friend\'s cries of delirium and gestures of agony. You must not add to his pain; you must work for his recovery. The association of interest between Britain and France remains. The cause remains. Duty inescapable remains. So long as our pathway to victory is not impeded, we are ready to discharge such offices of good will toward the French Government as may be possible, and to foster the trade and help the administration of those parts of the great French Empire which are now cut off from captive France, but which maintain their freedom. Subject to the iron demands of the war which we are now waging against Hitler and all his works, we shall try so to conduct ourselves that every true French heart will beat and glow at the way we carry on the struggle; and that not only France, but all the oppressed countries in Europe may feel that each British victory is a step towards the liberation of the Continent from the foulest thralldom into which it has ever been cast. All goes to show that the war will be long and hard. No one can tell where it will spread. One thing is certain: the peoples of Europe will not be ruled for long by the Nazi Gestapo, nor will the world yield itself to Hitler\'s gospel of hatred, appetite and domination. And now it has come to us to stand alone in the breach, and face the worst that the tyrant\'s might and enmity can do. Bearing ourselves humbly before God, but conscious that we serve an unfolding purpose, we are ready to defend our native land against the invasion by which it is threatened. We are fighting by ourselves alone; but we are not fighting for ourselves alone. Here in this strong City of Refuge which enshrines the title-deeds of human progress and is of deep consequence to Christian civilisation; here, girt about by the seas and oceans where the Navy reigns; shielded from above by the prowess and devotion of our airmen-we await undismayed the impending assault. Perhaps it will come tonight. Perhaps it will come next week. Perhaps it will never come. We must show ourselves equally capable of meeting a sudden violent shock or-what is perhaps a harder test-a prolonged vigil. But be the ordeal sharp or long, or both, we shall seek no terms, we shall tolerate no parley; we may show mercy-we shall ask for none. I can easily understand how sympathetic onlookers across the Atlantic, or anxious friends in the yet-unravished countries of Europe, who cannot measure our resources or our resolve, may have feared for our survival when they saw so many States and kingdoms torn to pieces in a few weeks or even days by the monstrous force of the Nazi war machine. But Hitler has not yet been withstood by a great nation with a will power the equal of his own. Many of these countries have been poisoned by intrigue before they were struck down by violence. They have been rotted from within before they were smitten from without. How else can you explain what has happened to France?-to the French Army, to the French people, to the leaders of the French people? But here, in our Island, we are in good health and in good heart. We have seen how Hitler prepared in scientific detail the plans for destroying the neighbour countries of Germany. He had his plans for Poland and his plans for Norway. He had his plans for Denmark. He had his plans all worked out for the doom of the peaceful, trustful Dutch; and, of course, for the Belgians. We have seen how the French were undermined and overthrown. We may therefore be sure that there is a plan-perhaps built up over years-for destroying Great Britain, which after all has the honour to be his main and foremost enemy. All I can say is that any plan for invading Britain which Hitler made two months ago must have had to be entirely recast in order to meet our new position. Two months ago-nay, one month ago-our first and main effort was to keep our best Army in France. All our regular troops, all our output of munitions, and a very large part of our Air Force, had to be sent to France and maintained in action there. But now we have it all at home. Never before in the last war-or in this-have we had in this Island an Army comparable in quality, equipment or numbers to that which stands here on guard tonight. We have a million and a half men in the British Army under arms tonight, and every week of June and July has seen their organisation, their defences and their striking power advance by leaps and bounds. No praise is too high for the officers and men-aye, and civilians-who have made this immense transformation in so short a time. Behind these soldiers of the regular Army, as a means of destruction for parachutists, air-borne invaders, and any traitors that may be found in our midst (but I do not believe there are many-woe betide them, they will get short shrift)-behind the regular Army we have more than a million of the Local Defence Volunteers, or, as they are much better called, the "Home Guard." These officers and men, a large proportion of whom have been through the last war, have the strongest desire to attack and come to close quarters with the enemy wherever he may appear. Should the invader come to Britain, there will be no placid lying down of the people in submission before him, as we have seen, alas, in other countries. We shall defend every village, every town, and every city. The vast mass of London itself, fought street by street, could easily devour an entire hostile army; and we would rather see London laid in ruins and ashes than that it should be tamely and abjectly enslaved. I am bound to state these facts, because it is necessary to inform our people of our intentions, and thus to reassure them. This has been a great week for the Royal Air Force, and for the Fighter Command. They have shot down more than five to one of the German aircraft which have tried to molest our convoys in the Channel, or have ventured to cross the British coast line. These are, of course, only the preliminary encounters to the great air battles which lie ahead. But I know of no reason why we should be discontented with the results so far achieved; although, of course, we hope to improve upon them as the fighting becomes more widespread and comes more inland. Around all lies the power of the Royal Navy. With over a thousand armed ships under the White Ensign, patrolling the seas, the Navy, which is capable of transferring its force very readily to the protection of any part of the British Empire which may be threatened, is capable also of keeping open communication with the New World, from whom, as the struggle deepens, increasing aid will come. Is it not remarkable that after ten months of unlimited U-boat and air attack upon our commerce, our food reserves are higher than they have ever been, and we have a substantially larger tonnage under our own flag, apart from great numbers of foreign ships in our control, than we had at the beginning of the war? Why do I dwell on all this? Not, surely, to induce any slackening of effort or vigilance. On the contrary. These must be redoubled, and we must prepare not only for the summer, but for the winter; not only for 1941, but for 1942; when the war will, I trust, take a different form from the defensive, in which it has hitherto been bound. I dwell on these elements in our strength, on these resources which we have mobilised and control-I dwell on them because it is right to show that the good cause can command the means of survival; and that while we toil through the dark valley we can see the sunlight on the uplands beyond. I stand at the head of a Government representing all Parties in the State-all creeds, all classes, every recognisable section of opinion. We are ranged beneath the Crown of our ancient monarchy. We are supported by a free Parliament and a free Press; but there is one bond which unites us all and sustains us in the public regard-namely (as is increasingly becoming known), that we are prepared to proceed to all extremities, to endure them and to enforce them; that is our bond of union in His Majesty\'s Government tonight. Thus only, in times like these, can nations preserve their freedom; and thus only can they uphold the cause entrusted to their care. But all depends now upon the whole life-strength of the British race in every part of the world and of all our associated peoples and of all our well-wishers in every land, doing their utmost night and day, giving all, daring all, enduring all-to the utmost-to the end. This is no war of chieftains or of princes, of dynasties or national ambition; it is a war of peoples and of causes. There are vast numbers, not only in this Island but in every land, who will render faithful service in this war, but whose names will never be known, whose deeds will never be recorded. This is a War of the Unknown Warriors; but let all strive without failing in faith or in duty, and the dark curse of Hitler will be lifted from our age. \'The Few\' Churchill\'s speech to    The House of Commons August 20, 1940 \xa0 Almost a year has passed since the war began, and it is natural for us, I think, to pause on our journey at this milestone and survey the dark, wide field. It is also useful to compare the first year of this second war against German aggression with its forerunner a quarter of a century ago. Although this war is in fact only a continuation of the last, very great differences in its character are apparent. In the last war millions of men fought by hurling enormous masses of steel at one another. "Men and shells" was the cry, and prodigious slaughter was the consequence. In this war nothing of this kind has yet appeared. It is a conflict of strategy, of organization, of technical apparatus, of science, mechanics and morale. The British casualties in the first 12 months of the Great War amounted to 365,000. In this war, I am thankful to say, British killed, wounded, prisoners and missing, including civilians, do not exceed 92,000, and of these a large proportion are alive as prisoners of war. Looking more widely around, one may say that throughout all Europe, for one man killed or wounded in the first year perhaps five were killed or wounded in 1914-15. \xa0 The slaughter is only a small fraction, but the consequences to the belligerents have been even more deadly. We have seen great countries with powerful armies dashed out of coherent existence in a few weeks. We have seen the-French Republic and the renowned French Army beaten into complete and total submission with less than the casualties which they suffered in any one of half a dozen of the battles of 1914-18. The entire body-it might almost seem at times the soul-of France has succumbed to physical effects incomparably less terrible than those which were sustained with fortitude and undaunted will power 25 years ago. Although up to the present the loss of life has been mercifully diminished, the decisions reached in the course of the struggle are even more profound upon the fate of nations than anything that has ever happened since barbaric times. Moves are made upon the scientific and strategic boards, advantages are gained by mechanical means, as a result of which scores of millions of men become incapable of further resistance, or judge themselves incapable of further resistance, and a fearful game of chess proceeds from check to mate by which the unhappy players seem to be inexorably bound. \xa0 There is another more obvious difference from 1914. The whole of the warring nations are engaged, not only soldiers, but the entire population, men, women and children. The fronts are everywhere. The trenches are dug in the towns and streets. Every village is fortified. Every road is barred. The front line runs through the factories. The workmen are soldiers with different weapons but the same courage. These are great and distinctive changes from what many of us saw in the struggle of a quarter of a century ago. There seems to be every reason to believe that this new kind of war is well suited to the genius and the resources of the British nation and the British Empire; and that, once we get properly equipped and properly started, a war of this kind will be more favorable to us than the somber mass slaughters of the Somme and Passchendaele. If it is a case of the whole nation fighting and suffering together, that ought to suit us, because we are the most united of all the nations, because we entered the war upon the national will and with our eyes open, and because we have been nurtured in freedom and individual responsibility and are the products, not of totalitarian uniformity, but of tolerance and variety. If all these qualities are turned, as they are being turned, to the arts of war, we may be able to show the enemy quite a lot of things that they have not thought of yet. Since the Germans drove the Jews out and lowered their technical standards, our science is definitely ahead of theirs. Our geographical position, the command of the sea, and the friendship of the United States enable us to draw resources from the whole world and to manufacture weapons of war of every kind, but especially of the superfine kinds, on a scale hitherto practiced only by Nazi Germany. \xa0 Hitler is now sprawled over Europe. Our offensive springs are being slowly compressed, and we must resolutely and methodically prepare ourselves for the campaigns of 1941 and 1942. Two or three years are not a long time, even in our short, precarious lives. They are nothing in the history of the nation, and when we are doing the finest thing in the world, and have the honor to be the sole champion of the liberties of all Europe, we must not grudge these years or weary as we toil and struggle through them. It does not follow that our energies in future years will be exclusively confined to defending ourselves and our possessions. Many opportunities may lie open to amphibious power, and we must be ready to take advantage of them. One of the ways to bring this war to a speedy end is to convince the enemy, not by words, but by deeds, that we have both the will and the means, not only to go on indefinitely, but to strike heavy and unexpected blows. The road to victory may not be so long as we expect. But we have no right to count upon this. Be it long or short, rough or smooth, we mean to reach our journey\'s end. \xa0 It is our intention to maintain and enforce a strict blockade, not only of Germany, but of Italy, France, and all the other countries that have fallen into the German power. I read in the papers that Herr Hitler has also proclaimed a strict blockade of the British Islands. No one can complain of that. I remember the Kaiser doing it in the last war. What indeed would be a matter of general complaint would be if we were to prolong the agony of all Europe by allowing food to come in to nourish the Nazis and aid their war effort, or to allow food to go in to the subjugated peoples, which certainly would be pillaged off them by their Nazi conquerors. \xa0 There have been many proposals, founded on the highest motives, that food should be allowed to pass the blockade for the relief of these populations. I regret that we must refuse these requests. The Nazis declare that they have created a new unified economy in Europe. They have repeatedly stated that they possess ample reserves of food and that they can feed their captive peoples. In a German broadcast oL27th June it was said that while Mr. Hoover\'s plan for relieving France, Belgium and Holland deserved commendation, the German forces had already taken the necessary steps. We know that in Norway when the German troops went in, there were food supplies to last for a year. We know that Poland, though not a rich country, usually produces sufficient food for her people. Moreover, the other countries which Herr Hitler has invaded all held considerable stocks when the Germans entered and are themselves, in many cases, very substantial food producers. If all this food is not available now, it can only be because it has been removed to feed the people of Germany and to give them increased rations-for a change-during the last few months. At this season of the year and for some months to come, there is the least chance of scarcity as the harvest has just been gathered in. The only agencies which can create famine in any part of Europe, now and during the coming winter, will be German exactions or German failure to distribute the supplies which they command. \xa0 There is another aspect. Many of the most valuable foods are essential to the manufacture of vital war material. Fats are used to make explosives. Potatoes make the alcohol for motor spirit. The plastic materials now so largely used in the construction of aircraft are made of milk. If the Germans use these commodities to help them to bomb our women and children, rather than to feed the populations who produce them, we may be sure that imported foods would go the same way, directly or indirectly, or be employed to relieve the enemy of the responsibilities he has so wantonly assumed. Let Hitler bear his responsibilities to the full, and let the peoples of Europe who groan beneath his yoke aid in every way the coming of the day when that yoke will be broken. Meanwhile, we can and we will arrange in advance for the speedy entry of food into any part of the enslaved area, when this part has been wholly cleared of German forces, and has genuinely regained its freedom. We shall do our best to encourage the building up of reserves of food all over the world, so that there will always be held up before the eyes of the peoples of Europe, including-I say deliberately-the German and Austrian peoples, the certainty that the shattering of the Nazi power will bring to them all immediate food, freedom and peace. \xa0 Rather more than a quarter of a year has passed since the new Government came into power in this country. What a cataract of disaster has poured out upon us since then! The trustful Dutch overwhelmed; their beloved and respected Sovereign driven into exile; the peaceful city of Rotterdam the scene of a massacre as hideous and brutal as anything in the Thirty Years\' War; Belgium invaded and beaten down; our own fine Expeditionary Force, which King Leopold called to his rescue, cut off and almost captured, escaping as it seemed only by a miracle and with the loss of all its equipment; our Ally, France, out; Italy in against us; all France in the power of the enemy, all its arsenals and vast masses of military material converted or convertible to the enemy\'s use; a puppet Government set up at Vichy which may at any moment be forced to become our foe; the whole western seaboard of Europe from the North Cape to the Spanish frontier in German hands; all the ports, all the airfields on this immense front employed against us as potential springboards of invasion. Moreover, the German air power, numerically so far outstripping ours, has been brought so close to our Island that what we used to dread greatly has come to pass and the hostile bombers not only reach our shores in a few minutes and from many directions, but can be escorted by their fighting aircraft. Why, Sir, if we had been confronted at the beginning of May with such a prospect, it would have seemed incredible that at the end of a period of horror and disaster, or at this point in a period of horror and disaster, we should stand erect, sure of ourselves, masters of our fate and with the conviction of final victory burning unquenchable in our hearts. Few would have believed we could survive; none would have believed that we should today not only feel stronger but should actually be stronger than we have ever been before. \xa0 Let us see what has happened on the other side of the scales. The British nation and the British Empire, finding themselves alone, stood undismayed against disaster. No one flinched or wavered; nay, some who formerly thought of peace, now think only of war. Our people are united and resolved, as they have never been before. Death and ruin have become small things compared with the shame of defeat or failure in duty. We cannot tell what lies ahead. It may be that even greater ordeals lie before us. We shall face whatever is coming to us. We are sure of ourselves and of our cause, and that is the supreme fact which has emerged in these months of trial. \xa0 Meanwhile, we have not only fortified our hearts but our Island. We have rearmed and rebuilt our armies in a degree which would have been deemed impossible a few months ago. We have ferried across the Atlantic, in the month of July, thanks to our friends over there, an immense mass of munitions of all kinds: cannon, rifles, machine guns, cartridges and shell, all safely landed without the loss of a gun or a round. The output of our own factories, working as they have never worked before, has poured forth to the troops. The whole British Army is at home. More than 2,000,000 determined men have rifles and bayonets in their hands tonight, and three-quarters of them are in regular military formations. We have never had armies like this in our Island in time of war. The whole Island bristles against invaders, from the sea or from the air. As I explained to the House in the middle of June, the stronger our Army at home, the larger must the invading expedition be, and the larger the invading expedition, the less difficult will be the task of the Navy in detecting its assembly and in intercepting and destroying it in passage; and the greater also would be the difficulty of feeding and supplying the invaders if ever they landed, in the teeth of continuous naval and air attack on their communications. All this is classical and venerable doctrine. As in Nelson\'s day, the maxim holds, "Our first line of defense is the enemy\'s ports." Now air reconnaissance and photography have brought to an old principle a new and potent aid. \xa0 Our Navy is far stronger than it was at the beginning of the war. The great flow of new construction set on foot at the outbreak is now beginning to come in. We hope our friends across the ocean will send us a timely reinforcement to bridge the gap between the peace flotillas of 1939 and the war flotillas of 1941. There is no difficulty in sending such aid. The seas and oceans are open. The U-boats are contained. The magnetic mine is, up to the present time, effectively mastered. The merchant tonnage under the British flag, after a year of unlimited U-boat war, after eight months of intensive mining attack, is larger than when we began. We have, in addition, under our control at least 4,000,000 tons of shipping from the captive countries which has taken refuge here or in the harbors of the Empire. Our stocks of food of all kinds are far more abundant than in the days of peace, and a large and growing program of food production is on foot. \xa0 Why do I say all this? Not, assuredly, to boast; not, assuredly, to give the slightest countenance to complacency. The dangers we face are still enormous, but so are our advantages and resources. I recount them because the people have a right to know that there are solid grounds for the confidence which we feel, and that we have good reason to believe ourselves capable, as I said in a very dark hour two months ago, of continuing the war "if necessary alone, if necessary for years." I say it also because the fact that the British Empire stands invincible, and that Nazidom is still being resisted, will kindle again the spark of hope in the breasts of hundreds of millions of down-trodden or despairing men and women throughout Europe, and far beyond its bounds, and that from these sparks there will presently come cleansing and devouring flame. \xa0 The great air battle which has been in progress over this Island for the last few weeks has recently attained a high intensity. It is too soon to attempt to assign limits either to its scale or to its duration. We must certainly expect that greater efforts will be made by the enemy than any he has so far put forth. Hostile air fields are still being developed in France and the Low Countries, and the movement of squadrons and material for attacking us is still proceeding. It is quite plain that Herr Hitler could not admit defeat in his air attack on Great Britain without sustaining most serious injury. If after all his boastings and bloodcurdling threats and lurid accounts trumpeted round the world of the damage he has inflicted, of the vast numbers of our Air Force he has shot down, so he says, with so little loss to himself; if after tales of the panic-stricken British crushed in their holes cursing the plutocratic Parliament which has led them to such a plight-if after all this his whole air onslaught were forced after a while tamely to peter out, the Fuhrer\'s reputation for veracity of statement might be seriously impugned. We may be sure, therefore, that he will continue as long as he has the strength to do so, and as long as any preoccupations he may have in respect of the Russian Air Force allow him to do so. \xa0 On the other hand, the conditions and course of the fighting have so far been favorable to us. I told the House two months ago that, whereas in France our fighter aircraft were wont to inflict a loss of two or three to one upon the Germans, and in the fighting at Dunkirk, which was a kind of no-man\'s-land, a loss of about three or four to one, we expected that in an attack on this Island we should achieve a larger ratio. This has certainly come true. It must also be remembered that all the enemy machines and pilots which are shot down over our Island, or over the seas which surround it, are either destroyed or captured; whereas a considerable proportion of our machines, and also of our pilots, are saved, and soon again in many cases come into action. \xa0 A vast and admirable system of salvage, directed by the Ministry of Aircraft Production, ensures the speediest return to the fighting line of damaged machines, and the most provident and speedy use of all the spare parts and material. At the same time the splendid-nay, astounding-increase in the output and repair of British aircraft and engines which Lord Beaverbrook has achieved by a genius of organization and drive, which looks like magic, has given us overflowing reserves of every type of aircraft, and an ever-mounting stream of production both in quantity and quality. The enemy is, of course, far more numerous than we are. But our new production already, as I am advised, largely exceeds his, and the American production is only just beginning to flow in. It is a fact, as I see from my daily returns, that our bomber and fighter strength now, after all this fighting, are larger than they have ever been. We believe that we shall be able to continue the air struggle indefinitely and as long as the enemy pleases, and the longer it continues the more rapid will be our approach, first towards that parity, and then into that superiority, in the air upon which in a large measure the decision of the war depends. \xa0 The gratitude of every home in our Island, in our Empire, and indeed throughout the world, except in the abodes of the guilty, goes out to the British airmen who, undaunted by odds, unwearied in their constant challenge and mortal danger, are turning the tide of the World War by their prowess and b~ their devotion. Never in the field of human conflict was so much owed by so many to so few. All hearts go out to the fighter pilots, whose brilliant actions we see with our own eyes day after day; but we must never forget that all the time, night after night, month after month, our bomber squadrons travel far into Germany, find their targets in the darkness by the highest navigational skill, aim their attacks, often under the heaviest fire, often with serious loss, with deliberate careful discrimination, and inflict shattering blows upon the whole of the technical and war-making structure of the Nazi power. On no part of the Royal Air Force does the weight of the war fall more heavily than on the daylight bombers, who will play an invaluable part in the case of invasion and whose unflinching zeal it has been necessary in the meanwhile on numerous occasions to restrain. \xa0 We are able to verify the results of bombing military targets in Germany, not only by reports which reach us through many sources, but also, of course, by photography. I have no hesitation in saying that this process of bombing the military industries and communications of Germany and the air bases and storage depots from which we are attacked, which process will continue upon an ever-increasing scale until the end of the war, and may in another year attain dimensions hitherto undreamed of, affords one at least of the most certain, if not the shortest, of all the roads to victory. Even if the Nazi legions stood triumphant on the Black Sea, or indeed upon the Caspian, even if Hitler was at the gates of India, it would profit him nothing if at the same time the entire economic and scientific apparatus of German war power lay shattered and pulverized at home. \xa0 The fact that the invasion of this Island upon a large scale has become a far more difficult operation with every week that has passed since we saved our Army at Dunkirk, and our very great preponderance of sea power enable us to turn our eyes and to turn our strength increasingly towards the Mediterranean and against that other enemy who, without the slightest provocation, coldly and deliberately, for greed and gain, stabbed France in the back in the moment of her agony, and is now marching against us in Africa. The defection of France has, of course, been deeply damaging to our position in what is called, somewhat oddly, the Middle East. In the defense of Somaliland, for instance, we had counted upon strong French forces attacking the Italians from Jibuti. We had counted also upon the use of the French naval and air bases in the Mediterranean, and particularly upon the North African shore. We had counted upon the French Fleet. Even though metropolitan France was temporarily overrun, there was no reason why the French Navy, substantial parts of the French Army, the French Air Force and the French Empire overseas should not have continued the struggle at our side. \xa0 Shielded by overwhelming sea power, possessed of invaluable strategic bases and of ample funds, France might have remained one of the great combatants in the struggle. By so doing, France would have preserved the continuity of her life, and the French Empire might have advanced with the British Empire to the rescue of the independence and integrity of the French Motherland. In our own case, if we had been put in the terrible position of France, a contingency now happily impossible, although, of course, it would have been the duty of all war leaders to fight on here to the end, it would also have been their duty, as I indicated in my speech of 4th June, to provide as far as possible for the Naval security of Canada and our Dominions and to make sure they had the means to carry on the struggle from beyond the oceans. Most of the other countries that have been overrun by Germany for the time being have persevered valiantly and faithfully. The Czechs, the Poles, the Norwegians, the Dutch, the Belgians are still in the field, sword in hand, recognized by Great Britain and the United States as the sole representative authorities and lawful Governments of their respective States. \xa0 That France alone should lie prostrate at this moment is the crime, not of a great and noble nation, but of what are called "the men of Vichy." We have profound sympathy with the French people. Our old comradeship with France is not dead. In General de Gaulle and his gallant band, that comradeship takes an effective form. These free Frenchmen have been condemned to death by Vichy, but the day will come, as surely as the sun will rise tomorrow, when their names will be held in honor, and their names will be graven in stone in the streets and villages of a France restored in a liberated Europe to its full freedom and its ancient fame. But this conviction which I feel of the future cannot affect the immediate problems which confront us in the Mediterranean and in Africa. It had been decided some time before the beginning of the war not to defend the Protectorate of Somaliland. That policy was changed in the early months of the war. When the French gave in, and when our small forces there, a few battalions, a few guns, were attacked by all the Italian troops, nearly two divisions, which had formerly faced the French at Jibuti, it was right to withdraw our detachments, virtually intact, for action elsewhere. Far larger operations no doubt impend in the Middle East theater, and I shall certainly not attempt to discuss or prophesy about their probable course. We have large armies and many means of reinforcing them. We have the complete sea command of the eastern Mediterranean. We intend to do our best to give a good account of ourselves, and to discharge faithfully and resolutely all our obligations and duties in that quarter of the world. More than that I do not think the House would wish me to say at the present time. \xa0 A good many people have written to me to ask me to make on this occasion a fuller statement of our war aims, and of the kind of peace we wish to make after the war, than is contained in the very considerable declaration which was made early in the autumn. Since then we have made common cause with Norway, Holland and Belgium. We have recognized the Czech Government of Dr. Benes, and we have told General de Gaulle that our success will carry with it the restoration of France. I do not think it would be wise at this moment, while the battle rages and the war is still perhaps only in its earlier stage, to embark upon elaborate speculations about the future shape which should be given to Europe or the new securities which must be arranged to spare mankind the miseries of a third World War. The ground is not new, it has been frequently traversed and explored, and many ideas are held about it in common by all good men, and all free men. But before we can undertake the task of rebuilding we have not only to be convinced ourselves, but we have to convince all other countries that the Nazi tyranny is going to be finally broken. The right to guide \xa0 The course of world history is the noblest prize of victory. We are still toiling up the hill; we have not yet reached the crest-line of it; we cannot survey the landscape or even imagine what its condition will be when that longed-for morning comes. The task which lies before us immediately is at once more practical, more simple and more stern. I hope-indeed, I pray-that we shall not be found unworthy of our victory if after toil and tribulation it is granted to us. For the rest, we have to gain the victory. That is our task. \xa0 There is, however, one direction in which we can see a little more clearly ahead. We have to think not only for ourselves but for the lasting security of the cause and principles for which we are fighting and of the long future of the British Commonwealth of Nations. Some months ago we came to the conclusion that the interests of the United States and of the British Empire both required that the United States should have facilities for the naval and air defense of the Western Hemisphere against the attack of a Nazi power which might have acquired temporary but lengthy control of a large part of Western Europe and its formidable resources. We had therefore decided spontaneously, and without being asked or offered any inducement, to inform the Government of the United States that we would be glad to place such defense facilities at their disposal by leasing suitable sites in our Transatlantic possessions for their greater security against the unmeasured dangers of the future. The principle of association of interests for common purposes between Great Britain and the United States had developed even before the war. Various agreements had been reached about certain small islands in the Pacific Ocean which had become important as air fueling points. In all this line of thought we found ourselves in very close harmony with the Government of Canada. \xa0 Presently we learned that anxiety was also felt in the United States about the air and naval defense of their Atlantic seaboard, and President Roosevelt has recently made it clear that he would like to discuss with us, and with the Dominion of Canada and with Newfoundland, the development of American naval and air facilities in Newfoundland and in the West Indies. There is, of course, no question of any transference of sovereignty-that has never been suggested-or of any action being taken without the consent or against the wishes of the various Colonies concerned; but for our part, His Majesty\'s Government are entirely willing to accord defense facilities to the United States on a 99 years\' leasehold basis, and we feel sure that our interests no less than theirs, and the interests of the Colonies themselves and of Canada and Newfoundland, will be served thereby. These are important steps. Undoubtedly this process means that these two great organizations of the English-speaking democracies, the British Empire and the United States, will have to be somewhat mixed up together in some of their affairs for mutual and general one can stop it. Like the Mississippi, it just keeps rolling alone. Let it roll. Let it roll on full flood, view the process with any misgivings. I could not stop it if I wished; no one can stop it. Like the Mississippi, it just keeps rolling alone. Let it roll. Let it roll on full flood, inexorable, irresistible, benignant, to broader lands and better days. ____________________________\xa0\xa0\xa0 Today is the second anniversary of the Munich Agreement, a date which the world will always remember for the tragic sacrifice made by the Czechoslovakia people in the interest of European peace. The hopes which this agreement stirred in the heart of civilised mankind\xa0 have been frustrated. Within six months the solemn pledges given by unscrupulous men who control the destiny of Germany were broken, and the agreement destroyed with a ruthlessness which unmasked the true nature of their reckless ambitions to the whole world. In this hour of your martyrdom I send you this message: The battle which we in Britain are fighting today is not only our battle. It is also your battle, and, indeed, the battle of all nations who prefer liberty to soulless serfdom. It is the struggle of civilised nations for the right to live their own life in the manner of their own choosing. It represents man\'s instinctive defiance of tyranny\xa0 and of an impersonal universe. Throughout history no European nation has shown a greater will to survive than yours, and today again your people have given countless proofs of their courage in adversity. Here in Britain we have welcomed with pride and gratitude your soldiers and airmen\xa0 who have come by daring escape to take part with ever-increasing success in that battle for Britain which is also the battle for Czechoslovakia. It is because we both are fighting for the fundamental decencies of human life that we are determined that neither our struggle nor your struggle shall be in vain. It is for this reason that we have refused to recognise any of the brutal conquests of Germany in Central Europe and elsewhere, that we have welcomed a Czechoslovakia Provisional Government in this country, and that we have made the restoration of Czechoslovakia liberties one of our principal war aims. With firmness and resolution, two qualities which our nations share in equal measure, these aims will be achieved. Be of good cheer.The\xa0 hour of your deliverance will come. The soul of freedom is deathless. It cannot and will not perish.Frenchmen! For more than 30 years in peace and war I have marched with you. I am marching still along the same road. Tonight I speak to you at your firesides, wherever you may be, or whatever your fortunes are: I repeat the\xa0 prayer that upon the louis d\'or, "Dieu protege la France" Here at home in England, under the the fire of the Bosche we do not forget the ties and links that unite us to France . . . Here in London, which Her Hitler says he will reduce to ashes, and which his aeroplanes are now bombarding, our people are bearing up unflinchingly. Our Air Force has more than held its own.\xa0 We are waiting for the long promised invasion. So are the fishes . . . Frenchmen - rearm your spirits before it is too late. Remember how Napoleon said before one of his battles:î\xa0\xa0 These same Prussians who are so boastful today were three to one at Jena, and six to one at Montmirailî Never will I believe that the soul of France is dead! Never will I believe that her place amongst the greatest nations of the world has been lost forever. Remember that we shall never stop,\xa0 never weary, and never give in . . . We seek to beat the life and soul out of Hitler and Hitlerism. That alone - that all the time - that to the end. Those French who are in the French Empire, and those who are in the so-called unoccupied France, may see their way from time to time to useful action, I will not go into details\xa0 . . hostile ears are listening . . . Good night then: Sleep to gather strength for the morning.\xa0 For the morning will come. brightly it will shine on the brave and true, kindly upon all who suffer for the cause, glorious upon the tombs of heroes. Thus will shine the dawn.\xa0 Since we last met, the House has suffered a very grievous loss in the death of one of its most distinguished Members, and of a statesman and public servant who, during the best part of three memorable years, was first Minister of the Crown. The fierce and bitter controversies which hung around him in recent times were hushed by the news of his illness and are silenced by his death. In paying a tribute of respect and of regard to an eminent man who has been taken from us, no one is obliged to alter the opinions which he has formed or expressed upon issues which have become a part of history; but at the Lychgate we may all pass our own conduct and our own judgments under a searching review. It is not given to human beings, happily for them, for otherwise life would be intolerable, to foresee or to predict to any large extent the unfolding course of events. In one phase men seem to have been right, in another they seem to have been wrong. Then again, a few years later, when the perspective of time has lengthened, all stands in a different setting. There is a new proportion. There is another scale of values. History with its flickering lamp stumbles along the trail of the past, trying to reconstruct its scenes, to revive its echoes, and kindle with pale gleams the passion of former days. What is the worth of all this? The only guide to a man is his conscience; the only shield to his memory is the rectitude and sincerity of his actions. It is very imprudent to walk through life without this shield, because we are so often mocked by the failure of our hopes and the upsetting of our calculations; but with this shield, however the fates may play, we march always in the ranks of honour. It fell to Neville Chamberlain in one of the supreme crises of the world to be contradicted by events, to be disappointed in his hopes, and to be deceived and cheated by a wicked man. But what were these hopes in which he was disappointed? What were these wishes in which he was frustrated? What was that faith that was abused? They were surely among the most noble and benevolent instincts of the human heart-the love of peace, the toil for peace, the strife for peace, the pursuit of peace, even at great peril, and certainly to the utter disdain of popularity or clamour. Whatever else history may or may not say about these terrible, tremendous years, we can be sure that Neville Chamberlain acted with perfect sincerity according to his lights and strove to the utmost of his capacity and authority, which were powerful, to save the world from the awful, devastating struggle in which we are now engaged. This alone will stand him in good stead as far as what is called the verdict of history is concerned. But it is also a help to our country and to our whole Empire, and to our decent faithful way of living that, however long the struggle may last, or however dark may be the clouds which overhang our path, no future generation of English-speaking folks-for that is the tribunal to which we appeal-will doubt that, even at a great cost to ourselves in technical preparation, we were guiltless of the bloodshed, terror and misery which have engulfed so many lands and peoples, and yet seek new victims still. Herr Hitler protests with frantic words and gestures that he has only desired peace. What do these ravings and outpourings count before the silence of Neville Chamberlain\'s tomb? Long, hard, and hazardous years lie before us, but at least we entered upon them united and with clean hearts. I do not propose to give an appreciation of Neville Chamberlain\'s life and character, but there were certain qualities always admired in these Islands which he possessed in an altogether exceptional degree. He had a physical and moral toughness of fibre which enabled him all through his varied career to endure misfortune and disappointment without being unduly discouraged or wearied. He had a precision of mind and an aptitude for business which raised him far above the ordinary levels of our generation. He had a firmness of spirit which was not often elated by success, seldom downcast by failure, and never swayed by panic. When, contrary to all his hopes, beliefs and exertions, the war came upon him, and when, as he himself said, all that he had worked for was shattered, there was no man more resolved to pursue the unsought quarrel to the death. The same qualities which made him one of the last to enter the war, made him one of the last who would quit it before the full victory of a righteous cause was won. I had the singular experience of passing in a day from being one of his most prominent opponents and critics to being one of his principal lieutenants, and on another day of passing from serving under him to become the head of a Government of which, with perfect loyalty, he was content to be a member. Such relationships are unusual in our public life. I have before told the House how on the morrow of the Debate which in the early days of May challenged his position, he declared to me and a few other friends that only a National Government could face the storm about to break upon us, and that if he were an obstacle to the formation of such a Government, he would instantly retire. Thereafter, he acted with that singleness of purpose and simplicity of conduct which at all times, and especially in great times, ought to be the ideal of us all. When he returned to duty a few weeks after a most severe operation, the bombardment of London and of the seat of Government had begun. I was a witness during that fortnight of his fortitude under the most grievous and painful bodily afflictions, and I can testify that, although physically only the wreck of a man, his nerve was unshaken and his remarkable mental faculties unimpaired. After he left the Government he refused all honours. He would die like his father, plain Mr. Chamberlain. I sought permission of the King, however, to have him supplied with the Cabinet papers, and until a few days of his death he followed our affairs with keenness, interest and tenacity. He met the approach of death with a steady eye. If he grieved at all, it was that he could not be a spectator of our victory; but I think he died with the comfort of knowing that his country had, at least, turned the corner. At this time our thoughts must pass to the gracious and charming lady who shared his days of triumph and adversity with a courage and quality the equal of his own. He was, like his father and his brother Austen before him, a famous Member of the House of Commons, and we here assembled this morning, Members of all parties, without a single exception, feel that we do ourselves and our country honour in saluting the memory of one whom Disraeli would have called an "English worthy." I feel greatly honoured that you should have invited me to enter the United States Senate Chamber and address the representatives of both branches of Congress. The fact that my American forebears have for so many generations played their part in the life of the United States, and that here I am, an Englishman, welcomed in your midst, makes this experience one of the most moving and thrilling in my life, which is already long and has not been entirely uneventful. I wish indeed that my mother, whose memory I cherish across the vale of years, could have been here to see. By the way, I cannot help reflecting that if my father had been American and my mother British, instead of the other way round, I might have got here on my own. In that case, this would not have been the first time you would have heard my voice. In that case I should not have needed any invitation, but if I had, it is hardly likely it would have been unanimous. So perhaps things are better as they are. I may confess, however, that I do not feel quite like a fish out of water in a legislative assembly where English is spoken. I am a child of the House of Commons. I was brought up in my father\'s house to believe in democracy. \'Trust the people\' - that was his message. I used to see him cheered at meetings and in the streets by crowds of working men way back in those aristocratic Victorian days when, as Disraeli said, the world was for the few, and for the very few. Therefore I have been in full harmony all my life with the tides which have flowed on both side of the Atlantic against privilege and monopoly, and I have steered confidently towards the Gettysburg ideal of  \'government of the people by the people for the people\'.  I owe my advance entirely to the House of Commons, whose servant I am. In my country, as in yours, public men are proud to be the servants of the State and would be ashamed to be its masters. On any day, if they thought the people wanted it, the House of Commons could by a simple vote remove me from my office. But I am not worrying about it at all. As a matter of fact, I am sure they will approve very highly of my journey here, for which I obtained the King\'s permission in order to meet the President of the United States and to arrange with him all that mapping-out of our military plans, and for all those intimate meetings of the high officers of the armed services of both countries, which are indispensable to the successful prosecution of the war. I should like to say first of all how much I have been impressed and encouraged by the breadth of view and sense of proportion which I have found in all quarters over here to which I have had access. Anyone who did not understand the size and solidarity of the foundations of the United States might easily have expected to find an excited, disturbed, self-centred atmosphere, with all minds fixed upon the novel, startling and painful episodes of sudden war as they hit America. After all, the United States have been attacked and set upon by three most powerfully armed dictator States. The greatest military power in Europe, the greatest military power in Asia, German and Japan, Italy, too, have all declared, and are making, war upon you, and a quarrel is opened, which can only end in their overthrow or yours. But here in Washington, in these memorable days, I have found an Olympian fortitude which, far from being based upon complacency, is only the mask of an inflexible purpose and the proof of a sure and well-grounded confidence in the final outcome. We in Britain had the same feeling in our darkest days. We, too, were sure in the end all would be well. You do not, I am certain, underrate the severity of the ordeal to which you and we have still to be subjected. The forces ranged against us are enormous. They are bitter, they are ruthless. The wicked men and their factions who have launched their peoples on the path of war and conquest know that they will be called to terrible account if they cannot beat down by force of arms the peoples they have assailed. They will stop at nothing. They have a vast accumulation of war weapons of all kinds. They have highly trained,disciplined armies, navies, and air services. They have plans and designs which have long been tried and matured. They will stop at nothing that violence or treachery can suggest. It is quite true that, on our side, our resources in man-power and materials are far greater than theirs. But only a portion of your resources is as yet mobilised and developed, and we both of us have much to learn in the cruel art of war. We have therefore, without doubt, a time of tribulation before us. In this time some ground will be lost which it will be hard and costly to regain. Many disappointments and unpleasant surprises await us. Many of them will afflict us before the full marshalling of our latent and total power can be accomplished. For the best part of twenty years the youth of Britain and America have been taught that war is evil, which is true, and that it would never come again, which has been proved false. For the best part of twenty years the youth of Germany, Japan and Italy have been taught that aggressive war is the noblest duty of the citizen, and that it should be begun as soon as the necessary weapons and organisation had been made. We have performed the duties and tasks of peace. They have plotted and planned for war. This, naturally, has placed us in Britain and now places you in the United States at a disadvantage, which only time, courage and strenuous, untiring exertions can correct. We have indeed to be thankful that so much time has been granted to us. If Germany had tried to invade the British Isles after the French collapse in June 1940, and if Japan had declared war on the British Empire and the United States at about the same date, no one could say what disasters and agonies might not have been our lot. But now at the end of December 1941, our transformation form easy-going peace to total war efficiency has made very great progress. The broad flow of munitions in Great Britain has already begun. Immense strides have been made in the conversion of American industry to military purposes, and now that the United States are at war it is possible for orders to be given every day which a year or eighteen months hence will produce results in war power beyond anything that has yet been seen or foreseen in the dictator States. Provided that every effort is made, that nothing is kept back, that the whole man-power, brain power, virility, valour and civic virtue of the English-speaking world with all its galaxy of loyal, friendly, associated communities and States - provided all that is bent unremittingly to the simple and supreme task, I think it would be reasonable to hope that the end of 1942 will see us quite definitely in a better position than we are now, and that the year 1943 will enable us to assume the initiative upon an ample scale. Some people may be startled or momentarily depressed when, like your President, I speak of a long and hard war. But our peoples would rather know the truth, sombre though it be. And after all, when we are doing the noblest work in the world, not only defending our hearths and homes but the cause of freedom in other lands, the question of whether deliverance comes in 1942, 1943 or 1944 falls into its proper place in the grand proportions of human history. Sure I am that this day - now we are the masters of our fate; that the task which has been set us is not above our strength; that its pangs and toils are not beyond our endurance. As long as we have faith in our cause and an unconquerable will-power, salvation will not be denied us. In the words of the Psalmist, &lt;I&gt;\'He shall not be afraid of evil tidings; his heart is fixed, trusting in the Lord.\' &lt;/I&gt;Not all the tidings will be evil. On the contrary, mighty strokes of war have already been dealt against the enemy; the glorious defence of their native soil by the Russian armies and people have inflicted wounds upon the Nazi tyranny and system which have bitten deep, and will fester and inflame not only in the Nazi body but in the Nazi mind The boastful Mussolini has crumbled already. He is now but a lackey and serf, the merest utensil of his master\'s will. He has inflicted great suffering and wrong upon his own industrious people. He has been stripped of his African empire, Abyssinia has been liberated. Our armies in the East, which so weak and ill-equipped at the moment of French desertion, now control all the regions from Teheran to Benghazi, and from Aleppo and Cyprus to the sources of the Nile. For many months we devoted ourselves to preparing to take the offensive in Libya. The very considerable battle, which has been proceeding for the last six weeks in the desert, has been) fiercely fought on both sides. Owing to the difficulties of supply on the desert flanks, we were never able to bring numerically equal forces to bear upon the enemy. Therefore, we had to rely upon a superiority in the numbers and quality of tanks and aircraft, British and American. Aided by these, for the first time, we have fought the enemy with equal weapons. For the first time we have made the Hun feel the sharp edge of those tools with which he had enslaved Europe. The armed forces of enemy in Cyrenaica amounted to about 150,000, of whom out one-third were Germans. General Auchinleck set out to destroy totally that armed force. I have every reason to believe that his aim will be fully accomplished. I am glad to be able to place before you, members of the Senate and of the House of Representatives, at this moment when you are entering the war, proof that with proper weapons and proper organisation we are able to beat the life out of the savage Nazi. What Hitler is engaging in Libya is only a sample and foretaste of what we must he him and his accomplices, wherever this war shall lead us, in every quarter of the globe. There are good tidings also from blue water. The life-line of supplies which joins our two nations across the ocean, without which all might fail, is flowing steadily and freely in spite of all enemy can do. It is a fact that the British Empire, which they thought eighteen months ago was broken and ruined, is now incomparably stronger, and is growing stronger with every month. Lastly, if you will forgive me for saying it, to me the best tidings of all is that the United States, united as never before, have drawn the sword for freedom and cast away the scabbard. All these tremendous facts have led the subjugated peoples of Europe to lift up their heads again in hope. They have put aside ever the shameful temptation of resigning themselves to the conqueror\'s will. Hope has returned to the hearts of scores of millions of men and women, and with that hope there burns the flame of anger against the brutal, corrupt invader, and still more fiercely burns the fires of hatred and contempt for the squalid Quislings whom he has suborned. In a dozen famous ancient States now prostrate under the Nazi yoke, the masses of the people of all classes and creeds await the hour of liberation, when they too will be able once again to play their part and strike their blows like men. That hour will strike, and its solemn peal will proclaim that the night is past and that the dawn has come. The onslaught upon us so long and so secretly planned by Japan has presented both our countries with grievous problems for which we could not be fully prepared. If people ask me - as they have a right to ask me in England - why is it that you have not got ample equipment of modern aircraft and Army weapons of all kinds in Malaya and in the East Indies, I can only point to the victories General Auchinleck has gained in the Libyan campaign. Had we diverted and dispersed our gradually growing resources between Libya and Malaya, we should have been found wanting in both theatres. If the United States have been found at a disadvantage at various points in the Pacific Ocean, we know well that it is to no small extent because of the aid you have been giving us in munitions for the defence of the British Isles and for the Libyan campaign, and, above all, because of your help in the battle of the Atlantic, upon which all depends, and which has in consequence been successfully and prosperously maintained. Of course it would have been much better, I freely admit, if we had enough resources of all kinds to be at full strength at all threatened points; but considering how slowly an reluctantly we brought ourselves to large-scale preparations, and how long such preparations take, we had no right to expect to be in such a fortunate position. The choice of how to dispose of our hitherto limited resources had to be made by Britain in time of war and by the United States in time of peace; and I believe that history will pronounce that upon the whole - and it is upon the whole that these matters must be judged - the choice made was right. Now that we are together, now that we are linked in a righteous comradeship of arms, now that our two considerable nations each in perfect unity, have joined all their life energies in a common resolve, a new scene opens upon which a steady light will glow and brighten. Many people have been astonished that Japan should in a single day have plunged into war against the United States and the British Empire. We all wonder why, if this dark design, with all its laborious and intricate preparations, had been so long filling their secret minds, they did not choose our moment of weakness eighteen months ago. Viewed quite dispassionately, in spite of the losses we have suffered and the further punishment we shall have to take, it certainly appears to be an irrational act. It is, of course, only prudent to assume that they have made very careful calculations and think they see their way through. Nevertheless, there may be another explanation. We know that for many years past the policy of Japan has been dominated by secret societies of subalterns and junior officers of the Army and Navy, who have enforced their will upon successive Japanese Cabinets and Parliaments by the assassination of any Japanese statesman who opposed, or who did not sufficiently further, their aggressive policy. It may be that these societies, dazzled and dizzy with their own schemes of aggression and the prospect of early victories, have forced their country against its better judgment into war. They have certainly embarked upon a very considerable undertaking. For after the outrages they have committed upon us at Pearl Harbour, in the Pacific Islands, in the Philippines, in Malaya, and in the Dutch East Indies, they must now know that the stakes for which they have decided to play are mortal. When we consider the resources of the United States and the British Empire compared to those of Japan, when we remember those of China, which has so long and valiantly withstood invasion and when also we observe the Russian menace which hangs over Japan, it becomes still more difficult to reconcile Japanese action with prudence or even with sanity. What kind of a people do they think we are? Is it possible they do not realise that we shall never cease to persevere against them until they have been taught a lesson which they and the world will never forget? Members of the Senate and members of the House of Representatives, I turn for one moment more from the turmoil and convulsions of the present to the broader basis of the future. Here we are together facing a group of mighty foes who seek our ruin; here we are together defending all that to free men is dear. Twice in a single generation the catastrophe of world war has fallen upon us; twice in our lifetime has the long arm of fate reached across the ocean to bring the United States into the forefront of the battle. If we had kept together after the last War, if we had taken common measures for our safety, this renewal of the curse need never have fallen upon us. Do we not owe it to ourselves, to our children, to mankind tormented, to make sure that these catastrophes shall not engulf us for the third time? It has been proved that pestilence may break out in the Old World, which carry their destructive ravages into the New World, from which, once they are afoot, the New World cannot by any means escape. Duty and prudence alike command first that the germ-centres of hatred and revenge should be constantly and vigilantly surveyed and treated in good time, and, secondly, that an adequate organisation should be set up to make sure that the pestilence can be controlled at its earliest beginnings before it spreads and rages throughout the entire earth. Five or six years ago it would have been easy, without shedding a drop of blood, for the United States and Great Britain to have insisted on fulfilment of the disarmament clauses of the treaties which Germany signed after the Great War; that also would have been the opportunity for assuring to German those raw materials which we declared in the Atlantic Charter should not be denied to any nation, victor or vanquished. That chance has passed. It is gone. Prodigious hammer-strokes have been needed to bring us together again, or if you will allow me to use other language, I will say that he must indeed have a blind soul who cannot see that some great purpose and design is being worked out here below, of which we have the honour to be the faithful servants. It is not given to us to peer into the mysteries of the future. Still, I avow my hope and faith, sure and inviolate, that in the days to come the British and American peoples will for their own safety and for the good of all walk together side by side in majesty, in justice and in peace. I was asked last week whether I was aware of some uneasiness which it was said existed in the country on account of the gravity, as it was described, of the war situation. So I thought it would be a good thing to go and see for myself what this \'uneasiness\' amounted to, and I went to some of our great cities and seaports which had been most heavily bombed, and to some of the places where the poorest people had got it worst. I have come back not only reassured, but refreshed. To leave the offices in Whitehall with their ceaseless hum of activity and stress, and go out to the front, by which I mean the streets and wharves of London or Liverpool, Manchester, Cardiff, Swansea or Bristol, is like going out of a hothouse on to the bridge of a fighting ship. It is a tonic which I should recommend any who are suffering from fretfulness to take in strong doses when they have need of it. It is quite true that I have seen many painful scenes of havoc, and of fine buildings and acres of cottage homes blasted into rubble-heaps of ruin. But it is just in those very places where the malice of the savage enemy has done its worst, and where the ordeal of the men, women and children has been most severe, that I found their morale most high and splendid. Indeed, I felt encompassed by an exaltation of spirit in the people which seemed to lift mankind and its troubles above the level of material facts into that joyous serenity we think belongs to a better world than this. Of their kindness to me I cannot speak, because I have never sought it or dreamed of it, and can never deserve it. I can only assure you that I and my colleagues, or comrades rather - for that is what they are - will toil with every scrap of life and strength, according to the lights that are granted to us, not to fail these people or be wholly unworthy oftheir faithful and generous regard. The British nation is stirred and moved as it has never been at any time in its long, eventful, famous history, and it is no hackneyed trope of speech to say that theymean to conquer or to die. What a triumph the life of these battered cities is, over the worst that fire and bomb can do. What a vindication of the civilized and decent way ofliving we have been trying to work for and work towards in our Island. What a proof of the virtues of free institutions. What a test of the quality of our local authorities, and of institutions and customs and societies so steadily built. This ordeal by fire has even in a certain sense exhilarated the manhood and womanhood of Britain. The sublime but also terrible and sombre experiences and emotions of the battlefield which for centuries had been reserved for the soldiers and sailors, are now shared, for good or ill, by the entire population. All are proud to be under the fire of the enemy. Old men, little children, the crippled veterans of former wars, aged women, the ordinary hard-pressed citizen or subject of the King, as he likes to call himself, the sturdy workmen who swing the hammers or load the ships; skilful craftsmen; the members of every kind of ARP Service, are proud to feel that they stand in the line together with our fighting men, when one of the greatest of causes is being fought out, as fought out it will be, to the end. This is indeed the grand heroic period of our history, and the light of glory shines on all. You may imagine how deeply I feel my own responsibility to all these people; my responsibility to bear my part in bringing them safely out of this long, stern, scowling valley through which we are marching, and not to demand from them the sacrifices and exertions in vain. I have thought in this diffcult period, when so much fighting and so many critical and complicated manouvres are going on, that it is above all things important that our policy and conduct should be upon the highest level, and that honour should be our guide. Very few people realize how small were the forces with which General Wavell, that fine Commander whom we cheered in good days and will hack through bad - how small were the forces which took the bulk of the Italian masses in Libya prisoners. In none of his successive victories could General Wavell maintain in the desert or bring into action more than two divisions, or about 30,000 men. When we reached Benghazi, and what was left of Mussolini\'s legions scurried back along the dusty road to Tripoli, a call was made upon us which we could not resist. Let me tell you about that call. You will remember how in November the Italian Dictator fell upon the unoffending Greeks, and without reason and without warning invaded their country, and how the Greek nation, reviving their classic fame, hurled his armies back at the double-quick. Meanwhile Hitler, who had been creeping and worming his way steadily forward, doping and poisoning and pinioning, one after the other Hungary, Rumania and Bulgaria, suddenly made it clear that he would come to the rescue of his fellow-criminal. The lack of unity among the Balkan States had enabled him to build up a mighty army in their midst. While nearly all the Greek troops were busy beating the Italians, the tremendous German military machine suddenly towered up on their other frontier. In their mortal peril the Greeks turned to us for succour. Strained as were our own resources, we could not say them nay. By solemn guarantee given before the war, Great Britain had promised them her help. They declared they would fight for their native soil even if neither of their neighbours made common cause with them, and even if we left them to their fate. But we could not do that. There are rules against that kind of thing; and to break those rules would be fatal to the honour of the British Empire, without which we could neither hope nor deserve to win this hard war. Military defeat or miscalculation can be redeemed. The fortunes of war are fickle and changing. But an act of shame would deprive us of the respect which we now enjoy throughout the world, and this would sap the vitals of our strength. During the last year we have gained by our bearing and conduct a potent hold upon the sentiments of the people of the United States. Never, never in our history, have we been held in such admiration and regard across the Atlantic Ocean. In that great Republic, now in much travail and stress of soul, it is customary to use all the many valid, solid arguments about American interests and American safety, which depend upon the destruction of Hitler and his foul gang and even fouler doctrines. But in the long run - believe me, for I know - the action of the United States will be dictated, not by methodical calculations of profit and loss, but by moral sentiment, and by that gleaming flash of resolve which lifts the hearts of men and nations, and springs from the spiritual foundations ofhuman life itself.  We, for our part, were of course bound to hearken to the Greek appeal to the utmost limit ofour strength. We put the case to the Dominions of Australia and New Zealand, and their Governments, without in any way ignoring the hazards, told us that they felt the same as we did. So an important part of the moibile portion of the Army of the Nile was sent to Greece in fulfilment of our pledge. It happened that the divisions available and best suited to this task were from New Zealand and Australia, and that only about half the troops who took part in this dangerous expedition came from the Mother Country. I see the German propaganda is trying to make bad blood between us and Australia by making out that we have used them to do what we would not have asked of the British Army. I shall leave it to Australia to deal with that taunt. Let us see what has happened. We knew, of course, that the forces we could send to Greece would not by themselves alone be sumcient to stem the German tide of invasion. But there was a very real hope that the neighbours of Greece would by our intervention be drawn to stand in line together with her while time remained. How nearly that came off will be known some day. The tragedy of Yugoslavia has been that these brave people had a government who hoped to purchase an ignoble immunity by submission to the Nazi will. Thus when at last the people of Yugoslovia found out where they were being taken, and rose in one spontaneous surge of revolt, they saved the soul and future of their country: but it was already too late to save its territory. They had no time to mobilize their armies. They were struck down by the ruthless and highly mechanized Hun before they could even bring their armies into the field. Great disasters have occurred in the Balkans. Yugoslavia has been beaten down. Only in the mountains can she continue her resistance. The Greeks have been overwhelmed. Their victorious Albanian army has been cut off and forced to surrender, and it has been left to the Anzacs and their British comrades to fight their way back to the sea, leaving their mark on all who hindered them.  I turn aside from the stony path we have to tread, to indulge a moment of lighter relief. I dare say you have read in the newspapers that, by a special proclamation, the Italian Dictator has congratulated the Italian army in Albania on the glorious laurels they have gained by their victory over the Greeks. Here surely is the world\'s record in the domain of the ridiculous and the contemptible. This whipped jackal, Mussolini, who to save his own skin has made all Italy a vassal state of Hitler\'s Empire, comes frisking up at the side of the German tiger with yelpings not only of appetite - that can be understood - but even of triumph. Different things strike different people in different ways. But I am sure there are a great many millions in the British Empire and in the United States, who will find a new object in life in making sure that we come to the final reckoning this absurd impostor will be abandoned to public justice and universal scorn. While these grievous events were taking place in the Balkan Peninsula and in Greece, our forces in Libya have sustained a vexatious and damaging defeat. The Germans advanced sooner and in greater strength than we or our Generals expected. The bulk of our armoured troops, which had played such a decisive part in beating the Italians, had to be refitted, and the single armoured brigade which had been judged suffcient to hold the frontier till about the middle of May was worsted and its vehicles largely destroyed by a somewhat stronger German armoured force. Our infantry, which had not exceeded one division, had to fall back upon the very large Imperial armies that have been assembled and can be nourished and maintained in the fertile delta of the Nile. Tobruk - the fortress of Tobruk - which Aanks any German advance on Egypt, we hold strongly. There we have repulsed many attacks, causing the enemy heavy losses and taking many prisoners. That is how the matter stands in Egypt and on the Libyan front. We must now expect the war in the Mediterranean on the sea, in the desert, and above all in the air, to become very fierce, varied and widespread. We had cleared the Italians out of Cyrenaica, and it now lies with us to purge that province of the Germans. That will be a harder task, and we cannot expect to do it at once. You know I never try to make out that defeats are victories. I have never underrated the German as a warrior. Indeed I told you a month ago that the swift, unbroken course of victories which we had gained over the Italians could not possibly continue, and that misfortunes must be expected. There is only one thing certain about war, that it is full of disappointments and also full of mistakes. It remains to be seen, however, whether it is the Germans who have made the mistake in trampling down the Balkan States and in making a river of blood and hate between themselves and the Greek and Yugoslav peoples. It remains also to be seen whether they have made a mistake in their attempt to invade Egypt with the forces and means of supply which they have now got. Taught by experience, I make it a rule not to prophesy about battles which have yet to be fought out. This, however, I will venture to say, that I should be very sorry to see the tasks of the combatants in the Middle East exchanged, and that General Wavell\'s armies should be in the position of the German invaders. That is only a personal opinion, and I can well understand you may take a different view. It is certain that fresh dangers besides those which threaten Egypt may come upon us in the Mediterranean. The war may spread to Spain and Morocco. It may spread eastward to Turkey and Russia. The Huns may lay their hands for a time upon the granaries of the Ukraine and the oil-wells of the Caucasus. They may dominate the Black Sea. They may dominate the Caspian. Who can tell? We shall do our best to meet them and fight them wherever they go. But there is one thing which is certain. There is one thing which rises out of the vast welter which is sure and solid, and which no one in his senses can mistake. Hitler cannot find safety from avenging justice in the East, in the Middle East, or in the Far East. In order to win this war, he must either conquer this Island by invasion, or he must cut the ocean life-line which joins us to the United States. Let us look into these alternatives, if you will bear with me for a few minutes longer. When I spoke to you last, early in February, many people believed the Nazi boastings that the invasion of Britain was about to begin. It has not begun yet, and with every week that passes we grow stronger on the sea, in the air, and in the numbers, quality, training and equipment of the great Armies that now guard our Island. When I compare the position at home as it is today with what it was in the summer of last year, even after making allowance for a much more elaborate mechanical preparation on the part of the enemy, I feel that we have very much to be thankful for, and I believe that provided our exertions and our vigilance are not relaxed even for a moment, we may be confident that we shall give a very good account of ourselves. More than that it would be boastful to say. Less than that it would be foolish to believe. But how about our life-line across the Atlantic? What is to happen if so many ofour merchant ships are sunk that we cannot bring in the food we need to nourish our brave people? What if the supplies ofwar materials and war weapons which the United States are seeking to send us in such enormous quantities should in large part be sunk on the way? What is to happen then? In February, as you may remember, that bad man in one of his raving outbursts threatened us with a terrifying increase in the numbers and activities of his U-boats and in his air-attack - not only on our Island but, thanks to his use of French and Norwegian harbours, and thanks to the denial to us of the Irish bases - upon our shipping far out into the Atlantic. We have taken and are taking all possible measures to meet this deadly attack, and we are now fighting against it with might and main. That is what is called the Battle of the Atlantic, which in order to survive we have got to win on salt water just as decisively as we had to win the Battle ofBritain last August and September in the air. Wonderful exertions have been made by our Navy and Air Force; by the hundreds of mine-sweeping vessels which with their marvellous appliances keep our ports clear in spite of all the enemy can do; by the men who build and repair our immense fleets of merchant ships; by the men who load and unload them; and need I say by the officers and men of the Merchant Navy who go out in all weathers and in the teeth ofall dangers to fight for the life of their native land and for a cause they comprehend and serve. Still, when you think how easy it is to sink ships at sea and how hard it is to build them and protect them, and when you remember that we have never less than two thousand ships afloat and three or four hundred in the danger zone; when you think of the great armies we are maintaining and reinforcing in the East, and of the worldwide traffic we have to carry on - when you remember all this, can you wonder that it is the Battle of the Atlantic which holds the first place in the thoughts of those upon whom rests the responsibility for procuring the victory?  It was therefore with indescribable relief that I learned of the tremendous decisions lately taken by the President and people of the United States. The American Fleet and flying boats have been ordered to patrol the wide waters of the Western Hemisphere, and to warn the peaceful shipping of all nations outside the combat zone of the presence of lurking U-boats or raiding cruisers belonging to the two aggressor nations. We British shall therefore be able to concentrate our protecting forces far more upon the routes nearer home, and to take a far heavier toll of the U-boats there. I have felt for some time that something like this was bound to happen. The President and Congress of the United States, having newly fortified themselves by contact with their electors, have solemnly pledged their aid to Britain in this war because they deem our cause just, and because they know their own interests and safety would be endangered if we were destroyed. They are taxing themselves heavily. They have passed great legislation. They have turned a large part of their gigantic industry to making the munitions which we need. They have even given us or lent us valuable weapons of their own. I could not believe that they would allow the high purposes to which they have set themselves to be frustrated and the products of their skill and labour sunk to the bottom of the sea. U-boat warfare as conducted by Germany is entirely contrary to international agreements freely subscribed to by Germany only a few years ago. There is no effective blockade, but only a merciless murder and marauding over wide, indiscriminate areas utterly beyond the control of the German seapower. When I said ten weeks ago: \'Give us the tools and we will finish the job\', I meant, give them to us: put them within our reach - and that is what it now seems the Americans are going to do. And that is why I feel a very strong conviction that though the Battle of the Atlantic be will be long and hard, and its issue is by no means yet determined, it has entered upon a more grim but at the same time a far more favourable phase. When you come to think of it, the United States are very closely bound up with us now, and have engaged themselves deeply in giving us moral, material, and, within the limits I have mentioned, naval support.  It is worth while therefore to take a look on both sicies of the ocean at the forces which are facing each other in this awful struggle, from which there can be no drawing back. No prudent and far-seeing man can doubt that the eventual and total defeat of Hitler and Mussolini is certain, in view of the respective declared resolves of the British and American democracies. There are less than seventy million malignant Huns - some of whom are curable and others killable - many of whom are already engaged in holding down Austrians, Czechs, Poles, French, srnd the many other ancient races they now bully and pillage. The peoples of the British Empire and of the United States number nearly two hundred millions in their homelands and in the British Dominions alone. They possess the unchallengeable command ofthe oceans, and will soon obtain decisive superiority in the air. They have more wealth, more technical resources, and they make more steel, than the whole of the rest of the world put together. They are determined that the cause of freedom shall not be trampled down, nor the tide of world progress turned backwards, by the criminal Dictators. While therefore we naturally view with sorrow and anxiety much that is happening in Europe and in Africa, and may happen in Asia, we must not lose our sense of proportion and thus become discouraged or alarmed. When we face with a steady eye the dimculties which lie before us, we may derive new confidence from remembering those we have already overcome. Nothing that is happening now is comparable in gravity with the dangers through which we passed last year. Nothing that can happen in the East is comparable with what is happening in the West. Last time I spoke to you I quoted the lilles of Longfellow which President Roosevelt had written out for me in his own hand. I have some other lines which are less well known but which seem apt and appropriate to our fortunes tonight, and I believe they will be so judged wherever the English language is spoken or the flag offreedom flies: The Churchill Society London. Frontispiece. Society\'s address. Contact the society. CHURCHILL\'S WAR TIME SPEECHES. "Still Captain of our Souls"\xa0 When Churchill visited Harrow on October 29 to hear the traditional songs again, he discovered that an additional verse had been added to one of them. It ran: "Not less we praise in darker days The leader of our nation, And Churchill\'s name shall win acclaim From each new generation. For you have power in danger\'s hour Our freedom to defend, Sir! Though long the fight we know that right Will triumph in the end, Sir!"  Almost a year has passed since I came down here at your Head Master\'s kind invitation in order to cheer myself and cheer the hearts of a few of my friends by singing some of our own songs. The ten months that have passed have seen very terrible catastrophic events in the world - ups and downs, misfortunes - but can anyone sitting here this afternoon, this October afternoon, not feel deeply thankful for what has happened in the time that has passed and for the very great improvement in the position of our country and of our home? Why, when I was here last time we were quite alone, desperately alone, and we had been so for five or six months. We were poorly armed. We are not so poorly armed today; but then we were very poorly armed. We had the unmeasured menace of the enemy and their air attack still beating upon us, and you yourselves had had experience of this attack; and I expect you are beginning to feel impatient that there has been this long lull with nothing particular turning up! But we must learn to be equally good at what is short and sharp and what is long and tough. It is generally said that the British are often better at the last. They do not expect to move from crisis to crisis; they do not always expect that each day will bring up some noble chance of war; but when they very slowly make up their minds that the thing has to be done and the job put through and finished, then, even if it takes months - if it takes years - they do it. Another lesson I think we may take, just throwing our minds back to our meeting here ten months ago and now, is that appearances are often very deceptive, and as Kipling well says, we must  "Émeet with Triumph and Disaster And treat those two impostors just the same." You cannot tell from appearances how things will go. Sometimes imagination makes things out far worse than they are; yet without imagination not much can be done. Those people who are imaginative see many more dangers than perhaps exist; certainly many more than will happen; but then they must also pray to be given that extra courage to carry this far-reaching imagination. But for everyone, surely, what we have gone through in this period - I am addressing myself to the School - surely from this period of ten months this is the lesson: never give in, never give in, never, never, never, never-in nothing, great or small, large or petty - never give in except to convictions of honour and good sense. Never yield to force; never yield to the apparently overwhelming might of the enemy. We stood all alone a year ago, and to many countries it seemed that our account was closed, we were finished. All this tradition of ours, our songs, our School history, this part of the history of this country, were gone and finished and liquidated. Very different is the mood today. Britain, other nations thought, had drawn a sponge across her slate. But instead our country stood in the gap. There was no flinching and no thought of giving in; and by what seemed almost a miracle to those outside these Islands, though we ourselves never doubted it, we now find ourselves in a position where I say that we can be sure that we have only to persevere to conquer. You sang here a verse of a School Song: you sang that extra verse written in my honour, which I was very greatly complimented by and which you have repeated today. But there is one word in it I want to alter - I wanted to do so last year, but I did not venture to. It is the line - "Not less we praise in darker days." I have obtained the Head Master\'s permission to alter darker to sterner. "Not less we praise in sterner days." Do not let us speak of darker days: let us speak rather of sterner days. These are not dark days; these are great days - the greatest days our country has ever lived; and we must all thank God that we have been allowed, each of us according to our stations, to play a part in making these days memorable in the history of our race . The Churchill Society London. THE MAIN INDEX Search the web site. Contact the society. Joint Session of Congress,No one can say that this has not been a full and free debate. No one can say that criticism has been hampered or stifled. No one can say that it has not been a necessary debate. Many will think it has been a valuable debate. But I think there will be very few who upon reflection will doubt that a debate of this far-reaching character and memorable importance, in times of hard and anxious war, with the state of the world what it is, our relationships to other countries being what they are, and our own safety so deeply involved &amp;emdash; very few people will doubt that it should not close without a solemn and formal expression of the opinion of the House in relation both to the Government and to the prosecution of the war. In no country in the world at the present time could a Government conducting a war be exposed to such a stress. No dictator country fighting for its life would dare allow such a discussion. They do not even allow the free transmission of news to their peoples, or even the reception of foreign broadcasts, to which we are all now so hardily inured. Even in the great democracy of the United States the Executive does not stand in the same direct, immediate, day-to-day relation to the Legislative body as we do. The President, in many vital respects independent of the Legislature. Commander-in-Chief of all the Forces of the Republic, has a fixed term of office, during which his authority can scarcely be impugned. But here in this country the House of Commons is master all the time of the life of the Administration. Against its decisions there is only one appeal, the appeal to the nation, an appeal it is very difficult to make under the conditions of a war like this, with a register like this, with air raids and invasion always hanging over us. Therefore, I say that the House of Commons has a great responsibility. It owes it to itself and it owes it to the people and the whole Empire, and to the world cause, either to produce an effective, alternative Administration by which the King\'s Government can be carried on, or to sustain that Government in the enormous tasks and trials which it has to endure. I feel myself very much in need of that help at the present time, and I am sure I shall be accorded it in a manner to give encouragement and comfort, as well as guidance and suggestion. I am sorry that I have not been able to be here throughout the whole debate, but I have read every word of the debate, except what has been spoken and has not yet been printed, and I can assure the House that I shall be ready to profit to the full from many constructive and helpful lines of thought which have been advanced, even when they come from the most hostile quarters. I shall not be like that saint to whom I have before referred in this House, but whose name I have unhappily forgotten, who refused to do right because the devil prompted him. Neither shall I be deterred from doing what I am convinced is right by the fact that I have thought differently about it in some distant, or even in some recent past. When events are moving at hurricane speed and when scenes change with baffling frequency, it would be disastrous to lose that flexibility of mind in dealing with new situations on which I have often been complimented, which is the essential counterpart of a consistent and unswerving purpose. Let me take an instance. During my visit to America, events occurred which altered in a decisive way the question of creating a Minister of Production. President Roosevelt has appointed Mr Donald Nelson to supervise the whole field of American production. All the resources of our two countries are now pooled, in shipping, in munitions and in raw materials, and some similar office, I will not say with exactly the same scope, but of similar scope, must be created here, if harmonious working between Great Britain and the United States is to be maintained upon this very high level. I have been for some weeks carefully considering this, and the strong opinions which have been expressed in the House, even though I do not share their reasoning in all respects, have reinforced the conclusions with which I returned from the United States. I will not of course anticipate any advice that it may be my duty to tender to the Crown. I was forced to inflict upon the House two days ago a very lengthy statement, which cost me a great deal of time and trouble, in the intervals of busy days and nights, to prepare. I do not desire to add to it to any important extent. It would not be possible for me to answer all the criticisms and inquiries which have been made during this Debate. I have several times pointed out to the House the disadvantage I lie under, compared with the leaders of other countries who are charged with general war direction, in having to make so many public statements, and the danger that in explaining fully our position to our friends we may also be stating it rather too fully to our enemies. Moreover, the Lord Privy Seal, in his excellent speech yesterday, has already replied to a number of the controversial issues which were raised. There are therefore only a few points with which I wish to deal today, but they are important points. The first is the advantage, not only to Britain but to the Empire, of the arrival of powerful American Army and Air Forces in the United Kingdom. First of all, this meets the desire of the American people and of the leaders of the Republic that the large mass of trained and equipped troops which they have under arms in the United States shall come into contact with the enemy as close and as soon as possible. Secondly, the presence of these forces in these Islands imparts a greater freedom of movement overseas, to theatres where we are already engaged, of the mature and seasoned divisions of the British Home Army. It avoids the difficulty of reinforcing theatres where we are engaged with troops of another nation, and all the complications of armament and command which arise therefrom. Therefore, we must consider this arrival of the American Army as giving us a latitude of manoeuvre which we have not hitherto possessed. Thirdly, the presence in our Islands of a Force of heavy but unknown strength, and the establishment of a broader bridgehead between us and the New WorId, constituted an additional deterrent to invasion at a time when the successful invasion of these Islands is Hitler\'s last remaining hope of total victory. Fourthly - and here I address myself to what has been said about aiding and succouring Australia and New Zealand &amp;emdash; the fact that well-equipped American divisions can be sent into these Islands so easily and rapidly will enable substantial supplies of weapons and munitions, now being made in the United States for our account, to be sent direct on the other side of the world to Australia and New Zealand, to meet the new dangers of home defence which are cast upon them by the Japanese war. Lastly, this whole business cannot do Mr de Valera any harm, and it may even do him some good. It certainly offers a measure of protection to Southern Ireland, and to Ireland as a whole, which she could not others enjoy. I feel sure that the House will find these reasons, or most of them, solid and satisfactory. The course of this debate has mainly turned upon the admitted inadequacy of our preparations to meet the full onslaught of the new and mighty military opponent who has launched against us his whole force, his whole energies and fury in Malaya and in the Far East. There is not very much I wish to add, and that only by way of illustration, to the connected argument which I deployed to the House on Tuesday. The speeches of the hon. Members for Kidderminster (Sir J. Wardlaw-Milne) and Seaham (Mr Shinwell) dwelt from different angles upon this all-important issue. I do not, of course, pretend that there may not have been avoidable shortcomings or mistakes, or that some oversight may not have been shown in making use of our resources, limited though those resources were. While I take full responsibility for the broad strategic dispositions, that does not mean that scandals, or inefficiency or misbehaviour of functionaries at particular moments and particular places, occurring on the spot, will not be probed or will be covered by the general support I gave to our commanders in the field. I am by no means claiming that faults have not been committed in the minor sphere, and faults for which the Government are blameworthy. But when all is said and done, the House must not be led into supposing that even if everything on the spot had gone perfectly - which is rare in war &amp;emdash; they must not be led into supposing that this would have made any decisive difference to the heavy British and American forfeits which followed inexorably from the temporary loss of sea-power in the Pacific, combined with the fact of our being so fully extended elsewhere. Even that is not exhaustive, because, before the defeat of Pearl Harbour - I am speaking of eight or nine months ago - our ability to defend the Malay Peninsula was seriously prejudiced by the incursion of the Japanese into French Indo-China and the steady building-up of very powerful forces and bases there. Even at the time when I went to meet the President in Newfoundland the invasion of Siam seemed imminent, and probably it was due to the measures which the President took as the result of our conversations that this attack was staved off for so long, and might well have been staved off indefinitely. In ordinary circumstances, if we had not been engaged to the last ounce in Europe and the Nile Valley, we should ourselves, of course, have confronted the Japanese aggression into Indo-China with the strongest possible resistance from the moment when they began to build up a large military and air power. We were not in a position to do this. If we had gone to war with Japan to stop the Japanese coming across the long ocean stretches from their own country, and establishing themselves within close striking distance of the Malay Peninsula and Singapore, we should have had to fight alone, perhaps for a long time, the whole of the Japanese attacks upon our loosely knit establishments and possessions in this vast Oriental region. As I said on Tuesday, we have never had the power, and we never could have had the power, to fight Germany, Italy and Japan single-handed at the same time. We therefore had to watch the march of events with an anxiety which increased with the growth of the Japanese concentrations, but at the same time was offset by the continuous approach of the United States ever nearer to the confines of the War. It must not be supposed that endless, repeated consultations and discussions were not held by the Staffs, by the Defence Committee, by Ministers, and that Staff conferences were not held at Singapore. Contact was maintained with Australia and New Zealand, and with the United States to a lesser degree. All this went on; but, when all was said and done, there was the danger, and the means of meeting it had yet to be found. Ought we not in that interval to have considered the question which the House must ask itself - I want to answer the case quite fairly - whether, in view of that menace, apart from minor precautions, many of which were taken and some of which were not, we ought not to have reduced our aid in munitions to Russia? A part of what we sent to Russia would have made us, I will not say safe, because I do not think that that was possible, in view of what happened at sea, but far better prepared in Burma and Malaya than we were. Figures were mentioned by the hon. Member for Seaham yesterday. He will not expect me to confirm or deny those figures, but, taking them as a basis, half of that would have made us far better off, and would have dazzled the eyes of Sir Robert Brooke-Popham, who so repeatedly asked for more supplies of all those commodities of which we were most short. We did not make such a reduction in Russian supplies, and I believe that the vast majority of opinion in all parts of the House, and in the country, endorses our decision now, even after the event. If they had to go back, they would take it again, even although they see now what consequences have arisen. I entirely agree about the vital importance of the Burma Road and of fighting with every means in our power to keep a strong hand-grasp with the Chinese Armies and the closest contact with their splendid leader Chiang Kai-shek. Nothing has prevented the employment of Indian troops in that area, except the use of them in other theatres and the immense difficulties of transport in those regions. So much for the Russian policy, which, for good or for ill, has played a very great part in the thoughts and actions of the people of this country in this struggle, and I believe has played a very important - not by any means a decisive part, but a very important part - in the crushing defeats which have been inflicted on the German army and the possible demoralisation of the wicked regime which uses that army. But, apart from Russia, what about the campaign in Libya? What were the reasons which made that a necessary operation? First, we had to remove, and probably we have removed, the menace to the Nile Valley from the West for a considerable time, thus liberating important forces and still more important transport to meet what seemed to be an impending attack through the Caucasus from the North. Secondly, this was the only place where we could open a second front against the enemy. Everyone will remember, conveniently short as memories may be, the natural and passionate impatience which our prolonged inactivity aroused in all our hearts while Russia seemed to be being battered to pieces by the fearful machinery of the German army. There is no doubt whatever that, although our offensive in Libya was on a small scale compared with the mighty struggle on the Russian front, it nevertheless drew important German air forces from that front. They were moved at a most critical moment in that battle and transferred to the Mediterranean theatre. Thirdly, this second front in the Western Desert afforded us the opportunity of fighting a campaign against Germany and Italy on terms most costly to them. If there be any place where we can fight them with marked advantage, it is in the Western Desert and Libya, because not only, as I have explained, have we managed to destroy two-thirds of their African army and a great amount of its equipment and air power, but also to take a formidable toll of all their reinforcements of men and materials, and above all of their limited shipping across the Mediterranean by which they were forced to maintain themselves. The longer they go on fighting in this theatre the longer that process will go on, and there is no part of the world where you have a chance of getting better results for the blood and valour of your soldiers. For these reasons, I am sure that it was a sound decision, and one with which all our professional advisers agreed, to take the offensive in the Western Desert and to do our utmost to make it a success. We have been over this ground in Cyrenaica already. The first time we took a quarter of a million Italian prisoners without serious loss to ourselves. The second time we have accounted for 60,000 men, including many Germans, for the loss of only one-third to ourselves. Even if we have to do part of it a third time, as seems possible, in view of the tactical successes of the enemy attacks upon our armoured brigade last week, there seems no reason why the campaign should not retain its profitable character in the war in North East Africa and become a festering sore, a dangerous drain, upon the German and Italian resources. This is the question: Should we have been right to sacrifice all this, to stand idly on the defensive in the Western Desert and send all our available Forces to garrison Malaya and guard against a war against Japan which nevertheless might not have taken place, and which, I believe, did take place only through the civil Government being overwhelmed by a military coup d\'etat? That is a matter of opinion, and it is quite easy for those who clamoured eagerly for opening an offensive in Libya to dilate upon our want of foresight and preparedness in the Far East. That is a matter on which anyone can form an opinion, and those are lucky who do not have to form one before the course of events is known. I come now to this battle which is raging in Johore. I cannot tell how it will go or how the attack upon the Island of Singapore will go, but a steady stream of reinforcements, both air and troops, has flowed into the island for several weeks past. The forces which have been sent were, of course, set in motion within a few days, and some within a few hours, of the Japanese declaration of war. To sum up, I submit to the House that the main strategic and political decision to aid Russia, to deliver an offensive in Libya and to accept a consequential state of weakness in the then peaceful theatre of the Far East, was sound, and will be found to have played a useful part in the general course of the War, and that this is in no wise invalidated by the unexpected naval misfortunes and the heavy forfeits which we have paid, and shall have to pay, in the Far East. For this Vote of Confidence, on that I rest. There is, however, one episode of a tactical rather than a strategic character about which many questions have been asked, both here and in another place, and to which it is not easy to refer. I mean, of course, the dispatch from this country of the Prince of Wa1es during November last and, secondly, the operation which led to the sinking of the Prince of Wales and of the Repulse, which had started earlier. This sinking took place on 9th December. It was the policy of the War Cabinet and the Defence Committee, initiated by the Naval Staff, to build up in the Indian Ocean, and base mainly on Singapore, a battle squadron to act, it was hoped, in co-operation with the United States fleet in general protective work in Far Eastern waters. I am not at liberty to state how these plans stand at the present time, but the House may be assured that nothing has been left undone, which was in our power, to repair the heavy losses which have been sustained. My right hon. Friend the Member for East Edinburgh (Mr Pethick-Lawrence) has asked very properly why the Prince of Wales and Repulse were sent to Eastern waters if they could not be properly protected by aircraft. The answer to this question is that the decision to send those ships in advance to the Far East was taken in the hope, primarily, of deterring the Japanese from going to war at all, or, failing that, of deterring her from sending convoys into the Gulf of Siam, having regard to the then position of the strong American fleet at Hawaii. After long and careful consideration it was decided, in view of the importance of having in Far Eastern waters at least one ship which could catch or kill any individual vessel of the enemy - the Americans then not having a new battleship available - to send the Prince of Wales. Moreover, she was the only ship available at the moment which could reach the spot in time for any deterrent effect to be produced. The intention was that these two fast ships, whose arrival at Cape Town was deliberately not concealed, should not only act as a deterrent upon Japan coming into the war but a deterrent upon the activities of individual heavy ships of the enemy, our ships being able to choose their moment to fight. The suggestion of the hon. and gallant Member for Epsom (Sir A. Southby) that the Naval Staff desired to send an aircraft-carrier and were overruled by me is as mischievous as it is untrue. It was always the intention that any fast ships proceeding to the Far East should be accompanied by an aircraft-carrier. Unfortunately, at the time, with the exception of an aircraft-carrier in home waters, not a single ship of this type was available. Through a succession of accidents, some of very slight consequence, all of them, except the one with the Home Fleet, were under repair. Accordingly, the Prince of Wales and the Repulse arrived at Singapore, and it was hoped they would shortly leave again for secret bases and the broad waters, which would enable them to put a continuous restraining preoccupation on all the movements of the enemy. That is the first phase of the story. I now come to the further question of why, the presence of the two ships having failed to achieve the deterrent object, Pearl Harbour having occurred, and the Japanese having begun war, they were sent North from Singapore to oppose the Japanese landings from the Gulf of Siam on the Kra Peninsula. Admiral Tom Phillips, as Vice-Chief of the Naval Staff, was fully acquainted with the whole policy I have described, and had sailed in the Prince of Wales to carry it out. On 8th December he decided, after conferring with his captain and staff officers, that in the circumstances, and in view of the movement of Japanese transports with a weak fighting escort towards the Kra Peninsula, drastic and urgent naval action was required. This action, if successful, would have presented the Army with a good prospect of defeating the landings and possibly of paralysing the invasion of Malaya at its birth. The stakes on both sides were very high. The prize was great if gained; if lost, our danger most grievous. Admiral Phillips was fully aware of the risk, and he took steps for air reconnaissance to see whether there was an enemy aircraft-carrier about, and for fighter protection up to the limit of the short-range fighters available. Only after he left harbour was he informed that fighter protection could not be provided in the area in which he intended to operate, but in view of the low visibility he decided to stand on. Later, in accordance with his predetermined plans, he turned back, because the weather began to clear, and he knew he had been sighted. However, later still, during his retirement, a further landing more to the south of the peninsula was reported, presenting an even more serious threat to Malaya, and he decided to investigate this. It was on returning from this investigation, which proved to be negative, that his force was attacked, not, as has been supposed, by torpedo or bomber aircraft flown off a carrier, but by very long-range, shore-based, heavy, two-engined torpedo bombers from the main Japanese aerodromes 400 miles away. In the opinion of the Board of Admiralty, which it is my duty to pronounce, the risks which Admiral Phillips took were fair and reasonable, in the light of the knowledge which he had of the enemy, when compared with the very urgent and vital issues at stake on which the whole safety of Malaya might have depended. I have given an account of this episode. No doubt the Admiralty will have its own inquiry for the purpose of informing itself and of studying the lessons, but I could not bring myself, on the first day that this matter was mentioned, when the information I had was most scanty, to pronounce condemnation on the audacious, daring action of Admiral Tom Phillips in going forward, although he knew of the risks he ran, when the prize might have been 20,000 of the enemy drowned in the sea, and a relief from the whole catalogue of misfortunes which have since come upon us, and have still to come. I have finished, and it only remains for us to act. I have tried to lay the whole position before the House as far as public interest will allow, and very fully have we gone into matters. On behalf of His Majesty\'s Government, I make no complaint of the Debate, I offer no apologies, I offer no excuses, I make no promises. In no way have I mitigated the sense of danger and impending misfortunes of a minor character and of a severe character which still hang over us, but at the same time I avow my confidence, never stronger than at this moment, that we shall bring this conflict to an end in a manner agreeable to the interests of our country, and in a manner agreeable to the future welfare of the world. I have finished. Let every man act now in accordance with what he thinks is his duty in harmony with his heart and conscience. \xa0 After a series of defeats from Dunkirk to Singapore, Churchill could finally tell the House of Commons that "we have a new experience. We have victory - a remarkable and definite victory." Alexander and Montgomery turned back Rommel\'s forces at El Alamein, thus winning what Churchill called "The Battle of Egypt." I have never promised anything but blood, tears, toil, and sweat. Now, however, The bright gleam has caught the helmets of our soldiers, and warmed and cheered all our hearts. The late M. Venizelos observed that in all her wars England -- he should have said Britain, of course -- always wins one battle -- the last. It would seem to have begun rather earlier this time. General Alexander, with his brilliant comrade and lieutenant, General Montgomery, has gained a glorious and decisive victory in what I think should be called the battle of Egypt. Rommel\'s army has been defeated. It has been routed. It has been very largely destroyed as a fighting force. This battle was not fought for the sake of gaining positions or so many square miles of desert territory. General Alexander and General Montgomery fought it with one single idea. they meant to destroy the armed force of the enemy and to destroy it at the place where the disaster would be most far-reaching and irrecoverable.... Now this is not the end. It is not even the beginning of the end. but it is, perhaps, the end of the beginning. Henceforth Hitler\'s Nazis will meet equally well armed, and perhaps better armed troops. Hence forth they will have to face in many theatres of war that superiority in the air which they have so often used without mercy against other, of which they boasted all round the world, and which they intended to use as an instrument for convincing all other peoples that all resistance to them was hopeless.... We mean to hold our own. I have not become the King\'s First Minister in order to preside over the liquidation of the British Empire. For that task, if ever it were prescribed, someone else would have to be found, and, under democracy, I suppose the nation would have to be consulted. I am proud to be a member of that vast commonwealth and society of nations and communities gathered in and around the ancient British monarchy, without which the good cause might well have perished from the face of the earth. Here we are, and here we stand, a veritable rock of salvation in this drifting world.... The British and American affairs continue to prosper in the Mediterranean, and the whole event will be a new bond between the English-speaking peoples and a new hope for the whole world. I recall to you some lines of Byron, which seem to me to fit the event, the hour, and the theme: June 6, 1944 House of Commons On June 4, British and American troops entered Rome. On June 6, the long-awaited Allied invasion of Europe began, the principal landings being in Normandy. The House should, I think, take formal cognizance of the liberation of Rome by the Allied Armies under the Command of General Alexander, with General Clark of the United States Service and General Oliver Leese in command of the fifth and Eighth Armies respectively. This is a memorable and glorious event, which rewards the intense fighting of the last five months in Italy. The original landing, made on January 22nd at Anzio, has, in the end, borne good fruit. In the first place, Hitler was induced to send to the south of Rome eight or nine divisions which he may well have need of elsewhere. Secondly, these divisions were repulsed, and their teeth broken, by the successful resistance of the Anzio bridgehead forces in the important battle which took place in the middle of February. The losses on both sides were heavy-the Allies losing about 20,000 men, and the Germans about 25,000 men. Thereafter, the Anzio bridgehead was considered by the enemy to be impregnable. Meanwhile, the great regrouping of the main Army had to take place before the attacks could be renewed. These attacks were at first unsuccessful, and Cassino still blocked the advance. On May 11th, General Alexander began his present operation, and after unceasing and intense fighting by the whole of the Armies, broke into the enemy\'s lines and entered the Liri Valley. It is noteworthy that, counting from right to left, the whole of the Polish, British Empire, French, and United States Forces broke the German lines in front of them by frontal attack. That has an important bearing on other matters, which I shall come to before I sit down.  At what was judged the right moment the bridgehead force, which by this time had reached a total of nearly 150,000 men, fell upon the retiring enemy\'s flank and threatened his retreat. The junction of the main Armies with the bridgehead forces drove the enemy off his principal lines of retreat to the North, forcing a great part of his army to retire in considerable disorder with heavy losses, especially in material, through mountainous country. The Allied Forces, with great rapidity, were regrouped, with special emphasis on their left flank, which soon deployed against Rome after cutting the important highway. The American and other Forces of the Fifth Army broke through the enemy\'s last line and entered Rome, where the Allied troops have been received with joy by the population.  This entry and liberation of Rome mean that we shall have the power to defend it from hostile air attack, and to deliver it from the famine with which it was threatened. However, General Alexander\'s prime object has never been the liberation of Rome, great as are the moral, political and psychological advantages of that episode. The Allied Forces, with the Americans in the van, are driving ahead, northwards, in relentless pursuit of the enemy. The destruction of the enemy army has been, throughout, the single aim, and they are now being engaged at the same time along the whole length of the line as they attempt to escape to the North. It is hoped that the 20,000 prisoners already taken will be followed by further captures in future, and that the condition of the enemy\'s army, which he has crowded into Southern Italy, will be decisively affected. It would be futile to attempt to estimate our final gains at the present time.  It is our duty, however, to pay the warmest tribute of gratitude and admiration to General Alexander for the skill with which he has handled this Army of so many different States and nations, and for the tenacity and fortitude with which he has sustained the long periods when success was denied. In General Clark the United States Army has found a fighting leader of the highest order, and the qualities of all Allied troops have shone in noble and unjealous rivalry.  The great strength of the Air Forces at our disposal, as well as the preponderance in armour, has undoubtedly contributed in a notable and distinctive manner to the successes which have been achieved. We must await further developments in the Italian theatre before it is possible to estimate the magnitude and quality of our gains, great and timely though they certainly are. I have also to announce to the House that during the night and the early hours of this morning the first of the series of landings in force upon the European Continent has taken place. In this case the liberating assault fell upon the coast of France. An immense armada of upwards of 4,000 ships, together with several thousand smaller craft, crossed the Channel. Massed airborne landings have been successfully effected behind the enemy lines, and landings on the beaches are proceeding at various points at the present time. The fire of the shore batteries has been largely quelled. The obstacles that were constructed in the sea have not proved so difficult as was apprehended. The Anglo-American Allies are sustained by about 11,000 first line aircraft, which can be drawn upon as may be needed for the purposes of the battle. I cannot, of course, commit myself to any particular details. Reports are coming in in rapid succession. So far the Commanders who are engaged report that everything is proceeding according to plan. And what a plan! This vast operation is undoubtedly the most complicated and difficult that has ever taken place. It involves tides, wind, waves, visibility, both from the air and the sea standpoint, and the combined employment of land, air and sea forces in the highest degree of intimacy and in contact with conditions which could not and cannot be fully foreseen. There are already hopes that actual tactical surprise has been attained, and we hope to furnish the enemy with a succession of surprises during the course of the fighting. The battle that has now begun will grow constantly in scale and in intensity for many weeks to come, and I shall not attempt to speculate upon its course. This I may say, however. Complete unity prevails throughout the Allied Armies. There is a brotherhood in arms between us and our friends of the United States. There is complete confidence in the supreme commander, General Eisenhower, and his lieutenants, and also in the commander of the Expeditionary Force, General Montgomery. The ardour and spirit of the troops, as I saw myself, embarking in these last few days was splendid to witness. Nothing that equipment, science or forethought could do has been neglected, and the whole process of opening this great new front will be pursued with the utmost resolution both by the commanders and by the United States and British Governments whom they serve. Later in the day and in the House Mr Churchill said:-   I have been at the centres where the latest information is received, and I can state to the House that this operation is proceeding in a thoroughly satisfactory manner. Many dangers and difficulties which at this time last night appeared extremely formidable are behind us. The passage of the sea has been made with far less loss than we apprehended. The resistance of the batteries has been greatly weakened by the bombing of the Air Force, and the superior bombardment of our ships quickly reduced their fire to dimensions which did not affect the problem. The landings of the troops on a broad front, both British and American-Allied troops, I will not give lists of all the different nationalities they represent-but the landings along the whole front have been effective, and our troops have penetrated, in some cases, several miles inland. Lodgments exist on a broad front. The outstanding feature has been the landings of the airborne troops, which were on a scale far larger than anything that has been seen so far in the world. These landings took place with extremely little loss and with great accuracy. Particular anxiety attached to them, because the conditions of light prevailing in the very limited period of the dawn-just before the dawn-the conditions of visibility made all the difference. Indeed, there might have been something happening at the last minute which would have prevented airborne troops from playing their part. A very great degree of risk had to be taken in respect of the weather. But General Eisenhower\'s courage is equal to all the necessary decisions that have to be taken in these extremely difficult and uncontrollable matters. The airborne troops are well established, and the landings and the follow-ups are all proceeding with much less loss-very much less-than we expected. Fighting is in progress at various points. We captured various bridges which were of importance, and which were not blown up. There is even fighting proceeding in the town of Caen, inland. But all this, although a very valuable first step-a vital and essential first step-gives no indication of what may be the course of the battle in the next days and weeks, because the enemy will now probably endeavour to concentrate on this area, and in that event heavy fighting will soon begin and will continue without end, as we can push troops in and he can bring other troops up. It is, therefore, a most serious time that we enter upon. Thank God, we enter upon it with our great Allies all in good heart and all in good friendship. My friendship with the great man to whose work and fame we pay our tribute today began and ripened during this war. I had met him, but only for a few minutes, after the close of the last war, and as soon as I went to the Admiralty in September 1939, he telegraphed, inviting me to correspond with him direct on naval or other matters if at any time I felt inclined. Having obtained the permission of the Prime Minister, I did so. Knowing President Roosevelt\'s keen interest in sea warfare, I furnished him with a stream of information about our naval affairs, and about the various actions, including especially the action of the Plate River, which lighted the first gloomy winter of the war. When I became Prime Minister, and the war broke out in all its hideous fury, when our own life and survival hung in the balance, I was already in a position to telegraph to the President on terms of an association which had become most intimate and, to me most agreeable. This continued through all the ups and downs of the world struggle until Thursday last, when I received my last messages from him These messages showed no falling-off in his accustomed clear vision and vigour upon perplexing and complicated matters. I may mention that this correspondence which, of course, was greatly increased after the United States\' entry into the war, comprises, to and fro between us, over 1700 messages. Many of these were lengthy messages, and the majority dealt with those difficult points which come to be discussed upon the level of Heads of Governments only after official solutions have not been reached at other stages. To this correspondence there must be added our nine meetings - at Argentina, three in Washington, at Casablanca, at Teheran, two at Quebec and, last of all, at Yalta, comprising in all about 120 days of close personal contact, during a great part of which I stayed with him at the White House, or at his home at Hyde Park or in his retreat in the Blue Mountains, which he called \'Shangri-la\'. I conceived an admiration for him as a statesman, a man of affairs, and a war leader. I felt the utmost confidence in his upright, inspiring character and outlook, and a personal regard and affection I must say &amp;emdash; for him beyond my power to express today. His love of his own country, his respect for its constitution, his power of gauging the tides and currents of its mobile public opinion, were always evident, but added to these were the beatings of that generous heart which was always stirred to anger and to action by spectacles of aggression and oppression by the strong against the weak. It is, indeed, a loss - a bitter loss to humanity - that those heart-beats are stilled for ever. President Roosevelt\'s physical affliction lay heavily upon him. It was a marvel that he bore up against it through all the many years of tumult and storm. Not one man in ten millions, stricken and crippled as he was, would have attempted to plunge into a life of physical and mental exertion and of hard, ceaseless political controversy. Not one in ten millions would have tried, not one in a generation would have succeeded, not only in entering this sphere, not only in acting vehemently in it, but in becoming indisputable master of the scene. In this extraordinary effort of the spirit over the flesh, of will-power over physical infirmity, he was inspired and sustained by that noble woman his devoted wife, whose high ideals marched with his own, and to whom the deep and respectful sympathy of the House of Commons flows out today in all fullness. There is no doubt that the President foresaw the great dangers closing in upon the prewar world with far more prescience than most well-informed people on either side of the Atlantic, and that he urged forward with all his power such precautionary military preparations as peace-time opinion in the United States could be brought to accept. There never was a moment\'s doubt, as the quarrel opened, upon which side his sympathies lay. The fall of France, and what seemed to most people outside this Island the impending destruction of Great Britain, were to him an agony although he never lost faith in us. They were an agony to him not only on account of Europe, but because of the serious perils to which the United States herself would have been exposed had we been overwhelmed or the survivors cast down under the German yoke. The bearing of the British nation at that time of stress, when we were all alone, filled him and vast numbers of his countrymen with the warmest sentiments towards our people. He and they felt the blitz of the stern winter of 1940&amp;emdash;41, when Hitler set himself to rub out the cities of our country, as much as any of us did, and perhaps more indeed, for imagination is often more torturing than reality. There is no doubt that the bearing of the British and, above all, of the Londoners, kindled fires in American bosoms far harder to quench than the conflagrations from which we were suffering. There was also at that time, in spite of General Wavell\'s victories &amp;emdash; all the more, indeed, because of the reinforcements which were sent from this country to him &amp;emdash; the apprehension widespread in the United States that we should be invaded by Germany after the fullest preparation in the spring of 1941. It was in February that the President sent to England the late Mr Wendell Willkie, who, although a political rival and an opposing candidate, felt as he did on many important points. Mr Willkie brought a letter from Mr Roosevelt, which the President had written in his own hand, and this letter contained the famous lines of Longfellow:...\xa0_____________+_____________ Our duty is to congratulate His Majesty\'s Government on the very great improvement in our prospects at home, which comes from the complete victory gained over Japan and the establishment of peace throughout the world. Only a month ago it was necessary to continue at full speed and at enormous cost all preparations for a long and bloody campaign in the Far East. In the first days of the Potsdam Conference President Truman and I approved the plans submitted to us by the combined Chiefs of Staff for a series of great battles and landings in Malaya, in the Netherlands East Indies, and in the homeland of Japan itself. These operations involved an effort not surpassed in Europe, and no one could measure the cost in British and American life and treasure they would require. Still less could it be known how long the stamping out of the resistance of Japan in the many territories she had conquered, and especially in her homeland, would take. All the while the whole process of turning the world from war to peace would be hampered and delayed. Every form of peace activity was half-strangled by the overriding priorities of war. No clear-cut decisions could be taken in the presence of this harsh dominating uncertainty. During the last three months an element of barring dualism has complicated every problem of policy and administration. We had to plan for peace and war at the same time. Immense armies were being demobilised; another powerful army was being prepared and dispatched to the other side of the globe. All the personal stresses among millions of men eager to return to civil life, and hundreds of thousands of men who would have to be sent to new and severe campaigns in the Far East, presented themselves with growing tension. This dualism affected also every aspect of our economic and financial life. How to set people free to use their activities in reviving the life of Britain, and at the same time to meet the stern demands of the war against Japan, constituted one of the most perplexing and distressing puzzles that in a long lifetime of experience I have ever faced.  I confess it was with great anxiety that I surveyed this prospect a month ago. Since then I have been relieved of the burden. At the same time that burden, heavy though it still remains, has been immeasurably lightened. On I7th July there came to us at Potsdam the eagerly awaited news of the trial of the atomic bomb in the Mexican desert. Success beyond all dreams crowned this sombre, magnificent venture of our American Allies. The detailed reports of the Mexican desert experiment, which were brought to us a few days later by air, could leave no doubt in the minds of the very few who were informed, that we were in the presence of a new factor in human affairs, and possessed of powers which were irresistible. Great Britain had a right to be consulted in accordance with Anglo-American agreements. The decision to use the atomic bomb was taken by President Truman and myself at Potsdam, and we approved the military plans to unchain the dread, pent-up forces. From that moment our outlook on the future was transformed. In preparation for the results of this experiment, the statements of the President and of Mr Stimson and my own statement, which by the courtesy of the Prime Minister was subsequently read out on the broadcast, were framed in common agreement. Marshal Stalin was informed by President Truman that we contemplated using an explosive of incomparable power against Japan, and action proceeded in the way we all now know. It is to this atomic bomb more than to any other factor that we may ascribe the sudden and speedy ending of the war against Japan. Before using it, it was necessary first of all to send a message in the form of an ultimatum to the Japanese which would apprise them of what unconditional surrender meant. This document was published on 26th July - the same day that another event, differently viewed on each side of the House, occurred [the result of the General Election and the resignation of Churchill from the Premiership. The assurances given to Japan about her future after her unconditional surrender had been made were generous in the extreme. When we remember the cruel and treacherous nature of the utterly unprovoked attack made by the Japanese warlords upon the United States and Great Britain, these assurances must be considered was magnanimous in a high degree. In a nutshell, they implied \'Japan ~or the Japanese\', and even access to raw materials, apart from their control, was not denied to their densely populated homeland. we felt that in view of the new and fearful agencies of war-power about to be employed, every inducement to surrender, compatible with our declared policy, should be set before them. This we owed to our consciences before using this awful weapon.  Secondly, by repeated warnings, emphasised by heavy bombing attacks, an endeavour was made to procure the general exodus of the civil population from the threatened cities. Thus everything in human power, prior to using the atomic bomb, was done to spare the civil population of Japan. There are voices which assert that the bomb should never have been used at all. I cannot associate myself with such ideas. Six years of total war have convinced most people that had the Germans or Japanese discovered this new weapon, they would have used it upon us to our complete destruction with the utmost alacrity. I surprised that very worthy people, but people who in most cases had no intention of proceeding to the Japanese front themselves, should adopt the position that rather than throw this bomb, we should have sacrificed a million American, and a quarter of a million British lives in the desperate battles and massacres of an invasion of Japan. Future generations will judge these dire decisions, and I believe that if they find themselves dwelling in a happier world from which war has been banished, and where freedom reigns, they will not condemn those who struggled for their benefit amid the horrors and miseries of this gruesome and ferocious epoch. The bomb brought peace, but men alone can keep that peace, and hence forward they will keep it under penalties which threaten the survival, not only of civilisation but of humanity itself. I may say that I am in entire agreement with the President that the secrets of the atomic bomb should so far as possible not be imparted at the present time to any other country in the world. This is in no design or wish for arbitrary power, but for the common safety of the world. Nothing can stop the progress of research and experiment in every country, but although research will no doubt proceed in many places, the construction of the immense plants necessary to transform theory into action cannot be improvised in any country. For this and for many other reasons the United States stand at this moment at the summit of the world. I rejoice that this should be so. Let them act up to the level of their power and their responsibility, not for themselves but for others, for all men in all lands, and then a brighter day may dawn upon human history. So far as we know, there are at least three and perhaps four years before the concrete progress made in the United States can be overtaken. In these three years we must remould the relationships of all men, wherever they dwell, in all the nations. We must remould them in such a way that these men do not wish or dare to fall upon each other for the sake of vulgar and out-dated ambitions or for passionate differences in ideology, and that international bodies of supreme authority may give peace on earth and decree justice among men. Our pilgrimage has brought us to a sublime moment in the history of the world. From the least to the greatest, all must strive to be worthy of these supreme opportunities. There is not an hour to be wasted; there is not a day to be lost. It would in my opinion be a mistake to suggest that the Russian declaration of war upon Japan was hastened by the use of the atomic bomb. My understanding with Marshal Stalin in the talks which I had with him had been, for a considerable time past, that Russia would declare war upon Japan within three months of the surrender of the German armies. The reason for the delay of three months was, of course, the need to move over the trans-Siberian Railway the large reinforcements necessary to convert the Russian-Manchurian army from a defensive to an offensive strength. Three months was the time mentioned, and the fact that the German armies surrendered on 8th May, and the Russians declared war on Japan on 8th August, is no mere coincidence, but another example of the fidelity and punctuality with which Marshal Stalin and his valiant armies always keep their military engagements.  I now turn to the results of the Potsdam Conference so far as they have been made public in the agreed communique and in President Truman\'s very remarkable speech of a little more than a week ago. There has been general approval of the arrangements proposed for the administration of Germany by the Allied Control Commission during the provisional period of military government. This regime is both transitional and indefinite. The character of Hitler\'s Nazi party was such as to destroy almost all independent elements in the German people. The struggle was fought to the bitter end. The mass of the people were forced to drain the cup of defeat to the dregs. A headless Germany has fallen into the hands of the conquerors. It may be many years before any structure of German national life will be possible, and there will be plenty of time for the victors to consider how the interests of world peace are affected thereby.  In the meanwhile, it is in my view of the utmost importance that responsibility should be effectively assumed by German local bodies for carrying on under Allied supervision all the processes of production and of administration necessary to maintain the life of a vast population. It is not possible for the Allies to bear responsibility by themselves. We cannot have the German masses lying down upon our hands and expecting to be fed, organised and educated over a period of years by the Allies. We must do our best to help to avert the tragedy of famine. But it would be in vain for us in our small Island, which still needs to import half its food, to imagine that we can make any further appreciable contribution in that respect. The rationing of this country cannot be made more severe without endangering the life and physical strength of our people, all of which will be needed for the immense tasks we have to do. I, therefore, most strongly advise the encouragement of the assumption of responsibility by trustworthy German local bodies in proportion as they can be brought into existence. The Council which was set up at Potsdam of the Foreign Secretaries of the three, four or five Powers, meeting in various combinations as occasion served, affords a new and flexible machinery for the continuous further study of the immense problems that lie before us in Europe and Asia. I am very glad that the request that I made to the Conference that the seat of the Council\'s permanent Secretariat should be London, was granted. I must say that the late Foreign Secretary [Mr Anthony Eden], who has, over a long period, gained an increasing measure of confidence from the Foreign Secretaries of Russia and the United States, and who through the European Advisory Committee which is located in London has always gained the feeling that things could be settled in a friendly and easy way, deserves some of the credit for the fact that these great Powers willingly accorded us the seat in London of the permanent Secretariat. It is high time that the place of London, one of the controlling centres of international world affairs, should at last be recognised. It is the oldest, the largest, the most battered capital, the capital which was first in the war, and the time is certainly overdue when we should have our recognition.  I am glad also that a beginning is to be made with the evacuation of Persia [Iran] by the British and Russian armed forces, in accordance with the triple treaty which we made with each other and with Persia in 1941. Although it does not appear in the communique, we have since seen it announced that the first stage in the process, namely the withdrawal of Russian and British troops from Teheran, has already begun or is about to begin. There are various other matters arising out of this Conference which should be noted as satisfactory. We should not, however, delude ourselves into supposing that the results of this first Conference of the victors were free from disappointment or anxiety, or that the most serious questions before us were brought to good solutions. Those which proved incapable of agreement at the Conference have been relegated to the Foreign Secretaries\' Council, which, though most capable of relieving difficulties, is essentially one gifted with less far-reaching powers. Other grave questions are left for the final peace settlement, by which time many of them may have settled themselves, not necessarily in the best way. It would be at once wrong and impossible to conceal the divergences of view which exist inevitably between the victors about the state of affairs in Eastern and Middle Europe. I do not at all blame the Prime Minister or the new Foreign Secretary, whose task it was to finish up the discussions which we had begun. I am sure they did their best. We have to realise that no one of the three leading Powers can impose its solutions upon others, and that the only solutions possible are those which are in the nature of compromise. We British have had very early and increasingly to recognise the limitations of our own power and influence, great though it be, in the gaunt world arising from the ruins of this hideous war. It is not in the power of any British Government to bring home solutions which would be regarded as perfect by the great majority of Members of this House, wherever they may sit. I must put on record my own opinion that the provisional Western Frontier agreed upon for Poland, running from Stettin on the Baltic, along the Oder and its tributary, the Western Neisse, comprising as it does one-quarter of the arable land of all Germany, is not a good augury for the future map of Europe. We always had in the Coalition Government a desire that Poland should receive ample compensation in the west for the territory ceded to Russia east of the Curzon Line. But here I think a mistake has been made, in which the Provisional Government of Poland have been an ardent partner, by going far beyond what necessity or equity required. There are few virtues that the Poles do not possess - and there are few mistakes they have ever avoided. I am particularly concerned at this moment, with the reports reaching us of the conditions under which the expulsion and exodus of Germans from the new Poland are being carried out. Between eight and nine million persons dwelt in those regions before the war. The Polish Government say that there are still 1,500,000 of these, not yet expelled, within their new frontiers. Other millions must have taken refuge behind the British and American lines, thus increasing the food stringency in our sector. But enormous numbers are utterly unaccounted for. Where are they gone, and what has been their fate? The same conditions may reproduce themselves in a modified form in the expulsion of great numbers of Sudeten and other Germans from Czechoslovakia. Sparse and guarded accounts of what has happened and is happening have filtered through, but it is not impossible that tragedy on a prodigious scale is unfolding itself behind the iron curtain which at the moment divides Europe in twain. I should welcome any statement which the Prime Minister can make which would relieve, or at least inform us upon this very anxious and grievous matter. There is another sphere of anxiety. I remember that a fortnight or so before the last war, the Kaiser\'s friend Herr Ballin, the great shipping magnate, told me that he had heard Bismarck say towards the end of his life, If there is ever another war in Europe, it will come out of some damned silly thing in the Balkans.\' The murder of the Archduke of Sarajevo in 1940 set the signal for the First World War. I cannot conceive that the elements for a new conflict do not exist in the Balkans today. I am not using the language of Bismarck, but nevertheless not many Members of the new House of Commons will be content with the new situation that prevails in those mountainous, turbulent, ill-organized and warlike regions. I do not intend to particularise. I am very glad to see the new Foreign Secretary (Mr Ernest Bevin) sitting on the Front Bench opposite. I should like to say with what gratification I learned that he had taken on this high and most profoundly difficult office, and we are sure he will do his best to preserve the great causes for which we have so long pulled together. But as I say, not many Members will be content with the situation in that region to which I have referred, for almost everywhere Communist forces have obtained, or are in process of obtaining, dictatorial powers. It does not mean that the Communist system is everywhere being established, nor does it mean that Soviet Russia seeks to reduce all those independent States to provinces of the Soviet Union. Marshal Stalin is a very wise man, and I would set no limits to the immense contributions that he and his associates have to make to the future. In those countries, torn and convulsed by war, there may be, for some months to come, the need of authoritarian government. The alternative would be anarchy. Therefore, it would be unreasonable to ask or expect that liberal government - as spelt with a small g - and British or United States democratic conditions, should be instituted immediately. They take their politics very seriously in those countries. A friend of mine, an officer, was in Zagreb when the results of the late General Election came in. An old lady said to him,\' Poor Mr Churchill! I suppose now he will be shot.\' My friend was able to reassure her. He said the sentence might be mitigated to one of the various forms of hard labour which are always open to His Majesty\'s subjects. Nevertheless we must know where we stand, and we must make clear where we stand, in these affairs of the Balkans and of Eastern Europe, and indeed of any country which comes into this field. Our ideal is government of the people by the people, for the people - the people being free without duress to express, by secret ballot without intimidation, their deep-seated wish as to the form and conditions of the Government under which they are to live. At the present time - I trust a very fleeting time - police governments\' rule over a great number of countries. It is a case of the odious 18B, carried to a horrible excess. The family is gathered round the fireside to enjoy the scanty fruits of their toil and to recruit their exhausted strength by the little food that they have been able to gather. There they sit. Suddenly there is a knock at the door and a heavily armed policeman appears. He is not, of course, one who resembles in any way those functionaries whom we honour and obey in the London streets. It may be that the father or son, or a friend sitting in the cottage, is called out and taken off into the dark, and no one knows whether he will ever come back again, or what his fate has been. All they know is that they had better not inquire. There are millions of humble homes in Europe at the moment, in Poland, in Czechoslovakia, in Austria, in Hungary, in Yugoslavia, in Rumania, in Bulgaria where this fear is the main preoccupation of the family life. President Roosevelt laid down the four freedoms, and these are expressed in the Atlantic Charter which we agreed together. \'Freedom from fear\' - but this has been interpreted as if it were only freedom from fear of invasion from a foreign country. That is the least of the fears of the common man. His patriotism arms him to withstand invasion or go down fighting; but that is not the fear of the ordinary family in Europe tonight. Their fear is of the policeman\'s knock. It is not fear for the country, for all men can unite in comradeship for the defence of their native soil. It is for the life and liberty of the individual, for the fundamental rights of man, now menaced and precarious in so many lands, that peoples tremble.  Surely we can agree in this new Parliament, or the great majority of us, wherever we sit - there are naturally and rightly differences and cleavages of thought - but surely we can agree in this new Parliament, which will either fail the world or once again play a part in saving it, that it is the will of the people freely expressed by secret ballot, in universal suffrage elections, as to the form of their government and as to the laws which shall prevail, which is the first solution and safeguard. Let us then march steadily along that plain and simple line. I avow my faith in Democracy, whatever course or view it may take with individuals and parties. They may make their mistakes, and they may profit from their mistakes. Democracy is now on trial as it never was before, and in these Islands we must uphold it, as we upheld it in the dark days of 1940 and 1941, with all our hearts, with all our vigilance, and with all our enduring and inexhaustible strength. While the war was on and all the Allies were fighting for victory, the word \'Democracy\', like many people, had to work overtime, but now that peace has come we must search for more precise definitions. Elections have been proposed in some of these Balkan countries where only one set of candidates is allowed to appear, and where, if other parties are to express their opinion, it has to be arranged beforehand that the governing party, armed with its political police and all its propaganda, is the only one which has the slightest chance. Chance, did I say? It is a certainty.  Now is the time for Britons to speak out. It is odious to us that governments should seek to maintain their rule otherwise than by free unfettered elections by the mass of the people. Governments derive their just powers from the consent of the governed, says the Constitution of the United States. This must not evaporate in swindles and lies propped up by servitude and murder. In our foreign policy let us strike continually the notes of freedom and fair play as we understand them in these Islands. Then you will find there will be an overwhelming measure of agreement between us, and we shall in this House march forward on an honourable theme having within it all that invests human life with dignity and happiness. In saying all this, I have been trying to gather together and present in a direct form the things which, I believe, are dear to the great majority of us. I rejoiced to read them expressed in golden words by the President of the United States when he said: \xa0 Our victory in Europe was more than a victory of arms. It was a victory of one way of life over another. It was a victory of an ideal founded on the right of the common man, on the dignity of the human being, and on the conception of the State as the servant, not the master, of its people. \xa0 I think there is not such great disagreement between us. Emphasis may be cast this way and that in particular incidents, but surely this is what the new Parliament on the whole means. This is what in our heart and conscience, in foreign affairs and world issues, we desire. Just as in the baleful glare of 1940, so now, when calmer lights shine, let us be united upon these resurgent principles and impulses of the good and generous hearts of men. Thus to all the material strength we possess and the honoured position we have acquired, we shall add these moral forces which glorify mankind and make even the weakest equals of the strong. I now turn to the domestic sphere. I have already spoken of the enormous easement in their task which the new Government have obtained through the swift and sudden ending of the Japanese war. What thousands of millions of pounds sterling are saved from the waste of war, what scores and hundreds of thousands of lives are saved, what vast numbers of ships are set free to carry the soldiers home to all their lands, to carry about the world the food and raw materials vital to industry! What noble opportunities have the new Government inherited! Let them be worthy of their fortune, which is also the fortune of us all. To release and liberate the vital springs of British energy and inventiveness, to let the honest earnings of the nation fructify in the pockets of the people, to spread well-being and security against accident and misfortune throughout the whole nation, to plan, wherever State planning is imperative, and to guide into fertile and healthy channels the native British genius for comprehension and goodwill - all these are open to them, and all these ought to be open to all of us now. I hope we may go forward together, not only abroad but also at home, in all matters so far as we possibly can. During the period of the \'Caretaker Government\', while we still had to contemplate eighteen months of strenuous war with Japan, we reviewed the plans for demobilisation in such a way as to make a very great acceleration in the whole process of releasing men and women from the Armed Forces and from compulsory industrial employment. Now, all that is overtaken by the worldwide end of the war. I must say at once that the paragraph of the Gracious Speech (The King\'s speech) outlining the new Government\'s policy referring to demobilisation and to the plans which were made in the autumn of I944 - with which I am in entire agreement in principle - gives a somewhat chilling impression. Now that we have had this wonderful windfall, I am surprised that any Government should imagine that language of this kind is still appropriate or equal to the new situation. I see that in the United States the President has said that all the American troops that the American ships can carry home in the next year will be brought home and set free. Are His Majesty\'s Government now able to make any statement of that kind about our Armed Forces abroad? Or what statement can they make? I do not want to harass them unduly, but perhaps some time next week some statement could be made. No doubt the Prime Minister will think of that. Great hopes have been raised in the electoral campaign, and from those hopes has sprung their great political victory. Time will show whether those hopes are well founded, as we deeply trust they may be. But many decisions can be taken now, in the completely altered circumstances in which we find ourselves. The duty of the Government is to fix the minimum numbers who must be retained in the next six or twelve months\' period in all the foreign theatres, and to bring the rest home with the utmost speed that our immensely expanded shipping resources will permit. Even more is this releasing process important in the demobilisation of the home establishment. I quite agree that the feeling of the Class A men must ever be the dominant factor, but short of that the most extreme efforts should be made to release people who are standing about doing nothing. I hope the Public Expenditure Committee will be at once reconstituted, and that they will travel about the country examining home establishments and reporting frequently to the House. Now that the war is over, there is no ground of military secrecy which should prevent the publication of the exact numerical ration strengths of our Army, Navy and Air Force in every theatre and at home, and we should certainly have weekly, or at least monthly figures of the progressive demobilisation effected. It is an opportunity for the new Government to win distinction. At the end of the last war, when I was in charge of the Army and Air Force, I published periodically very precise information. I agree with the words used by the Foreign Secretary when he was Minister of Labour in my Administration, namely, that the tremendous winding-up process of the war must be followed by a methodical and regulated unwinding. We agree that if the process is to be pressed forward with the utmost speed it is necessary for the Government to wield exceptional powers for the time being, and so long as they use those powers to achieve the great administrative and executive tasks imposed upon them, we shall not attack them. It is only if, and in so far as, those powers are used to bring about by a side-wind a state of controlled society agreeable to Socialist doctrinaires, but which we deem odious to British freedom, that we shall be forced to resist them. So long as the exceptional powers are used as part of the war emergency, His Majesty\'s Government may consider us as helpers and not as opponents, as friends and not as foes. To say this in no way relieves the Government of their duty to set the nation free as soon as possible, to bring home the soldiers in accordance with the scheme with the utmost rapidity, and to enable the mass of the people to resume their normal lives and employment in the best, easiest and speediest manner. There ought not to be a long-dragged-out period of many months when hundreds of thousands of Service men and women are kept waiting about under discipline, doing useless tasks at the public expense, and other tens of thousands, more highly paid, finding them sterile work to do . What we desire is freedom; what we need is abundance. Freedom and abundance - these must be our aims. The production of new wealth is far more beneficial, and on an incomparably larger scale, than class and party fights about the liquidation of old wealth. We must try to share blessings and not miseries. The production of new wealth must precede common wealth, otherwise there will only be common poverty. I am sorry these simple truisms should excite the hon. Member opposite - whom I watched so often during the course of the last Parliament and whose many agreeable qualities I have often admired - as if they had some sense of novelty for him. We do not propose to join issue immediately about the legislative proposals in the Gracious Speech. We do not know what is meant by the control of investment - but apparently it is a subject for mirth. Evidently, in war you may do one thing, and in peace perhaps another must be considered. Allowance must also be made for the transitional period through which we are passing. The Debate on the Address should probe and elicit the Government\'s intentions in this matter. The same is true of the proposal to nationalise the coal mines. If that is really the best way of securing a larger supply of coal at a cheaper price, and at an earlier moment than is now in view, I, for one, should approach the plan in a sympathetic spirit. It is by results that the Government will be judged, and it is by results that this policy must be judged. The national ownership of the Bank of England does not in my opinion raise any matter of principle. I give my opinion - anybody else may give his own. There are important examples in the United States and in our Dominions of central banking institutions, but what matters is the use to be made of this public ownership. On this we must await the detailed statement by the Chancellor of the Exchequer, who, I am glad to say, has pledged himself to resist inflation. Meanwhile it may be helpful for me to express the opinion, as Leader of the Opposition, that foreign countries need not be alarmed by the language of the Gracious Speech on this subject, and that British credit will be resolutely upheld. Then there is the Trade Disputes Act. We are told that this is to be repealed. Personally, I feel that we owe an inestimable debt to the Trade Unions for all they have done for the country in the long struggle against the foreign foe. But they would surely be unwise to reinstitute the political levy on the old basis. It would also be very odd if they wished to regain full facilities for legalising and organising a general strike. It does not say much for the confidence with which the Trades Union Council view the brave new world, or for what they think about the progressive nationalisation of our industries, that they should deem it necessary on what an hon. and gallant Gentleman called the D-Day of the new Britain\' to restore and sharpen the general strike weapon, at this particular time of all others. Apparently nationalisation is not regarded by them as any security against conditions which would render a general strike imperative and justified in the interests of the workers. We are, I understand, after nationalising the coal-mines, to deal with the railways, electricity and transport. Yet at the same time the Trade Unions feel it necessary to be heavily rearmed against State Socialism. Apparently the new age is not to be so happy for the wage earners as we have been asked to believe. At any rate, there seems to be a fundamental incongruity in these conceptions to which the attention of the Socialist intelligentsia should speedily be directed. Perhaps it may be said that these powers will only be needed if the Tories come into office. Surely these are early days to get frightened. I will ask the Prime Minister if he will just tell us broadly what is meant by the word \'repeal\'. I have offered these comments to the House, and I do not wish to end on a sombre or even slightly controversial note. As to the situation which exists today, it is evident that not only are the two Parties in the House agreed in the main essentials of foreign policy and in our moral outlook on world affairs, but we also have an immense programme, prepared by our joint exertions during the Coalition, which requires to be brought into law and made an inherent part of the life of the people. Here and there there may be differences of emphasis and view, but in the main no Parliament ever assembled with such a mass of agreed legislation as lies before us this afternoon. I have great hopes of this Parliament, and I shall do my utmost to make its work fruitful. It may heal the wounds of war, and turn to good account the new conceptions and powers which we have gathered amid the storm. I do not underrate the difficult and intricate complications of the task which lies before us; I know too much about it to cherish vain illusions; but the morrow of such a victory as we have gained is a splendid moment both in our small lives and in our great history. It is a time not only of rejoicing but even more of resolve. When we look back on all the perils through which we have passed and at the mighty foes we have laid low and all the dark and deadly designs we have frustrated, why should we fear for our future? We have come safely through the worst.I am glad to come to Westminster College this afternoon, and am complimented that you should give me a degree. The name \'Westminster\' is somehow familiar to me. I seem to have heard of it before. Indeed, it was at Westminster that I received a very large part of my education in politics, dialectic, rhetoric, and one or two other things. In fact we have both been educated at the same, or similar, or, at any rate, kindred establishments. It is also an honour, perhaps almost unique, for a private visitor to be introduced to an academic audience by the President of the United States. Amid his heavy burdens, duties, and responsibilities - unsought, but not recoiled from - the President has travelled a thousand miles to dignify and magnify our meeting here today and to give me an opportunity of addressing this kindred nation, as well as my own countrymen across the ocean, and perhaps some other countries too .The President has told you that it is his wish, as I am sure it is yours, that I should have full liberty to give my true and faithful counsel in these anxious and baffling times. I shall certainly avail myself of this freedom, and feel the more right to do so because any private ambitions I may have cherished in my younger days have been satisfied beyond my wildest dreams.  Let me, however, make it clear that I have no official mission or status of any kind, and that I speak only for myself. I can therefore allow my mind, with the experience of a lifetime, to play over the problems which beset us on the morrow of our absolute victory in arms, and to try to make sure with what strength I have that what has been gained with so much sacrifice and suffering shall be preserved for the future glory and safety of mankind. The United States stands at this time at the pinnacle of world power. It is a solemn moment for the American Democracy. For with primacy in power is also joined an awe-inspiring accountability to the future. If you look around you, you must be aware not only of the sense of duty done but also you must feel anxiety lest you fall below the level of that achievement. Opportunity is here now, clear and shining for both our countries. To reject it or ignore it or fritter it away will bring upon us all the long reproaches of the after-time. It is necessary that constancy of mind, persistency of purpose and the grand simplicity of decision shall guide and rule the conduct of the English-speaking peoples in peace as they did in war. We must, and I believe we shall, prove ourselves equal to this severe requirement. When American military men approach some serious situation they are wont to write at the head of their directive the words \'overall strategic concept\'. There is wisdom in this, as it leads to clarity of thought. What then is the overall strategic concept which we should inscribe today? It is nothing less than the safety and welfare, the freedom and progress, of all the homes and families of all the men and women in all the lands. And here I speak particularly of the myriad cottage or apartment homes where the wage-earner strives amid the accidents and difficulties of life to guard his wife and children from privation and bring the family up in the fear of the Lord, or upon ethical conceptions which often play their potent part. To give security to these countless homes, they must be shielded from the two giant marauders, war and tyranny. We all know the frightful disturbances in which the ordinary family is plunged when the curse of war swoops down upon the bread-winner and those for whom he works and contrives. The awful ruin of Europe, with all its vanished glories, and of large parts of Asia glares us in the eyes. When the designs of wicked men or the aggressive urge of mighty States dissolve over large areas the frame of civilised society, humble folk are confronted with difficulties with which they cannot cope. For them all is distorted, all is broken, even ground to pulp. When I stand here this quiet afternoon I shudder to visualise what is actually happening to millions now and what is going to happen in this period when famine stalks the earth. None can compute what has been called \'the unestimated sum of human pain\'. Our supreme task and duty is to guard the homes of the common people from the horrors and miseries of another war. We are all agreed on that. Our American military colleagues, after having proclaimed their \'over-all strategic concept\' and computed available resources, always proceed to the next step - namely, the method. Here again there is widespread agreement. A world organisation has already been erected for the prime purpose of preventing war. UNO, the successor of the League of Nations, with the decisive addition of the United States and all that that means, is already at work. We must make sure that its work is fruitful, that it is a reality and not a sham, that it is a force for action, and not merely a frothing of words, that it is a true temple of peace in which the shields of many nations can some day be hung up, and not merely a cockpit in a Tower of Babel. Before we cast away the solid assurances of national armaments for self-preservation we must be certain that our temple is built, not upon shifting sands or quagmires, but upon the rock. Anyone can see with his eyes open that our path will be difficult and also long, but if we persevere together as we did in the two world wars - though not, alas, in the interval between them - I cannot doubt that we shall achieve our common purpose in the end. I have, however, a definite and practical purpose to make for action. Courts and magistrates may be set up but they cannot function without sheriffs and constables. The United Nations Organisation must immediately begin to be equipped with an international armed force. In such a matter we can only go step by step, but we must begin now. I propose that each of the Powers and States should be invited to delegate a certain number of air squadrons to the service of the world organisation. These squadrons would be trained and prepared in their own countries, but would move around in rotation from one country to another. They would wear the uniform of their own countries but with different badges. They would not be required to act against their own nation, but in other respects they would be directed by the world organisation. This might be started on a modest scale and would grow as confidence grew. I wished to see this done after the First World War, and I devoutly trust it may be done forthwith. It would nevertheless be wrong and imprudent to entrust the secret knowledge or experience of the atomic bomb, which the United States, Great Britain and Canada now share, to the world organisation, while it is still in its infancy. It would be criminal madness to cast it adrift in this still agitated and un-united world. No one in any country has slept less well in their beds because this knowledge and the method and the raw materials to apply it, are at present largely retained in American hands. I do not believe we should all have slept so soundly had the positions been reversed and if some Communist or neo-Fascist State monopolised for the time being these dread agencies. The fear of them alone might easily have been used to enforce totalitarian systems upon the free democratic world, with consequences appalling to human imagination. God has willed that this shall not be and we have at least a breathing space to set our house in order before this peril has to be encountered: and even then, if no effort is spared, we should still possess so formidable a superiority as to impose effective deterrents upon its employment, or threat of employment by others. Ultimately, when the essential brotherhood of man is truly embodied and expressed in a world organisation with all the necessary practical safeguards to make it effective, these powers would naturally be confided to that world organisation. Now I come to the second danger of these two marauders which threatens the cottage, the home, and the ordinary people namely, tyranny, We cannot be blind to the fact that the liberties enjoyed by individual citizens throughout the British Empire are not valid in a considerable number of countries, some of which are very powerful. In these States control is enforced upon the common people by various kinds of all-embracing police governments. The power of the State is exercised without restraint, either by dictators or by compact oligarchies operating through a privileged party and a political police. It is not our duty at this time when difficulties are so numerous to interfere forcibly in the internal affairs of countries which we have not conquered in war. But we must never cease to proclaim in fearless tones the great principles of freedom and the rights of man which are the joint inheritance of the English-speaking world and which through Magna Carta, the Bill of Rights, the Habeas Corpus, trial by jury, and the English common law find their I most famous expression in the American Declaration of Independence. All this means that the people of any country have the right, and should have the power by constitutional action, by free unfettered elections, with secret ballot, to choose or change the character or form of government under which they dwell; that freedom of speech and thought should reign; that courts of justice, independent of the executive, unbiased by any party, should administer laws which have, received the broad assent of large majorities or are consecrated by time and custom. Here are the title deeds of freedom which should lie in every cottage home. Here is the message of the British and American peoples to mankind. Let us preach what we practise - let us practise what we preach. I have now stated the two great dangers which menace the homes of the people: War and Tyranny. I have not yet spoken of poverty and privation which are in many cases the prevailing anxiety. But if the dangers of war and tyranny are removed, there is no doubt that science and co-operation can bring in the next few years to the world, certainly in the next few decades newly taught in the sharpening school of war, an expansion of material well-being beyond anything that has yet occurred in human experience. Now, at this sad and breathless moment, we are plunged in the hunger and distress which are the aftermath of our stupendous struggle: but this will pass and may pass quickly, and there is no reason except human folly or sub-human crime which should deny to all the nations the inauguration and enjoyment of an age of plenty. I have often used words which I learned fifty years ago from a great Irish-American orator, a friend of mine, Mr Bourke Cockran. \'There is enough for all. The earth is a generous mother; she will provide in plentiful abundance food for- all her children if they will but cultivate her soil in justice and in peace.\' So far I feel that we are in full agreement. Now, while still pursuing the method of realising our overall strategic concept, I come to the crux of what I have travelled here to say. Neither the sure prevention of war, nor the continuous rise of world organisation will be gained without what I have called the fraternal association of the English-speaking peoples. This means a special relationship between the British Commonwealth and Empire and the United States. This is no time for generalities, and I will venture to be precise. Fraternal association requires not only the growing friendship and mutual understanding between our two vast but kindred systems of society, but the continuance of the intimate relationship between our military advisers, leading to common study of potential dangers, the similarity of weapons and manuals of instructions, and to the interchange of officers and cadets at technical colleges. It should carry with it the continuance of the present facilities for mutual security by the joint use of all Naval and Air Force bases in the possession of either country all over the world. This would perhaps double the mobility of the American Navy and Air Force. It would greatly expand that of the British Empire Forces and it might well lead, if and as the world calms down, to important financial savings. Already we use together a large number of islands; more may well be entrusted to our joint care in the near future. The United States has already a Permanent Defence Agreement with the Dominion of Canada, which is so devotedly attached to the British Commonwealth and Empire. This Agreement is more effective than many of those which have often been made under formal alliances. This principle should be extended to all British Commonwealths with full reciprocity. Thus, whatever happens, and thus only, shall we be secure ourselves and able to work together for the high and simple causes that are dear to us and bode no ill to any. Eventually there may come I feel eventually there will come - the principle of common citizenship, but that we may be content to leave to destiny, whose outstretched arm many of us can already clearly see. There is however an important question we must ask ourselves. Would a special relationship between the United States and the British Commonwealth be inconsistent with our overriding loyalties to the World Organisation? I reply that, on the contrary, it is probably the only means by which that organisation will achieve its full stature and strength. There are already the special United States relations with Canada which I have just mentioned, and there are the special relations between the United States and the South American Republics. We British have our twenty years Treaty of Collaboration and Mutual Assistance with Soviet Russia. I agree with Mr Bevin, the Foreign Secretary of Great Britain, that it might well be a fifty years Treaty so far as we are concerned. We aim at nothing but mutual assistance and collaboration. The British have an alliance with Portugal unbroken since 1384, and which produced fruitful results at critical moments in the late war. None of these clash with the general interest of a world agreement, or a world organisation; on the contrary they help it. \'In my father\'s house are many mansions.\' Special associations between members of the United Nations which have no aggressive point against any other country, which harbour no design incompatible with the Charter of the United Nations, far from being harmful, are beneficial and, as I believe, indispensable. I spoke earlier of the Temple of Peace. Workmen from all countries must build that temple. If two of the workmen know each other particularly well and are old friends, if their families are intermingled, and if they have \'faith in each other\'s purpose, hope in each other\'s future and charity towards each other\'s shortcomings\'- to quote some good words I read here the other day - why cannot they work together at the common task as friends and partners? Why cannot they share their tools and thus increase each other\'s working powers" Indeed they must do so or else the temple may not be built, or, being built, it may collapse, and we shall all be proved again unreachable and have to go and try to learn again for a third time in a school of war, incomparable, more rigorous than that from which we have just been released. The dark ages may return, the Stone Age may return on the gleaming wings of science, and what might now shower immeasurable material blessings upon mankind, may even bring about its total destruction. Beware, I say; time may be short. Do not let us take the course of allowing events to drift along until it is too late. If there is to be a fraternal association of the kind I have described, with all the extra strength and security which both our countries can derive from it, let us make sure that that great fact is known to the world, and that it plays its part in steadying and stabilising the foundations of peace. There is the path of wisdom. Prevention is better than cure. A shadow has fallen upon the scenes so lately lighted by the Allied victory. Nobody knows what Soviet Russia and its Communist international organisation intends to do in the immediate future, or what are the limits, if any, to their expansive and proselytising tendencies. I have a strong admiration and regard for the valiant Russian people and for my wartime comrade, Marshal Stalin. There is deep sympathy and goodwill in Britain - and I doubt not here also - towards the peoples of all the Russias and a resolve -lo persevere through many differences and rebuffs in establishing lasting friendships. We understand the Russian need to be secure on her western frontiers by the removal of all possibility of German aggression. We welcome Russia to her rightful place among the leading nations of the world. We welcome her flag upon the seas. Above all, we welcome constant, frequent and growing contacts between the Russian people and our own people on both sides of the Atlantic. It is my duty, however, for I am sure you would wish me to state the facts as I see them to you, to place before you certain facts about the present position in Europe. From Stettin in the Baltic to Trieste in the Adriatic, an iron curtain has descended across the Continent. Behind that line lie all the capitals of the ancient states of Central and Eastern Europe. Warsaw, Berlin, Prague, Vienna, Budapest, Belgrade, Bucharest and Sofia, all these famous cities and the populations around them lie in what I must call the Soviet sphere, and all are subject in one form or another, not only to Soviet influence but to a very high and, in many cases, increasing measure of control from Moscow. Athens alone Greece with its immortal glories is free to decide its future at an election under British American and French observation. The Russian-dominated Polish Government has been encouraged to make enormous and wrongful inroads upon Germany, and mass expulsions of millions of Germans on a scale grievous and undreamed-of are now taking place. The Communist parties, which were very small in all these Eastern States of Europe, have been raised to pre-eminence and power far beyond their numbers and are seeking everywhere to obtain totalitarian control. Police governments are prevailing in nearly every case, and so far, except in Czechoslovakia, there is no true democracy. Turkey and Persia [Iran] are both profoundly alarmed and disturbed at the claims which are being made upon them and at the pressure being exerted by the Moscow Government. An attempt is being made by the Russians in Berlin to build up a quasi-Communist party in their zone of Occupied Germany by showing special favours to groups of left-wing German leaders. At the end of the fighting last June, the American and British Armies withdrew westwards, in accordance with an earlier agreement, to a depth at some points of 150 miles upon a front of nearly four hundred miles, in order to allow our Russian allies to occupy this vast expanse of territory which the Western Democracies had conquered. If now the Soviet Government tries, by separate action to build up a pro-Communist Germany in their areas, this will cause new serious difficulties in the British and American zones, and will give the defeated Germans the power of putting themselves up to auction between the Soviets and the Western Democracies. Whatever conclusions may be drawn from these facts - and facts they are - this is certainly not the Liberated Europe we fought to build up. Nor is it one which contains the essentials of permanent peace. The safety of the world requires a new unity in Europe, from which no nation should be permanently outcast. It is from the quarrels of the strong parent races in Europe that the world wars we have witnessed, or which occurred in former times, have sprung. Twice in our own lifetime we have seen the United States, against their wishes and their traditions, against arguments, the force of which it is impossible not to comprehend, drawn by irresistible forces, into these wars in time to secure the victory of the good cause, but only after frightful slaughter and devastation had occurred. Twice the United States has had to send several millions of its young men across the Atlantic to find the war; but now war can find any nation, wherever it may dwell between dusk and dawn. Surely we should work with conscious purpose for a grand pacification of Europe, within the structure of the United Nations and in accordance with its Charter. That I feel is an open cause of policy of very great importance. In front of the iron curtain which lies across Europe are other causes for anxiety. In Italy the Communist Party is seriously hampered by having to support the Communist-trained Marshal Tito\'s claims to former Italian territory at the head of the Adriatic. Nevertheless, the future of Italy hangs in the balance. Again one cannot imagine a regenerated Europe without a strong France. All my public life I have worked for a strong France and I never lost faith in her destiny, even in the darkest hours. I will not lose faith now. However, in a great number of countries, far from the Russian frontiers and throughout the world. Communist fifth columns are established and work in complete unity and absolute obedience to the directions they receive from the Communist centre. Except in the British Commonwealth and in the United States where Communism is in its infancy, the Communist parties or fifth columns constitute a growing challenge and peril to Christian civilisation. These are sombre facts for anyone to have to recite on the morrow of a victory gained by so much splendid comradeship in arms and in the cause of freedom and democracy; but we should be most unwise not to face them squarely while time remains. The outlook is also anxious in the Far East and especially in Manchuria. The Agreement which was made at Yalta, to which I was a party, was extremely favourable to Soviet Russia, but it was made at a time when no one could say that the German war might, not extend all through the summer and autumn of 1945 and when the Japanese war was expected to last for a further eighteen months from the end of the German war. In this country you are all so well informed about the Far East, and such devoted friends of China, that I do not need to expatiate on the situation there. I have felt bound to portray the shadow which, alike in the west and in the east, falls upon the world. I was a high minister at the time of the Versailles Treaty and a close friend of Mr Lloyd George, who was the head of the British delegation at Versailles. I did not myself agree with many things that were done, but I have a very strong impression in my mind of that situation, and I find it painful to contrast it with that which prevails now. In those days there were high hopes and unbounded confidence that the wars were over, and that the League of Nations would become all-powerful. I do not see or feel that same confidence or even the same hopes in the haggard world at the present time. On the other hand I repulse the idea that a new war is inevitable; still more that it is imminent. It is because I am sure that our fortunes are still in our own hands and that we hold the power to save the future, that I feel the duty to speak out now that I have the occasion and the opportunity to do so. I do not believe that Soviet Russia desires war. What they desire is the fruits of war and the indefinite expansion of their power and doctrines. But what we have to consider here today while time remains, is the permanent prevention of war and the establishment of conditions of freedom and democracy as rapidly as possible in all countries. Our difficulties and dangers will not be removed by closing our eyes to them. They will not be removed by mere waiting to see what happens; nor will they be removed by a policy of appeasement. What is needed is a settlement, and the longer this is delayed, the more difficult it will be and the greater our dangers will become. From what I have seen of our Russian friends and Allies during the war, I am convinced that there is nothing they admire so much as strength, and there is nothing for which they have less respect than for weakness, especially military weakness. For that reason the old doctrine of a balance of power is unsound. We cannot afford, if we can help it, to work on narrow margins, offering temptations to a trial of strength. If the Western Democracies stand together in strict adherence to the principles of the United Nations Charter, their influence for furthering those principles will be immense and no one is likely to molest them. If, however, they become divided or falter in their duty and if these all-important years are allowed to slip away then indeed catastrophe may overwhelm us all. Last time I saw it all coming and cried aloud to my own fellow-countrymen and to the world, but no one paid any attention. Up till the year 1933 or even 1935, Germany might have been saved from the awful fate which has overtaken her and we might all have been spared the miseries Hitter let loose upon mankind. There never was a war in all history easier to prevent by timely action than the one which has just desolated such great areas of the globe. It could have been prevented in my belief without the firing of a single shot, and Germany might be powerful, prosperous and honoured today; but no one would listen and one by one we were all sucked into the awful whirlpool. We surely must not let that happen again. This can only be achieved by reaching now, in 1946, a good understanding on all points with Russia under the general authority of the United Nations Organisation and by the maintenance of that good understanding through many peaceful years, by the world instrument, supported by the whole strength of the English-speaking world and all its connections. There is the solution which I respectfully offer to you in this Address to which I have given the title \'The Sinews of Peace\'. Let no man underrate the abiding power of the British Empire and Commonwealth. Because you see the forty-six millions in our island harassed about their food supply, of which they only grow one-half, even in wartime, or because we have difficulty in restarting our industries and export trade after six years of passionate war effort, do not suppose that we shall not come through these dark years of privation as we have come through the glorious years of agony, or that half a century from now, you will not see seventy or eighty millions of Britons spread about the world and united in defence of our traditions, our way of life, and of the world causes which you and we espouse. If the population of the English-speaking Commonwealths be added to that of the United States with all that such co-operation implies in the air, on the sea, all over the globe, and in science and in industry, and in moral force, there will be no quivering, precarious balance of power to offer its temptation to ambition or adventure. On the contrary, there will be an overwhelming assurance of security. If we adhere faithfully to the Charter of the United Nations and walk forward in sedate and sober strength seeking no-one\'s land or treasure, seeking to lay no arbitrary control upon the thoughts of men; if all British moral and material forces, are joined with your own in fraternal association, the high roads of the future will be clear, not only for us all, not only for our time, but for a century to come. This noble continent, comprising on the whole the fairest and the most cultivated regions of the earth; enjoying a temperate and equable climate, is the home of all the great parent races of the western world. It is the fountain of Christian faith and Christian ethics. It is the origin of most of the culture, arts, philosophy and science both of ancient and modem times. If Europe were once united in the sharing of its common inheritance, there would be no limit to the happiness, to the prosperity and glory which its three or four hundred million people would enjoy. Yet it is from Europe that have sprung that series of frightful nationalistic quarrels, originated by the Teutonic nations, which we have seen even in this twentieth century and in our own lifetime, wreck the peace and mar the prospects of all mankind. And what is the plight to which Europe has been reduced? Some of the smaller States have indeed made a good recovery, but over wide areas a vast quivering mass of tormented, hungry, care-worn and bewildered human beings gape at the ruins of their cities and homes, and scan the dark horizons for the approach of some new peril, tyranny or terror. Among the victors there is a babel of jarring voices; among the vanquished the sullen silence of despair. That is all that Europeans, grouped in so many ancient States and nations, that is all that the Germanic Powers have got by tearing each other to pieces and spreading havoc far and wide. Indeed, but for the fact that the great Republic across the Atlantic Ocean has at length realised that the ruin or enslavement of Europe would involve their own fate as well, and has stretched out hands of succour and guidance, the Dark Ages would have returned in all their cruelty and squalor. They may still return. Yet all the while there is a remedy which, if it were generally and spontaneously adopted, would as if by a miracle transform the whole scene, and would in a few years make all Europe, or the greater part of it, as free and as happy as Switzerland is today. What is this sovereign remedy? It is to re-create the European Family, or as much of it as we can, and provide it with a structure under which it can dwell in peace, in safety and in freedom. We must build a kind of United States of Europe. In this way only will hundreds of millions of toilers be able to regain the simple joys and hopes which make life worth living. The process is simple. All that is needed is the resolve of hundreds of millions of men and women to do right instead of wrong, and gain as their reward, blessing instead of cursing. Much work has been done upon this task by the exertions of the Pan-European Union which owes so much to Count Coudenhove-Kalergi and which commanded the services of the famous French patriot and statesman, Aristide Briand. There is also that immense body of doctrine and procedure, which was brought into being amid high hopes after the First World War, as the League of Nations. The League of Nations did not fail because of its principles or conceptions. It failed because these principles were deserted by those States who had brought it into being. It failed because the Governments of those days feared to face the facts and act while time remained. This disaster must not be repeated. There is, therefore, much knowledge and material with which to build; and also bitter dear-bought experience. I was very glad to read in the newspapers two days ago that my friend President Truman had expressed his interest and sympathy with this great design. There is no reason why a regional organisation of Europe should in any way conflict with the world organisation of the United Nations. On the contrary, I believe that the larger synthesis will only survive if it is founded upon coherent natural groupings. There is already a natural grouping in the Western Hemisphere. We British have our own Commonwealth of Nations. These do not weaken, on the contrary they strengthen, the world organisation. They are in fact its main support. And why should there not be a European group which could give a sense of enlarged patriotism and common citizenship to the distracted peoples of this turbulent and mighty continent and why should it not take its rightful place with other great groupings in shaping the destinies of men? In order that this should be accomplished, there must be an act of faith in which millions of families speaking many languages must consciously take part. We all know that the two world wars through which we have passed arose out of the vain passion of a newly united Germany to play the dominating part in the world. In this last struggle crimes and massacres have been committed for which there is no parallel since the invasions of the Mongols in the fourteenth century and no equal at any time in human history. The guilty must be punished. Germany must be deprived of the power to rearm and make another aggressive war. But when all this has been done, as it will be done, as it is being done, there must be an end to retribution. There must be what Mr Gladstone many years ago called \'a blessed act of oblivion\'. We must all turn our backs upon the horrors of the past. We must look to the future. We cannot afford to drag forward across the years that are to come the hatreds and revenges which have sprung from the injuries of the past. If Europe is to be saved from infinite misery, and indeed from final doom, there must be an act of faith in the European family and an act of oblivion against all the crimes and follies of the past. Can the free peoples of Europe rise to the height of these resolves of the soul and instincts of the spirit of man? If they can, the wrongs and injuries which have been inflicted will have been washed away on all sides by the miseries which have been endured. Is there any need for further floods of agony? Is it the only lesson of history that mankind is unteachable? Let there be justice, mercy and freedom. The peoples have only to will it, and all will achieve their hearts\' desire. I am now going to say something that will astonish you. The first step in the re-creation of the European family must be a partnership between France and Germany. In this way only can France recover the moral leadership of Europe. There can be no revival of Europe without a spiritually great France and a spiritually great Germany. The structure of the United States of Europe, if well and truly built, will be such as to make the material strength of a single state less important. Small nations will count as much as large ones and gain their honour by their contribution to the common cause. The ancient states and principalities of Germany, freely joined together for mutual convenience in a federal system, might each take their individual place among the United States of Europe. I shall not try to make a detailed programme for hundreds of millions of people who want to be happy and free, prosperous and safe, who wish to enjoy the four freedoms of which the great President Roosevelt spoke, and live in accordance with the principles embodied in the Atlantic Charter. If this is their wish, they have only to say so, and means can certainly be found, and machinery erected, to carry that wish into full fruition. But I must give you warning. Time may be short. At present there is a breathing-space. The cannon have ceased firing. The fighting has stopped; but the dangers have not stopped. If we are to form the United States of Europe or whatever name or form it may take, we must begin now. In these present days we dwell strangely and precariously under the shield and protection of the atomic bomb. The atomic bomb is still only in the hands of a State and nation which we know will never use it except in the cause of right and freedom. But it may well be that in a few years this awful agency of destruction will be widespread and the catastrophe following from its use by several warring nations will not only bring to an end all that we call civilisation, but may possibly disintegrate the globe itself. I must now sum up the propositions which are before you. Our constant aim must be to build and fortify the strength of the United Nations Organisation. Under and within that world concept, we must re-create the European family in a regional structure called, it may be, the United States of Europe. The first step is to form a Council of Europe. If at first all the States of Europe are not willing or able to join the Union, we must nevertheless proceed to assemble and combine those who will and those who can. The salvation of the common people of every race and of every land from war or servitude must be established on solid foundations and must be guarded by the readiness of all men and women to die rather than submit to tyranny. In all this urgent work, France and Germany must take the lead together. Great Britain, the British Commonwealth of Nations, mighty America, and I trust Soviet Russia - for then indeed all would be well - must be the friends and sponsors of the new Europe and must champion its right to live and shine. \xa0 WHEREAS  Sir Winston Churchill, a son of America though a subject of Britain, has been throughout his life a firm and steadfast friend of the American people and the American nation; and   WHEREAS  he has freely offered his hand and his faith in days of adversity as well as triumph; and WHEREAS  his bravery, charity and valour, both in war and in peace, have been a flame of inspiration in freedom\'s darkest hour; and WHEREAS  his life has shown that no adversary can overcome, and no feat can deter, free men in the defence of their freedom; and WHEREAS  he has by his art as an historian and his judgment as a statesman made the past the servant of the future; NOW, THEREFORE, I, JOHN F. KENNEDY, President of the United States of America,  under the authority contained in an Act of the 88th Congress, do hereby declare Sir Winston Churchill an honorary citizen of the United States of America. IN WITNESS WHEREOF,  I have hereunto set my hand and caused the Seal of the United States of America to be affixed. DONE  at the City of Washington this ninth day of April, in the year of our Lord nineteen hundred and sixty-three, and of the Independence of the United States of America the one hundred and eighty-seventh. JOHN FITZGERALD KENNEDY The White House, Washington D.C., April 9, 1963 President John F. Kennedy said:- We meet to honour a man whose honour requires no meeting - for he is the most honoured and honourable man to walk the stage of human history in the time in which we live. Whenever and wherever tyranny threatened, he has always championed liberty. Facing firmly toward the future, he has never forgotten the past. Serving six monarchs of his native Great Britain, he has served all men\'s freedom and dignity. In the dark days and darker nights when Britain stood alone - and most men save Englishmen despaired of England\'s life - he mobilised the English language and sent it into battle. The incandescent quality of his words illuminated the courage of his countrymen. Given unlimited powers by his citizens, he was ever vigilant to protect their rights. Indifferent himself to danger, he wept over the sorrows of others. A child of the House of Commons, he became in time its father. Accustomed to the hardships of battle, he has no distaste for pleasure. Now his stately Ship of Life, having weathered the severest storms of a troubled century, is anchored in tranquil waters, proof that courage and faith and the zest for freedom are truly indestructible. The record of his triumphant passage will inspire free hearts for all time. By adding his name to our rolls, we mean to honour him - but his acceptance honours us far more. For no statement or proclamation can enrich his name -- the name Sir Winston Churchill is already legend. Sir Winston\'s reply  read by his son Randolph on the 9th April at The White House. 28 Hyde Park Gate, London, 7th April 1963 Mr. President, I have been informed by Mr. David Bruce that it is your intention to sign a Bill conferring upon me Honorary Citizenship of the United States. I have received many kindnesses from the United States of America, but the honour which you now accord me is without parallel. I accept it with deep gratitude and affection. I am also most sensible of the warm-hearted action of the individual States who accorded me the great compliment of their own honorary citizenships as a prelude to this Act of Congress. It is a remarkable comment on our affairs that the former Prime Minister of a great sovereign state should thus be received as an honorary citizen of another. I say "great sovereign state" with design and emphasis, for I reject the view that Britain and the Commonwealth should now be relegated to a tame and minor role in the world. Our past is the key to our future, which I firmly trust and believe will be no less fertile and glorious. Let no man underrate our energies, our potentialities and our abiding power for good. I am, as you know, half American by blood, and the story of my association with that mighty and benevolent nation goes back nearly ninety years to the day of my Father\'s marriage. In this century of storm and tragedy I contemplate with high satisfaction the constant factor of the interwoven and upward progress of our peoples. Our comradeship and our brotherhood in war were unexampled. We stood together, and because of that fact the free world now stands. Nor has our partnership any exclusive nature: the Atlantic community is a dream that can well be fulfilled to the detriment of none and to the enduring benefit and honour of the great democracies. Mr President, your action illuminates the theme of unity of the English-speaking peoples, to which I have devoted a large part of my life. I would ask you to accept yourself, and to convey to both Houses of Congress, and through them to the American people, my solemn and heartfelt thanks for this unique distinction,which will always be proudly remembered by my descendants. WINSTON S. CHURCHILL.  The Churchill Society London. THE MAIN INDEX Search the web site. Contact the society. Churchill\'s Speeches'</code></pre>
</section>
<section id="you-ask-what-is-our-aim-i-can-answer-in-one-word-victory" class="level2">
<h2 class="anchored" data-anchor-id="you-ask-what-is-our-aim-i-can-answer-in-one-word-victory">You ask, what is our aim? I can answer in one word: Victory</h2>
<p>The time has come to create our Churchill-inspired MarkovGenerator.</p>
<div class="sourceCode" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1">winston <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> MarkovGenerator(speeches_str, tuple_size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<p>Fingers crossed. Here we go.</p>
<div class="sourceCode" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1">text <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> winston.generate_text(length<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>)</span>
<span id="cb20-2">text</span></code></pre></div>
<blockquote class="blockquote">
<p>“and to warn His Majesty’s Government, I make no promises. In no way have I mitigated the sense of the Government had begun. I am not at all costs, victory, in spite of the world to see, the military industries and communications of Germany and to be worthy of their devotion and their courage. The hospital ships, which brought off many thousands of millions of armed and trained men, for whom he works and contrives. The awful ruin of Europe, including-I say deliberately-the German and Italian resources. This is what the cost, who never flinched under the German Air Force, had to be, incomparably the strongest possible resistance from the west, the enemy wherever he may have in respect of long-distance bombing aeroplanes and that France has yet been given to us to draw more readily upon our shipping virtually undiminished, and with the comfort of knowing that his country had ever formed. So in doing this and for the very large part of what happened at sea, and a war leader. I felt encompassed by an exaltation of spirit which was not denied to their care. But all depends now upon the routes nearer home, and to its close. In its place we are to stir the English-speaking Commonwealths be added to one of the war. I should like to do. That is what they are being slowly compressed, and we see with our shipping virtually undiminished, and with the magnificent efforts of the nation free as soon as possible. Secondly, the presence of these Balkan countries where only one which has overtaken her and we shall fight in France, and what might now shower immeasurable material blessings upon mankind, may even do him some good. It certainly offers a measure of agreement between us, and we shall defend every” — <code>winston</code><em>, July 2017</em></p>
</blockquote>
<p>Admittedly, it’s not quite up to the standard of the man himself. But you can feel his presence behind the semi-nonsense. Maybe.</p>
</section>
<section id="to-improve-is-to-change-to-be-perfect-is-to-change-often" class="level2">
<h2 class="anchored" data-anchor-id="to-improve-is-to-change-to-be-perfect-is-to-change-often">To improve is to change; to be perfect is to change often</h2>
<p>I lied earlier.</p>
<p>In reality, your modern phone’s predictive text isn’t a truly random Markov process.</p>
<p>That’s because your phone is clever: not only does it store the possibilities for the following word, but also the relative likeliness of each word being the one you want. For example:</p>
<pre><code>fish and  =&gt;  chips, 0.999
              quinoa, 0.001
              ...
              </code></pre>
<p>And then it might suggest the top 3 words in this list to you while you’re typing.</p>
<p>Indeed, sometimes your phone is even cleverer than that. If you choose one of the suggestions more often than another, it will update the probabilites to better represent your personal use. Or if you ignore its suggestions and type something that isn’t in its cache already, it will add your new word to the cache and remember it for next time.</p>
<p>Nevertheless, the Markov process we’ve explored in this post is there in the background, and without it, predictive text technology wouldn’t have reached the point where it is today. And we wouldn’t have any of the <a href="http://trump.frost.works/">other more amusing applications</a> of Markov chains for text generation either.</p>
<hr>
</section>
<section id="footnote-lockouts-page" class="level2">
<h2 class="anchored" data-anchor-id="footnote-lockouts-page">Footnote: Lockouts page?</h2>
<p>At the top of this post, when I played the predictive text game, the phrase “lockouts page” produced itself. I was fairly sure I’d never typed that. What even is a lockouts page?</p>
<p>When I tried to find an answer for that question, I found something interesting…</p>
<p><img src="https://owenjonesuob.github.io/posts/2017-07-23-markov-and-churchill-an-exploration-of-predictive-text/lockouts.jpg" class="img-fluid"></p>
<p>It seems my “personal” predictive text suggestions aren’t actually very personalised. I’m actually quite relieved, because this discovery has reassured me that if I am indeed really boring and repetitive then everyone else using an Android phone is too.</p>
<hr>
</section>
<section id="bonus-define-funny" class="level2">
<h2 class="anchored" data-anchor-id="bonus-define-funny">Bonus: define “funny”</h2>
<p>We can make a MarkovGenerator object with any text string we like. So I tried out a couple of others, including <a href="http://www.gutenberg.org/ebooks/29765">Webster’s Unabridged English Dictionary</a>. Here are some of my favourite “definitions” the <code>webster</code> MarkovGenerator came up with.</p>
<ul>
<li><p><strong>ANNECTENT</strong> An*nec”tent, a.</p>
<p>Etym: [Pref. re- + center.]</p>
<p>Defn: To predict or foretell; characterized by inflammation of the sun.</p></li>
<li><p><strong>ANTHOLOGIST</strong> An*thol”o*gist, n.</p>
<p>Defn: The quality of being persecuted.</p></li>
<li><p><strong>BLACKBIRDING</strong> Black”bird*ing, n.</p>
<p>(Chem.) Defn: The quality or state of being health.</p></li>
<li><p><strong>HORNPIKE</strong> Horn”pike`, n.</p>
<p>Defn: The supraoccipital bone.</p></li>
<li><p><strong>IMPLAUSIBILITY</strong> Im*plau`si*bil”i*ty, n.</p>
<p>Defn: A delicate person; a swell neighborhood.</p></li>
<li><p><strong>JEWELER</strong> Jew”el*er, n.</p>
<p>Etym: [Cf. Chatter.]</p>
<ol type="1">
<li>To decorate with stucco, or fine hair, for removing substances from organic material and spiritual rulers, now used ironically or contemptuously.</li>
</ol></li>
<li><p><strong>MESSENGER</strong> Mes”sen*ger, n.</p>
<p>Etym: [Ar.]</p>
<p>Defn: An instrument which is assumed to pervade all space.</p></li>
<li><p><strong>POTPOURRI</strong> Pot`pour`ri”, n.</p>
<p>Etym: [L., silkworm.</p>
<p>See Silkworm.</p></li>
</ul>


</section>

 ]]></description>
  <category>Python</category>
  <category>webscraping</category>
  <category>text generation</category>
  <category>markov</category>
  <guid>https://owenjonesuob.github.io/posts/2017-07-23-markov-and-churchill-an-exploration-of-predictive-text/</guid>
  <pubDate>Sun, 23 Jul 2017 18:00:00 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2017-07-23-markov-and-churchill-an-exploration-of-predictive-text/churchill.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>A Token Update</title>
  <link>https://owenjonesuob.github.io/posts/2017-07-08-a-token-update/</link>
  <description><![CDATA[ 





<p>Hi.</p>
<p>It’s been a little while since you’ve heard from me… well, actually, approaching six months since I last posted, and over four months since this website had any sort of update. Life’s been busy lately, what with maths and revision and maths and exams and maths and such.</p>
<p>Anyway, I have some exciting news! A couple of weeks ago, I started a work placement at <a href="http://www.mango-solutions.com">Mango Solutions</a>, a data science consultancy based in Chippenham (some of you might know of the EARL conferences which they organise every year). It’s a great place and a great bunch of people, and I am very excited to be joining them for the next twelve months!</p>
<p>An added bonus of being out on placement for the year is that I will have a slightly more regular structure to my weeks - no maths problem sheets to be wrestling with all weekend! - so I’ll have more time to do fun data-ML-coding-type stuff. There’s plenty in the pipeline: stay tuned!</p>
<p>Finally, it was just over a year ago that I was chatting to a friend about “data science” and “machine learning”, and thinking “that sounds cool but I literally have no idea what that means”. Now it’s my job. This year has been amazing, and I want to say thank you to everyone who’s ever come across this website, or liked a tweet, or written a post/given a talk that’s inspired me, or who I’ve met at <a href="http://www.meetup.com/Bath-Machine-Learning-Meetup">BMLM</a>, or who I’ve bored half to death talking about neural networks. Thank YOU, dear reader. Hasta pronto.</p>



 ]]></description>
  <guid>https://owenjonesuob.github.io/posts/2017-07-08-a-token-update/</guid>
  <pubDate>Sat, 08 Jul 2017 11:00:00 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2017-07-08-a-token-update/neuronscrop.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Summary of 30 Days, 30 Visualizations, 1 Dataset</title>
  <link>https://owenjonesuob.github.io/posts/2017-01-27-summary-of-30-days-30-visualizations-1-dataset/</link>
  <description><![CDATA[ 





<h2 id="header" class="fluid-row anchored">
Introduction
</h2>
<section id="introduction" class="level2">
<p>
Last November, the <a href="https://www.meetup.com/Bath-Machine-Learning-Meetup/">Bath Machine Learning Meetup</a> kicked off its first project: to use the <a href="https://data.bathhacked.org/Government-and-Society/BANES-Historic-Car-Park-Occupancy/x29s-cczc">BANES Historic Car Park Occupancy</a> dataset to predict the occupancy of car parks at a given time in the future.
</p>
<p>
Since mid-October 2014 the occupancy of each of eight car parks in Bath has been recorded every five minutes. Therefore the aforementioned dataset is pretty large, and constantly growing: it currently contains over 1.6 million records.
</p>
<p>
Before we began doing any serious work on the machine learning aspect of the project, I thought it would be a good idea to investigate the data we will be using; and inspired by similar analyses I had come across online I decided that I would try to produce one visualization of the data each day for one month.
</p>
<p>
If you are interested in the full, nitty-gritty, R-splattered details of how I went about this then feel free to have a look through <a href="../../posts/2016-11-12-30-days-30-visualizations-1-dataset-part-1/index.html">my original posts</a>. What follows here is a somewhat condensed version highlighting the interesting bits!
</p>
</section>
<section id="trends-in-car-park-occupancy" class="level2">
<h2 class="anchored" data-anchor-id="trends-in-car-park-occupancy">
Trends in car park occupancy
</h2>
<p>
I started off by having a look at some of the general trends in the data, such as how full each car park is, on average, on each day of the week.
</p>
<p><img src="https://owenjonesuob.github.io/posts/2017-01-27-summary-of-30-days-30-visualizations-1-dataset/day26.jpeg"></p>
<p><img src="https://owenjonesuob.github.io/posts/2017-01-27-summary-of-30-days-30-visualizations-1-dataset/day27.jpeg"></p>
<p>
As you might expect, in general the car parks tend to fill during the morning and empty in the afternoon, with most reaching their peak occupancy at about 13:00. However, there are some subtle points of interest here.
</p>
<p>
For example, during the working week the “peak” for SouthGate Rail car park is noticeably broader and squarer than those of the other car parks. This is due to the fact that SouthGate Rail is used only by railway commuters: therefore it tends to fill up quickly early in the morning, and then empty quickly later in the evening.
</p>
<p>
However, if we compare this to the weekend we see that SouthGate Rail is not so busy and instead the Podium and SouthGate General car parks tend to be busiest - this perhaps isn’t surprising, seeing as these are the closest car parks to the town centre and therefore are generally used by people visiting the local shops. Interestingly Friday is closer to this pattern than it is to the other weekdays, suggesting perhaps that Friday is a popular day to work from home.
</p>
<p>
The dataset also includes a “Status” column, indicating the change in occupancy from one record to the next (although this doesn’t seem to be recorded correctly for Podium car park).
</p>
<p><img src="https://owenjonesuob.github.io/posts/2017-01-27-summary-of-30-days-30-visualizations-1-dataset/day28.jpeg"></p>
<p>
This helps us to see how “dynamic” the occupancy of each car park is: for example, SouthGate Rail and the P+R car parks spend a significant amount of time as “Static” (meaning that there was no net change in occupancy from the previous record), whereas the shopping car parks such as SouthGate General spend more time filling or emptying. While “Static” doesn’t necessarily mean no cars entered or exited, this still gives us a good idea of which car parks have a higher turnaround of cars.
</p>
<p>
So far we’ve been looking at a breakdown by weekday, but we can see other interesting trends if we look at different time periods. The plot below shows the average occupancy of each car park in each week of the year (the label shows the week with the highest average occupancy).
</p>
<p>
While we see some wild fluctuations, there is a point worth noting here: the P+R car parks in particular tend to be used most around weeks 46-48, which translates to the latter half of November through to early December. I have absolutely no idea why this is the case.
</p>
<p><img src="https://owenjonesuob.github.io/posts/2017-01-27-summary-of-30-days-30-visualizations-1-dataset/day29.jpeg"></p>
</section>
<section id="dubious-records" class="level2">
<h2 class="anchored" data-anchor-id="dubious-records">
Dubious records
</h2>
<p>
On the surface, these trends shine through; the result of taking averages of various combinations of over 1.6 million records. But dig a little deeper and it turns out that like any genuine real-life dataset, this one is full of quirks.
</p>
<p>
Let’s strip down that last chart and just look at one car park: Newbridge P+R.
</p>
<p><img src="https://owenjonesuob.github.io/posts/2017-01-27-summary-of-30-days-30-visualizations-1-dataset/day08.jpeg"></p>
<p>
It’s clear that we have some outlying points here. It turns out that if we start looking for them, then there are quite a lot of “strange” occupancies.
</p>
<p><img src="https://owenjonesuob.github.io/posts/2017-01-27-summary-of-30-days-30-visualizations-1-dataset/day11.jpeg"></p>
<p>
Whereas a car park at 0% or 100% capacity might not be <em>too</em> unusual, a car park at more than 100% capacity shouldn’t be too common. Having said that, on occasion this can be explained - as <a href="https://github.com/BathHacked/documentation/wiki/Bath-Car-Park-Data">the dataset’s documentation</a> notes - by cars being parked in unofficial spaces, or by cars prowling full car parks in hope of nabbing a spot as someone else leaves. (Notice most of the full/overfilled records are from the shopping car parks.)
</p></section> ]]></description>
  <category>data</category>
  <category>R</category>
  <category>visualization</category>
  <guid>https://owenjonesuob.github.io/posts/2017-01-27-summary-of-30-days-30-visualizations-1-dataset/</guid>
  <pubDate>Fri, 27 Jan 2017 01:52:00 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2017-01-27-summary-of-30-days-30-visualizations-1-dataset/day01.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Snippets in RStudio</title>
  <link>https://owenjonesuob.github.io/posts/2017-01-21-snippets-in-rstudio/</link>
  <description><![CDATA[ 





<p>
I know, I know, this is probably old news to must regular users of RStudio. But these things are so useful - how had I not heard about them before?
</p>
<p>
In short, “code snippets” are little abbreviations that you can use when writing your code. You type a few letters and then hit TAB, in the same way you do to autocomplete functions; but a snippet can be used to insert a whole code template, for example, a <code>for</code> loop or <code>switch</code> statement.
</p>
<p>
And what’s more, you can add your own snippets! Within the Code tab of the global options menu, there’s a little “Edit snippets” button:
</p>
<img src="https://owenjonesuob.github.io/posts/2017-01-21-snippets-in-rstudio/codemenu.jpg" alt="codemenu">
<p>
And then you can see the built-in snippets (in a whole bunch of languages), and add your own. <a href="https://support.rstudio.com/hc/en-us/articles/204463668-Code-Snippets">This post from RStudio</a> explains the syntax (and, indeed, explains the whole concept of snippets better than I have done here!).
</p>
<p>
In my case, I wanted a quick way to add section dividers to my R scripts: so I’ve defined three new snippets for “single-” and “double-divider” and for a “heading” divider.
</p>
<img src="https://owenjonesuob.github.io/posts/2017-01-21-snippets-in-rstudio/snippets.jpg">
<p>
Which work like so:
</p>
<img src="https://owenjonesuob.github.io/posts/2017-01-21-snippets-in-rstudio/dvgif.gif">
<p>
Type two letters, hit TAB. Much quicker than holding down the equals key!
</p>



 ]]></description>
  <category>options</category>
  <category>R</category>
  <category>RStudio</category>
  <category>snippets</category>
  <guid>https://owenjonesuob.github.io/posts/2017-01-21-snippets-in-rstudio/</guid>
  <pubDate>Sat, 21 Jan 2017 12:36:59 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2017-01-21-snippets-in-rstudio/snippetsopt.PNG" medium="image"/>
</item>
<item>
  <title>BANEScarparking - an R package</title>
  <link>https://owenjonesuob.github.io/posts/2017-01-13-banescarparking-an-r-package/</link>
  <description><![CDATA[ 





<p>
Happy new year everyone!
</p>
<p>
January exams are imminent, so I should be revising. Therefore I have written an R package…
</p>
<p>
Admittedly it is a little bit niche, but hopefully it will prove useful for the machine learning project I’m working on with BMLM (I have mentioned this project before - it was part of my motivation for <a href="../../posts/2017-01-27-summary-of-30-days-30-visualizations-1-dataset/index.html">TDTVOD</a>).
</p>
<p>
The package isn’t currently on CRAN (one day maybe!) but v0.1.1 can be found on GitHub here:
</p>
<a href="https://github.com/owenjonesuob/BANEScarparking">https://github.com/owenjonesuob/BANEScarparking</a>
<p>
and you can install it with
</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1">devtools<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">install_github</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"owenjonesuob/BANEScarparking"</span>)</span></code></pre></div>
<hr>
<h4 class="anchored">
UPDATE (23/01/2018)
</h4>
<p>
There have been loads of awesome updates to <code>BANEScarparking</code> since it was first released!
</p>
<p>
And <code>BANEScarparkinglite</code>, the dataless version, totally <em>is</em> on CRAN :D
</p>
<p>
You can find it here: <a href="https://cran.r-project.org/package=BANEScarparkinglite">https://cran.r-project.org/package=BANEScarparkinglite</a>
</p>
<p>
So if you ever feel an urgent desire to analyse Bath &amp; North East Somerset’s historical parking records, you know what to do.
</p>



 ]]></description>
  <category>data</category>
  <category>data science</category>
  <category>GitHub</category>
  <category>package</category>
  <category>R</category>
  <category>RStudio</category>
  <guid>https://owenjonesuob.github.io/posts/2017-01-13-banescarparking-an-r-package/</guid>
  <pubDate>Fri, 13 Jan 2017 10:53:25 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2017-01-13-banescarparking-an-r-package/libraryBANES.PNG" medium="image"/>
</item>
<item>
  <title>30 Days, 30 Visualizations, 1 Dataset: Days 26-30</title>
  <link>https://owenjonesuob.github.io/posts/2016-12-07-30-days-30-visualizations-1-dataset-part-6/</link>
  <description><![CDATA[ 





<h3 class="anchored">
Day 26 (07/12/16): Mean occupancy by weekday revisited
</h3>
<p>
We’re on the home straight!
</p>
<p>
Partly due to lack of time, partly due to lack of new ideas, and mostly because I want to, I am going to spend the last five days of this project revisiting some of the earlier plots I made, tidying them up and using cleaned data.
</p>
<p>
Let’s make this “cleaned data” - having spent the last couple of weeks looking at what makes the data messy, I’m now in a much better position to do this than I would have been at the start!
</p>
<code>rdf1 &lt;- select(df0, Name, LastUpdate, DateUploaded,               Capacity, Occupancy, Percentage, Status) %&gt;%     mutate(LastUpdate = as.POSIXct(LastUpdate,                                    format = "%d/%m/%Y %I:%M:%S %p"),            DateUploaded = as.POSIXct(DateUploaded,                                      format = "%d/%m/%Y %I:%M:%S %p")) %&gt;%     # Cleaning:     #   Remove single (?) row with NA     filter(!is.na(LastUpdate)) %&gt;%     #   Remove "strange" occupancies ("strange" is arbitrary...)     filter(Occupancy &gt; -100) %&gt;%     filter(Percentage &lt; 110) %&gt;%     #   Remove duplicates     group_by(Name, LastUpdate) %&gt;%     slice(1L) %&gt;%     ungroup()</code>
<p>
I’ll start by replotting Day 04. This time around I will use <code>dplyr</code> rather than base functions to prepare the data. I’ll also make sure to include an x-axis on each plot, and I won’t have any issues with my faceting this time either!
</p>
<p>```rdf2 &lt;- select(df1, Name, Percentage, LastUpdate) %&gt;% filter(Name != “test car park”) %&gt;% mutate(Time = (hour(LastUpdate) + round(minute(LastUpdate), -1)/60), Day = wday(LastUpdate, label = TRUE)) %&gt;% group_by(Name, Day, Time) %&gt;% summarize(X = mean(Percentage))</p>
p &lt;- ggplot(df2, aes(x = Time, y = X)) + geom_line(aes(colour = Name)) + facet_wrap(~ Day, nrow = 2, scales = “free_x”) + ggtitle(“Mean occupancy by weekday”) + labs(y = “Percentage occupancy”, x = “Time (hour)”) + theme(plot.title = element_text(size = rel(1.8))) + guides(colour = guide_legend(override.aes = list(size = 3))) p```
<p>
<img src="https://owenjonesuob.github.io/posts/2016-12-07-30-days-30-visualizations-1-dataset-part-6/day26.jpeg">
</p><hr>
<h3 class="anchored">
Day 27 (08/12/16): Occupancy per weekday by car park, revisited
</h3>
<p>
Revisiting Day 05. The alpha levels are scaled much better now there are no outlying data points.
</p>
<p><code>rp &lt;- ggplot(data = df2, aes(Time, y = Day)) +     facet_wrap(~ Name, nrow = 2, scales = "free_x") +     geom_point(aes(colour = Name, alpha = X), shape = 20, size = 4) +     guides(colour = guide_legend(override.aes = list(size = 3))) +     scale_alpha(range = c(0, 1)) +     scale_y_discrete(limits = rev(levels(df2$Day))) +     labs(x = "Time (hour)", y = "") +     ggtitle("Occupancy per weekday, by car park") +     theme(plot.title = element_text(size = 22, face = "bold"),           legend.position = "None") p</code></p>
<img src="https://owenjonesuob.github.io/posts/2016-12-07-30-days-30-visualizations-1-dataset-part-6/day27.jpeg">
<hr>
<h3 class="anchored">
Day 28 (09/12/16): Status by weekday, revisited
</h3>
<p>
Again, just tidying up a little and using the clean data.
</p>
<p>```rlibrary(lubridate) library(reshape2) library(scales)</p>
<p>df2 &lt;- select(df1, Name, LastUpdate, Status) %&gt;% filter(Name != “test car park”) %&gt;% mutate(Day = wday(LastUpdate, label = TRUE)) %&gt;% group_by(Name, Day) %&gt;% summarize(Filling = sum(Status == “Filling”) / n(), Static = sum(Status == “Static”) / n(), Emptying = sum(Status == “Emptying”) / n()) %&gt;% melt()</p>
p &lt;- ggplot(df2, aes(x = Day, y = value, fill = variable)) + geom_bar(stat = “identity”) + coord_flip() + facet_wrap(~ Name, nrow = 2) + scale_fill_manual(values = c(“#FF4444”, “#AAAAAA”, “#6666FF”)) + scale_x_discrete(limits = rev(levels(df2$Day))) + scale_y_continuous(labels = percent) + labs(y = “Percent of records”, x = “Day”, fill = ““) + ggtitle(”Status by weekday”) + theme(plot.title = element_text(size = 22, face = “bold”)) p``` <img src="https://owenjonesuob.github.io/posts/2016-12-07-30-days-30-visualizations-1-dataset-part-6/day28.jpeg">
<hr>
<h3 class="anchored">
Day 29 (10/12/16): Mean percentage occupancy by week, revisited
</h3>
<p>
Revisiting Day 09. The lines are, generally speaking, a little smoother now.
</p>
<p>```rdf2 &lt;- select(df1, Name, LastUpdate, Percentage) %&gt;% filter(Name != “test car park”) %&gt;% mutate(Week = week(LastUpdate)) %&gt;% group_by(Name, Week) %&gt;% summarize(meanP = mean(Percentage))</p>
<p>maxP &lt;- top_n(df2, n = 1)</p>
p &lt;- ggplot(df2, aes(x = Week, y = meanP)) + geom_line() + facet_wrap(~ Name, nrow = 2) + geom_label(data = maxP, aes(x = Week, y = meanP + 10, label = Week)) + ggtitle(“Mean percentage occupancy per week”) + ylab(“Percentage”) + theme(plot.title = element_text(size = 22, face = “bold”)) p``` <img src="https://owenjonesuob.github.io/posts/2016-12-07-30-days-30-visualizations-1-dataset-part-6/day29.jpeg">
<hr>
<h3 class="anchored">
Day 30 (11/12/16): The End
</h3>
<p>
Well, here I am. One month later.
</p>
<p>
This has probably been the hardest project I’ve attempted to date.
</p>
<p>
I say that not because the learning has been particularly challenging, although obviously I was learning ‘on-the-go’.
</p>
<p>
It’s tempting to say that the most difficult aspect was coming up with new ideas and new ways to explore a pretty limited set of data. In a way it is fortunate that there were so many messy and anomalous records to explore, or I would have been running out of ideas within two weeks.
</p>
<p>
But actually, the hardest thing about this project was finding the time and motivation each day to spend a couple of hours, an hour, even 20 minutes working on it - when really, true (as per usual!) to this website’s general theme, I should have been doing other things.
</p>
<p>
Having said that, I’ve done it! I stuck with it. I have (approximately) 30 plots to prove it, as well as a much better command of ggplot and dplyr for manipulating and visualizing data in the future. And hopefully some of the knowledge I’ve gained about the dataset will come in useful for the Bath ML Meetup project.
</p>
<p>
I thought I’d round off by sharing some of my ideas and doodles from when I was just starting out.
</p>
<div id="day301" class="photoib">

</div>
<div id="day302" class="photoib">

</div>
<div id="day303" class="photoib">

</div>
<p>
I’m now facing a busy month or two of revision and exams, so I can’t say for sure when my next project will materialize (to be truthful they tend to be fairly spontaneous anyway…) - so until then, fare thee all well, and best wishes for the remainder of 2016 and for the New Year.
</p>



 ]]></description>
  <category>data</category>
  <category>data science</category>
  <category>ggplot2</category>
  <category>R</category>
  <category>RStudio</category>
  <category>visualization</category>
  <guid>https://owenjonesuob.github.io/posts/2016-12-07-30-days-30-visualizations-1-dataset-part-6/</guid>
  <pubDate>Wed, 07 Dec 2016 23:05:34 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2016-12-07-30-days-30-visualizations-1-dataset-part-6/day27.jpeg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>30 Days, 30 Visualizations, 1 Dataset: Days 21-25</title>
  <link>https://owenjonesuob.github.io/posts/2016-12-02-30-days-30-visualizations-1-dataset-part-5/</link>
  <description><![CDATA[ 





<h3 class="anchored">
Day 21 (02/12/16): Delay to first upload
</h3>
<p>
Perhaps the DateUploaded column can give us some help in working out why we have duplicate records.
</p>
<p>
Let’s do a similar test to the one from a couple of days ago, to see if the upload time is different for records with the same update time.
</p>
<p>```rdf3 &lt;- filter(df0, Name != “test car park”) %&gt;% group_by(Name, LastUpdate, DateUploaded) %&gt;% filter(n() &gt; 1)</p>
<p>df3<code></code>rconsole## Source: local data frame [0 x 12] ## Groups: Name, LastUpdate, DateUploaded [0] ## ## # … with 12 variables: ID <fctr>, LastUpdate <fctr>, Name <fctr>, ## # Description <fctr>, Capacity <int>, Status <fctr>, Occupancy <int>, ## # Percentage <int>, Easting <int>, Northing <int>, DateUploaded <fctr>, ## # Location <fctr><code>&lt;p&gt;Ah-ha! An empty dataframe! So it looks like the duplicate records are caused by the same record being uploaded at multiple different times.&lt;/p&gt; &lt;p&gt;Let’s take the first upload only, and create a plot similar to yesterday’s.&lt;/p&gt;</code>rdf4 &lt;- df0 %&gt;% select(Name, LastUpdate, DateUploaded) %&gt;% filter(Name != “test car park”) %&gt;% mutate(LastUpdate = as.POSIXct(LastUpdate, tz = “UTC”, format = “%d/%m/%Y %I:%M:%S %p”), DateUploaded = as.POSIXct(DateUploaded, tz = “UTC”, format = “%d/%m/%Y %I:%M:%S %p”)) %&gt;% group_by(Name, LastUpdate) %&gt;% summarize(FirstUpload = min(DateUploaded)) %&gt;% mutate(Delay = as.numeric(FirstUpload - LastUpdate))</fctr></fctr></int></int></int></int></fctr></int></fctr></fctr></fctr></fctr></p>
<p>p &lt;- ggplot(df4, aes(x = Delay)) + geom_histogram(colour = “black”) + facet_wrap(~ Name, nrow = 2, scales = “free”) + ggtitle(“Delay between update and first upload”) + xlab(“Seconds”) + ylab(“Number of records”) + theme(plot.title = element_text(size = rel(1.5))) + scale_y_log10()</p>
p``` <img src="https://owenjonesuob.github.io/posts/2016-12-02-30-days-30-visualizations-1-dataset-part-5/day21.jpeg">
<p>
Note that wherever the histogram displays a bar below the axis, this shows zero records in that bin, since we are using a log scale (and the value shown is therefore log<sub>10</sub>(0) = -Inf); and by similar logic, wherever the histogram shows 0 there is 1 record in that bin (for example, at the extreme right of the Avon Street CP plot).
</p>
<p>
We can see that for most of the car parks, there is a single record at any extreme values (e.g.&nbsp;that 1 record from Avon Street - the largest delay by a huge margin). However, there are multiple dodgy records at Podium CP and the SouthGate CPs.
</p>
<hr>
<h3 class="anchored">
Day 22 (03/12/16): Minute and second of upload
</h3>
<p>
Let’s have a look at when records are uploaded to the online database.
</p>
<p>```rdf3 &lt;- select(df0, Name, DateUploaded) %&gt;% mutate(DateUploaded = as.POSIXct(DateUploaded, tz = “UTC”, format = “%d/%m/%Y %I:%M:%S %p”)) %&gt;% mutate(Minute = minute(DateUploaded), Second = second(DateUploaded))</p>
<p>p1 &lt;- ggplot(df3, aes(x = Minute)) + geom_histogram(binwidth = 1) p2 &lt;- ggplot(df3, aes(x = Second)) + geom_histogram(binwidth = 1)<code>&lt;p&gt;I thought it was time to try out another new package! (Well, new to me…)&lt;/p&gt;</code>rlibrary(grid)</p>
<p>grid.newpage() pushViewport(viewport(layout = grid.layout(2, 2, heights = unit(c(0.5, 5), “null”))))</p>
<p>grid.text(“Minute and second of upload”, vp = viewport(layout.pos.row = 1, layout.pos.col = 1:2), gp = gpar(fontsize = 22, fontface = 2))</p>
print(p1, vp = viewport(layout.pos.row = 2, layout.pos.col = 1)) print(p2, vp = viewport(layout.pos.row = 2, layout.pos.col = 2))``` <img src="https://owenjonesuob.github.io/posts/2016-12-02-30-days-30-visualizations-1-dataset-part-5/day22.jpeg">
<p>
We can see that records are uploaded promptly every 5 minutes or so, as claimed by the documentation of the database; and that records tend to be uploaded ‘on the minute’.
</p>
<hr>
<h3 class="anchored">
Day 23 (04/12/16): Upload batch sizes and proportions
</h3>
<p>
We saw yesterday that records are uploaded in batches roughly every 5 minutes. But how many records are usually uploaded in one of these batches? And which car parks, if any, “skip” updates?
</p>
<p>```rdf2 &lt;- select(df0, Name, DateUploaded) %&gt;% filter(Name != “test car park”) %&gt;% group_by(DateUploaded) %&gt;% mutate(batch_size = n())</p>
<p>p &lt;- ggplot(df2, aes(x = batch_size))</p>
<p>p1 &lt;- p + geom_bar() + xlab(“Batch size”) + ylab(“Number of batches”) p2 &lt;- p + geom_bar(aes(fill = Name), position = “fill”) + xlab(“Batch size”) + ylab(“Proportion of batches where present”)</p>
library(grid) grid.newpage() pushViewport(viewport(layout = grid.layout(2, 2, heights = unit(c(0.5, 5),“null”), widths = unit(c(1, 2), “null”)))) grid.text(“Upload batch sizes and proportions”, vp = viewport(layout.pos.row = 1, layout.pos.col = 1:2), gp = gpar(fontsize = 25, fontface = 2)) print(p1, vp = viewport(layout.pos.row = 2, layout.pos.col = 1)) print(p2, vp = viewport(layout.pos.row = 2, layout.pos.col = 2))``` <img src="https://owenjonesuob.github.io/posts/2016-12-02-30-days-30-visualizations-1-dataset-part-5/day23.jpeg">
<p>
So we can see that most batches are of size 8, as expected (these presumably contain one record per car park for each of the 8 car parks), but there are also many smaller batches - some as small as 4 records.
</p>
<p>
We can also see which car parks are contributiong to these smaller batches, and therefore work out which ones <em>aren’t</em> (i.e.&nbsp;the ones skipping updates).
</p>
<hr>
<h3 class="anchored">
Day 24 (05/12/16): Name == “test car park”
</h3>
<p>
With a coursework deadline looming, I am struggling both for time and ideas - bear with me, the next few days may be a little rough…
</p>
<p>
I’ve been filtering out the records from “test car park” for most of the last month. I think it’s high time we had a look at them.
</p>
<p>```rdf2 &lt;- filter(df, Name == “test car park”)</p>
<p>library(scales)</p>
<p>p &lt;- ggplot(df2, aes(x = LastUpdate)) + geom_line(aes(y = Occupancy, colour = “Occupancy”)) + geom_line(aes(y = Capacity, colour = “Capacity”)) + ggtitle(“Test car park records”) + xlab(“Time of update”) + ylab(“Total”) + scale_x_datetime(labels = date_format(“%d/%m/%y”))+ scale_colour_manual(name = ““, values = c(”black”, “red”))</p>
p``` <img src="https://owenjonesuob.github.io/posts/2016-12-02-30-days-30-visualizations-1-dataset-part-5/day24.jpeg">
<p>
Admittedly not particularly interesting or informative, but probably the cleanest and most error-free data we’ve seen so far.
</p>
<hr>
<h3 class="anchored">
Day 25: Calculation of Percentage
</h3>
<p>
There is one more thing I can check about the data: how is the Percentage column calculated? Given that it contains integer values, there must be some rounding involved - perhaps we can see whether values are rounded up or down, or to the nearest integer.
</p>
<p>```rdf4 &lt;- select(df0, LastUpdate, Capacity, Occupancy, Percentage) %&gt;% mutate(newPercentage = (Occupancy / Capacity), Difference = (newPercentage - (Percentage/100)))</p>
<p>p &lt;- ggplot(df4, aes(x = Difference)) + geom_histogram(colour = “black”, bins = 30) + ggtitle(“Difference between (Occupancy/Capacity) and Percentage”)</p>
p``` <img src="https://owenjonesuob.github.io/posts/2016-12-02-30-days-30-visualizations-1-dataset-part-5/day25.jpeg">
<p>
Although not entirely clear, the bulk of the observations lie to the right of zero. It seems, then, that the result of the (Occupancy/Capacity) calculation is rounded down to give the Percentage column.
</p>



 ]]></description>
  <category>data</category>
  <category>data science</category>
  <category>ggplot2</category>
  <category>R</category>
  <category>RStudio</category>
  <category>visualization</category>
  <guid>https://owenjonesuob.github.io/posts/2016-12-02-30-days-30-visualizations-1-dataset-part-5/</guid>
  <pubDate>Fri, 02 Dec 2016 19:45:10 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2016-12-02-30-days-30-visualizations-1-dataset-part-5/day23.jpeg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>30 Days, 30 Visualizations, 1 Dataset: Days 16-20</title>
  <link>https://owenjonesuob.github.io/posts/2016-11-27-30-days-30-visualizations-1-dataset-part-4/</link>
  <description><![CDATA[ 





<h3 class="anchored">
Day 16 (27/11/16): Shifting massively negative values
</h3>
<p>
As a culmination of the effort of the last few days, let’s see if the shifted values line up nicely with the unaffected values from that day.
</p>
<p>
I’ll keep my guess of 15220 for the shift <code>k</code> from yesterday for now.
</p>
<p>```rtimerange &lt;- interval(ymd_hms(“2015-01-05 10:00:00”), ymd_hms(“2015-01-05 18:00:00”))</p>
<p>k &lt;- 15220</p>
<p>df2 &lt;- select(df, Name, LastUpdate, Occupancy) %&gt;% filter(Name == “SouthGate General CP”) %&gt;% filter(LastUpdate %within% timerange) %&gt;% arrange(LastUpdate) %&gt;% mutate(newOcc1 = ifelse(Occupancy &lt; -10000, Occupancy + k, Occupancy))<code>&lt;p&gt;I can actually check whether my guess for k is reasonable fairly easily - I’ll find the largest changes in occupancy, and then average them.&lt;/p&gt;</code>rrng &lt;- range(diff(df2$Occupancy)) mean(abs(rng))<code></code>rconsole## [1] 15219.5<code>&lt;p&gt;It turns out my guess was actually very reasonable indeed!&lt;/p&gt; &lt;p&gt;OK, let’s try plotting the corrected occupancies on top of the correct records.&lt;/p&gt;</code>rp &lt;- ggplot(df2, aes(x = LastUpdate, y = newOcc)) + geom_path(aes(colour = (Occupancy &lt; -10000))) + ggtitle(“Adjustment of massively negative occupancies”)</p>
<p>p<code>&lt;img src="day16.jpeg" /&gt; &lt;p&gt;I had hoped that the simple shift would mean the records would line up - but we can see that in fact this is not the case.&lt;/p&gt; &lt;p&gt;Perhaps then, despite the saga of the last few days, it is going to be too much trouble to try to correct these records, and it will be much simpler to just ignore them.&lt;/p&gt; &lt;hr&gt; &lt;h3&gt;Day 17 (28/11/16): Duplicate records&lt;/h3&gt; &lt;p&gt;While working with the massively negative records over the past few days, I noticed something slightly odd.&lt;/p&gt; &lt;p&gt;On occasion, there are two records which are identical - same car park, same occupancy, same time of update. These duplicate records are certainly not helpful, and might affect calculated averages - for example, mean occupancy of a car park over a given week, if this were calculated simply by averaging the occupancy values from all records in that week and if an outlying value were duplicated.&lt;/p&gt; &lt;p&gt;Let’s see where we have duplicate records…&lt;/p&gt;</code>rdf2 &lt;- select(df, Name, LastUpdate) %&gt;% filter(Name != “test car park”) %&gt;% group_by(Name, LastUpdate) %&gt;% summarize(count = n())</p>
<p>p &lt;- ggplot(df2, aes(x = LastUpdate, y = count, colour = Name)) + geom_point() + ggtitle(“Duplicate records”) + ylab(“Number of records”) + theme(plot.title = element_text(size = rel(1.5)))</p>
<p>p<code>&lt;img src="day17.jpeg" /&gt; &lt;p&gt;It turns out that not only are there many, many instances where a record is recorded twice. There are, in fact, a lot of records which are present hundreds of times - one record from Odd Down P+R is present 1145 times!&lt;/p&gt; &lt;hr&gt; &lt;h3&gt;Day 18 (29/11/16): Number of n-plicate records&lt;/h3&gt; &lt;p&gt;Having discovered the slightly worrying number of duplicate records yesterday, I thought I would see how many groups of identical records there are, and how many records are in these groups.&lt;/p&gt;</code>rdf2 &lt;- select(df, Name, LastUpdate) %&gt;% filter(Name != “test car park”) %&gt;% group_by(Name, LastUpdate) %&gt;% summarize(count = n()) %&gt;% group_by(count) %&gt;% summarize(metacount = n(), proportion = metacount / nrow(.))</p>
<p>head(df2)<code></code>rconsole## # A tibble: 6 × 3 ## count metacount proportion ##<br>
## 1 1 1041683 0.8290611487 ## 2 2 211517 0.1683434663 ## 3 3 1072 0.0008531900 ## 4 4 730 0.0005809969 ## 5 5 217 0.0001727073 ## 6 6 185 0.0001472390<code></code>rtail(df2)<code></code>rconsole## # A tibble: 6 × 3 ## count metacount proportion ##<br>
## 1 1069 1 7.958862e-07 ## 2 1087 1 7.958862e-07 ## 3 1089 1 7.958862e-07 ## 4 1130 1 7.958862e-07 ## 5 1143 1 7.958862e-07 ## 6 1145 1 7.958862e-07<code>&lt;p&gt;So the majority of records are only recorded once, but a significant proportion (about 16.8%) of records are recorded twice, and another small subset (around 0.3%) are recorded more than twice - with some recorded over 1000 times, as we saw yesterday!&lt;/p&gt; &lt;p&gt;Let’s try to visualize exactly what we’re dealing with here.&lt;/p&gt;</code>rp &lt;- ggplot(df2[-c(1), ], aes(x = count, y = (metacount + 0.5))) + geom_bar(colour = “black”, stat = “identity”) + scale_y_log10() + ggtitle(“Number of n-plicate records”) + xlab(“Size of group of identical records”) + ylab(“Number of groups”) + theme(plot.title = element_text(size = rel(1.5)))</p>
<p>p<code>&lt;img src="day18.jpeg" /&gt; &lt;p&gt;I’ve had to use a log scale since there are many more size-2-to-12-ish records than most others - but this causes the bars to all but vanish when there is only one group of a particular size. I’ve tried to get around this problem by adding a black border to the bars, so if you look very closely you can just about see them on the x-axis.&lt;/p&gt; &lt;p&gt;Anyway, we can see there are a very large number of groups with a few identical records, as well as a few groups with a very large number of identical records.&lt;/p&gt; &lt;hr&gt; &lt;h3&gt;Day 19 (30/11/16): Times of duplicate uploads&lt;/h3&gt; &lt;p&gt;First I’m just going to make sure that if two records have the same Name and LastUpdate entries, that they are also identical in the other fields - most importantly, Occupancy.&lt;/p&gt;</code>rdf3 &lt;- filter(df, Name != “test car park”) %&gt;% group_by(Name, LastUpdate) %&gt;% filter(n() &gt; 1)</p>
<p>df4 &lt;- filter(df, Name != “test car park”) %&gt;% group_by(Name, LastUpdate, Occupancy) %&gt;% filter(n() &gt; 1)</p>
<p>setdiff(df3, df4)<code></code>rconsole## # A tibble: 0 × 0<code>&lt;p&gt;So there are 0 rows identical in Name and LastUpdate but different in Occupancy. This is a good thing!&lt;/p&gt; &lt;p&gt;We have a dataframe (well, 2 identical dataframes!) containing all the duplicate records. Let’s see if there’s any sort of pattern in the times when duplicates are recorded.&lt;/p&gt;</code>rp &lt;- ggplot(df3, aes(x = LastUpdate, y = ““)) + geom_point(alpha = 0.1) + facet_wrap(~ Name, nrow = 2) + ggtitle(”Times of duplicate uploads”) + ylab(““) + theme(plot.title = element_text(size = rel(1.5)), panel.background = element_blank())</p>
p``` <img src="https://owenjonesuob.github.io/posts/2016-11-27-30-days-30-visualizations-1-dataset-part-4/day19.jpeg">
<p>
We can see that duplicates are recorded almost constantly at the SouthGate car parks, very often at the Odd Down and Lansdown P+Rs and then less frequently but seemingly at random in the other car parks.
</p>
<hr>
<h3 class="anchored">
Day 20 (01/12/16): Delay between update and upload
</h3>
<p>
For the majority of this project I have been working with <code>df</code>, a trimmed-down version of the original dataframe which I created in the first week or so.
</p>
<p>
One of the columns I cut when I created <code>df</code> was <code>DateUploaded</code>: which is, of course, the time when a record was uploaded to the database.
</p>
<p>
Perhaps there are some interesting features to find in this column though…
</p>
<p>
For example, what is the delay in between a record being taken, and it being uploaded?
</p>
<p>```r# Read in the original dataframe again df0 &lt;- read.csv(“C:/Users/Owen/Documents/Coding/Parking/data/BANES_Historic_Car_Park_Occupancy.csv”)</p>
<p>library(dplyr) library(lubridate)</p>
<p>df1 &lt;- df0 %&gt;% select(Name, LastUpdate, DateUploaded) %&gt;% mutate(LastUpdate = as.POSIXct(LastUpdate, tz = “UTC”, format = “%d/%m/%Y %I:%M:%S %p”), DateUploaded = as.POSIXct(DateUploaded, tz = “UTC”, format = “%d/%m/%Y %I:%M:%S %p”)) %&gt;% mutate(Delay = as.numeric(DateUploaded - LastUpdate))</p>
<p>library(ggplot2)</p>
<p>p &lt;- ggplot(df1, aes(x = Delay)) + geom_histogram(colour = “black”, bins = 40) + ggtitle(“Delay between update and upload”) + xlab(“Seconds”) + ylab(“Number of records”)</p>
p<code>&lt;img src="day20.jpeg" /&gt; &lt;p&gt;So the vast majority of the records are uploaded pretty quickly. But there is a suspicious black line along the bottom of the plot…&lt;/p&gt; &lt;p&gt;Let’s replot using a log scale.&lt;/p&gt;</code>rp + scale_y_log10()``` <img class="alignnone size-full wp-image-674" src="https://owenjonesuob.github.io/posts/2016-11-27-30-days-30-visualizations-1-dataset-part-4/day20log.jpeg">
<p>
So we actually have quite a lot of records where the delay between update and upload is fairly large - over 300000 seconds (about 3.5 days) in some cases. There are also a significant number of records which were somehow uploaded BEFORE they were recorded.
</p>



 ]]></description>
  <category>data</category>
  <category>data science</category>
  <category>ggplot2</category>
  <category>R</category>
  <category>RStudio</category>
  <category>visualization</category>
  <guid>https://owenjonesuob.github.io/posts/2016-11-27-30-days-30-visualizations-1-dataset-part-4/</guid>
  <pubDate>Sun, 27 Nov 2016 17:59:45 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2016-11-27-30-days-30-visualizations-1-dataset-part-4/day17.jpeg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>30 Days, 30 Visualizations, 1 Dataset: Days 11-15</title>
  <link>https://owenjonesuob.github.io/posts/2016-11-22-30-days-30-visualizations-1-dataset-part-3/</link>
  <description><![CDATA[ 





<h3 class="anchored">
Day 11 (22/11/16): Type of “strange” occupancies
</h3>
<p>
Looking at the dataframe of unusual occupancies from yesterday, I’ll put each record into one of four categories, in order to more easily see which records are definitely wrong, which are questionable, etc.
</p>
<p>```rtype &lt;- vector(“character”, nrow(df3))</p>
<p>type[df3<img src="https://latex.codecogs.com/png.latex?Occupancy%20==%200%5D%20%3C-%20%22Zero%22%0Atype%5Bdf3">Occupancy &lt; 0] &lt;- “Negative” type[df3<img src="https://latex.codecogs.com/png.latex?Occupancy%20==%20df3">Capacity] &lt;- “Full” type[df3<img src="https://latex.codecogs.com/png.latex?Occupancy%20%3E%20df3">Capacity] &lt;- “Overfilled”</p>
<p>df3$Type &lt;- factor(type, levels = c(“Overfilled”, “Full”, “Zero”, “Negative”))</p>
<p>p &lt;- ggplot(df3, aes(x = LastUpdate, y = ““)) + geom_point(aes(colour = Type)) + facet_wrap(~ Name, nrow = 4) + scale_colour_manual(values = rev(c(”red”, “black”, “green”, “blue”))) + ylab(““) + ggtitle(”Type of "Strange" Occupancies”) + theme(plot.title = element_text(size = rel(1.5)))</p>
<p>p<code>&lt;img src="day11.jpeg" /&gt; &lt;p&gt;We can see, for example, that all the definitely-wrong negative-occupancy records are from SouthGate General - maybe the council should look into upgrading the sensors there…&lt;/p&gt; &lt;hr&gt; &lt;h3&gt;Day 12 (23/11/16): Hours of over- and negative occupancy&lt;/h3&gt; &lt;p&gt;We had another Bath ML Meetup tonight - we didn’t have too long to talk about the project, but plans are being made…&lt;/p&gt; &lt;p&gt;Using the dataframe from yesterday, I’ll have a quick look at when the particularly dubious records - the overfilled and negative records, that is - are generally recorded. I’m curious as to whether, for example, overfilled records are more common at lunchtime than overnight.&lt;/p&gt;</code>rdf4 &lt;- filter(df3, Type == “Overfilled” | Type == “Negative”) %&gt;% mutate(Time = hour(LastUpdate) + minute(LastUpdate)/60)</p>
<p>p &lt;- ggplot(df4, aes(x = Time, y = ““)) + geom_point(alpha = 0.01) + facet_wrap(~ Type, nrow = 2) + scale_x_continuous(breaks = seq(0, 24, 4)) + ggtitle(”Hours of over- and negative occupancy”) + ylab(““) + theme(plot.title = element_text(size = rel(1.5)), panel.background = element_blank())</p>
<p>p<code>&lt;img src="day12.jpeg" /&gt; &lt;p&gt;As it turns out, the overfilled records are spread over the whole day, with a decrease only in the early morning. Negative records tend to be from overnight, although there are some during the day too.&lt;/p&gt; &lt;hr&gt; &lt;h3&gt;Day 13 (24/11/16): Spread of negative occupancies&lt;/h3&gt; &lt;p&gt;I’m wondering how the negative occupancies are distributed - we’ve seen that there are some very large negative values, but I’m curious as to how many of these there are, compared to more modest values. My reasoning here is that there are probably a lot of small negative values due to physical, quickly-resolved sensor errors, and then fewer very large negative values due to errors in the uploading of data or some other issue.&lt;/p&gt;</code>rdf4 &lt;- filter(df3, Type == “Negative”)</p>
<section id="having-sneakily-looked-at-plot-already-ill-points-in-certain-ranges" class="level1">
<h1>Having sneakily looked at plot already, I’ll points in certain ranges</h1>
<p>counts &lt;- c(tally(filter(df4, Occupancy &lt; -10000))[2], tally(filter(df4, Occupancy &gt;= -10000, Occupancy &lt;= -1000))[2], tally(filter(df4, Occupancy &gt; -1000))[2]) %&gt;% sapply(sum)</p>
<p>p &lt;- ggplot(df4, aes(y = ““, x = Occupancy)) + geom_point() + ggtitle(”Spread of negative occupancies”) + ylab(““) + annotate(”text”, x = c(-14500, -2000, -100), y = c(rep(1.2, 3)), label = counts)</p>
<p>p<code>&lt;img src="day13.jpeg" /&gt; &lt;hr&gt; &lt;h3&gt;Day 14 (25/11/16): Massively negative occupancies&lt;/h3&gt; &lt;p&gt;Yesterday’s plot revealed a small cluster of points at around -15000. Let’s have a more detailed look at these points, and see if we can work out ‘how’ they are wrong - for example, if they are all the same value, which might suggest it is a deliberate ‘indicator’ value used by the council to denote a closed car park.&lt;/p&gt;</code>rdf4 &lt;- filter(df3, Occupancy &lt; -10000)</p>
<p>summary(df4<img src="https://latex.codecogs.com/png.latex?Name)%60%60%60%0A%60%60%60rconsole##%20%20%20%20%20%20%20Avon%20Street%20CP%20%20Charlotte%20Street%20CP%20%20%20%20%20%20%20%20%20Lansdown%20P+R%0A##%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%0A##%20%20%20%20%20%20%20%20Newbridge%20P+R%20%20%20%20%20%20%20%20%20Odd%20Down%20P+R%20%20%20%20%20%20%20%20%20%20%20%20Podium%20CP%0A##%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%0A##%20SouthGate%20General%20CP%20%20%20%20SouthGate%20Rail%20CP%20%20%20%20%20%20%20%20test%20car%20park%0A##%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2026%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%60%60%60%0A%60%60%60rrange(df4">Occupancy)<code></code>rconsole## [1] -14787 -14638<code></code>rtime_length(max(as.double(df4<img src="https://latex.codecogs.com/png.latex?LastUpdate))%20-%20min(as.double(df4">LastUpdate)), unit = “hour”)<code></code>rconsole## [1] 0.02361111<code>&lt;p&gt;So all of the points in this group are from SouthGate General CP, they span a range of values, and they were all recorded within a 2-hour period. Let’s have a look at the trend of these records.&lt;/p&gt;</code>rp &lt;- ggplot(df4, aes(x = LastUpdate, y = Occupancy)) + geom_line() + ggtitle(“SouthGate General CP: Occupancy on 05/01/2015”) + xlab(“Time”)</p>
<p>p<code>&lt;img src="day14.jpeg" /&gt; &lt;p&gt;According to the records, the car park is emptying over this period - but the difference between 13:30 and 15:30 is only around 150 cars, which is a reasonable change over that period of time.&lt;/p&gt; &lt;p&gt;Perhaps there was an unexplained, but precise, shift of -15000ish in the Occupancy records for this brief 2-hour period - in which case the data might be salvageable…&lt;/p&gt; &lt;hr&gt; &lt;h3&gt;Day 15 (26/11/16): Trend of massively negative occupancies&lt;/h3&gt; &lt;p&gt;Let’s see whether the records from that strange Monday afternoon last January follow the trend of records from a typical Monday afternoon.&lt;/p&gt; &lt;p&gt;First I’ll take all the records from Mondays &lt;em&gt;except&lt;/em&gt; for 05/01/2015 between 13:00 and 15:59, and average them out.&lt;/p&gt;</code>rdf2 &lt;- select(df, Name, LastUpdate, Occupancy) %&gt;% filter(Name == “SouthGate General CP”, Occupancy &gt;= 0) %&gt;% filter(wday(LastUpdate) == 2) %&gt;% mutate(Time = update(LastUpdate, year = 1970, month = 1, day = 1)) %&gt;% mutate(Time = round_date(Time, “10 minute”)) %&gt;% filter(hour(Time) == 13 | hour(Time) == 15) %&gt;% group_by(Time) %&gt;% summarize(newOcc = mean(Occupancy)) %&gt;% mutate(Period = “Average”)<code>&lt;p&gt;Now I’ll get the dodgy records from 05/01/2015, shift them by adding a constant to each (initially 15000 - an educated guess), and combine these in a dataframe with the averaged records.&lt;/p&gt;</code>rk &lt;- 15000</p>
<p>df3 &lt;- select(df, LastUpdate, Occupancy) %&gt;% filter(Occupancy &lt; -10000) %&gt;% mutate(Time = update(LastUpdate, year = 1970, month = 1, day = 1)) %&gt;% mutate(newOcc = Occupancy + k) %&gt;% select(Time, newOcc) %&gt;% mutate(Period = “05/01/2015”)</p>
<p>df4 &lt;- rbind(df2, df3)<code>&lt;p&gt;Now let’s plot!&lt;/p&gt;</code>rp &lt;- ggplot(df4, aes(x = Time, y = newOcc)) + geom_line(aes(colour = Period)) + scale_fill_discrete(guide = guide_legend()) + ggtitle(“SouthGate General CP: Adjusted”) + ylab(“Occupancy”) + annotate(“text”, x = (max(df4<img src="https://latex.codecogs.com/png.latex?Time)%20-%201500),%20y%20=%20(min(df4">newOcc) + 80), label = paste0(“Shift: +”, k))</p>
p``` <img src="https://owenjonesuob.github.io/posts/2016-11-22-30-days-30-visualizations-1-dataset-part-3/day15.jpeg">
<p>
We can see that the shifted records do indeed follow the same pattern as the averaged records. A small adjustment to <code>k</code> confirms this.
</p>
<img src="https://owenjonesuob.github.io/posts/2016-11-22-30-days-30-visualizations-1-dataset-part-3/day15_betterk.jpeg">
<p>
Maybe I can find a better value for this constant if I have a look at the records leading up to and away from the massively-negative period…
</p>
<hr>
<p>
On another note:
</p>
<h3 style="text-align:center;" class="anchored" data-anchor-id="having-sneakily-looked-at-plot-already-ill-points-in-certain-ranges">
<strong>WOOOOOOAH, I’M HALFWAY THERE!</strong>
</h3>
<p>
To be completely honest, when I started this project just over 2 weeks ago I didn’t know how I would even get this far without running out of ideas. Here’s hoping I can keep it up for another 15 days!
</p>


</section>

 ]]></description>
  <category>data</category>
  <category>data science</category>
  <category>ggplot2</category>
  <category>R</category>
  <category>RStudio</category>
  <category>visualization</category>
  <guid>https://owenjonesuob.github.io/posts/2016-11-22-30-days-30-visualizations-1-dataset-part-3/</guid>
  <pubDate>Tue, 22 Nov 2016 20:53:53 GMT</pubDate>
  <media:content url="https://owenjonesuob.github.io/posts/2016-11-22-30-days-30-visualizations-1-dataset-part-3/day11.jpeg" medium="image" type="image/jpeg"/>
</item>
</channel>
</rss>
